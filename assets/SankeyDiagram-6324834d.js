import{h as Rt,i as $n,d as ng,g as Nn,n as rg}from"./index-0a2cd937.js";import{y as ig}from"./index-da0a180b.js";import{k as lt,b as ia,A as ag,m as og,s as sg,q as ug,n as fg,c as Bi,p as qi}from"./cubehelix-658aafe4.js";import{h as Dn,a as Rn,d as aa,i as cg,j as lg,k as oa,l as sa,n as hg,c as dg,b as vg,m as pg,o as gg,e as yg,g as _g,r as mg,q as wg,u as bg,v as xg,T as Eg,s as Ag,f as Tg,t as Mg,w as Sg,x as Cg,y as Pg}from"./timer-9a1fd0b7.js";import{e as Pe}from"./extent-4cf1c809.js";import{d as Ne,c as ua,A as Og,h as Ig,j as $g,r as Ng,t as Lg,i as Dg,g as Rg}from"./round-fdc30ff2.js";import{r as fa,g as ca,i as kg,f as Fg,a as zg,b as Ug,c as jg,d as Vg,e as Bg}from"./group-f6e6d4c5.js";import{m as qg}from"./min-7292b72b.js";import{I as la,a as Lt}from"./index-f6506551.js";import{s as Hg}from"./sum-2c3bc3a6.js";import{t as Kg,z as Wg}from"./zip-96e4f4e1.js";import{P as Yg}from"./papaparse.min-f24b18f6.js";import{H as Zg}from"./HTTPFileSystem-11bb8165.js";import{i as Xg}from"./rainbow-b588906e.js";function Jg(e,i){if(!((i=+i)>=0))throw new RangeError("invalid r");let o=e.length;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid length");if(!o||!i)return e;const s=qn(i),f=e.slice();return s(e,f,0,o,1),s(f,e,0,o,1),s(e,f,0,o,1),e}const Qg=ha(qn),Gg=ha(ty);function ha(e){return function(i,o,s=o){if(!((o=+o)>=0))throw new RangeError("invalid rx");if(!((s=+s)>=0))throw new RangeError("invalid ry");let{data:f,width:l,height:h}=i;if(!((l=Math.floor(l))>=0))throw new RangeError("invalid width");if(!((h=Math.floor(h!==void 0?h:f.length/l))>=0))throw new RangeError("invalid height");if(!l||!h||!o&&!s)return i;const g=o&&e(o),_=s&&e(s),b=f.slice();return g&&_?(Wt(g,b,f,l,h),Wt(g,f,b,l,h),Wt(g,b,f,l,h),Yt(_,f,b,l,h),Yt(_,b,f,l,h),Yt(_,f,b,l,h)):g?(Wt(g,f,b,l,h),Wt(g,b,f,l,h),Wt(g,f,b,l,h)):_&&(Yt(_,f,b,l,h),Yt(_,b,f,l,h),Yt(_,f,b,l,h)),i}}function Wt(e,i,o,s,f){for(let l=0,h=s*f;l<h;)e(i,o,l,l+=s,1)}function Yt(e,i,o,s,f){for(let l=0,h=s*f;l<s;++l)e(i,o,l,l+h,s)}function ty(e){const i=qn(e);return(o,s,f,l,h)=>{f<<=2,l<<=2,h<<=2,i(o,s,f+0,l+0,h),i(o,s,f+1,l+1,h),i(o,s,f+2,l+2,h),i(o,s,f+3,l+3,h)}}function qn(e){const i=Math.floor(e);if(i===e)return ey(e);const o=e-i,s=2*e+1;return(f,l,h,g,_)=>{if(!((g-=_)>=h))return;let b=i*l[h];const T=_*i,S=T+_;for(let P=h,D=h+T;P<D;P+=_)b+=l[Math.min(g,P)];for(let P=h,D=g;P<=D;P+=_)b+=l[Math.min(g,P+T)],f[P]=(b+o*(l[Math.max(h,P-S)]+l[Math.min(g,P+S)]))/s,b-=l[Math.max(h,P-T)]}}function ey(e){const i=2*e+1;return(o,s,f,l,h)=>{if(!((l-=h)>=f))return;let g=e*s[f];const _=h*e;for(let b=f,T=f+_;b<T;b+=h)g+=s[Math.min(l,b)];for(let b=f,T=l;b<=T;b+=h)g+=s[Math.min(l,b+_)],o[b]=g/i,g-=s[Math.max(f,b-_)]}}function ze(e,i){let o=0;if(i===void 0)for(let s of e)s!=null&&(s=+s)>=s&&++o;else{let s=-1;for(let f of e)(f=i(f,++s,e))!=null&&(f=+f)>=f&&++o}return o}function ny(e){return e.length|0}function ry(e){return!(e>0)}function iy(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function ay(e){return i=>e(...i)}function oy(...e){const i=typeof e[e.length-1]=="function"&&ay(e.pop());e=e.map(iy);const o=e.map(ny),s=e.length-1,f=new Array(s+1).fill(0),l=[];if(s<0||o.some(ry))return l;for(;;){l.push(f.map((g,_)=>e[_][g]));let h=s;for(;++f[h]===o[h];){if(h===0)return i?l.map(i):l;f[h--]=0}}}function sy(e,i){var o=0,s=0;return Float64Array.from(e,i===void 0?f=>o+=+f||0:f=>o+=+i(f,s++,e)||0)}function uy(e,i,o){return(i.length!==2?Dn(fa(e,i,o),([s,f],[l,h])=>lt(f,h)||lt(s,l)):Dn(ca(e,o),([s,f],[l,h])=>i(f,h)||lt(s,l))).map(([s])=>s)}var fy=Array.prototype,cy=fy.slice;function Ln(e){return()=>e}function da(e,i,o){let s;for(;;){const f=Ne(e,i,o);if(f===s||f===0||!isFinite(f))return[e,i];f>0?(e=Math.floor(e/f)*f,i=Math.ceil(i/f)*f):f<0&&(e=Math.ceil(e*f)/f,i=Math.floor(i*f)/f),s=f}}function va(e){return Math.max(1,Math.ceil(Math.log(ze(e))/Math.LN2)+1)}function Hi(){var e=kg,i=Pe,o=va;function s(f){Array.isArray(f)||(f=Array.from(f));var l,h=f.length,g,_,b=new Array(h);for(l=0;l<h;++l)b[l]=e(f[l],l,f);var T=i(b),S=T[0],P=T[1],D=o(b,S,P);if(!Array.isArray(D)){const G=P,ot=+D;if(i===Pe&&([S,P]=da(S,P,ot)),D=ua(S,P,ot),D[0]<=S&&(_=Ne(S,P,ot)),D[D.length-1]>=P)if(G>=P&&i===Pe){const Z=Ne(S,P,ot);isFinite(Z)&&(Z>0?P=(Math.floor(P/Z)+1)*Z:Z<0&&(P=(Math.ceil(P*-Z)+1)/-Z))}else D.pop()}for(var j=D.length,W=0,Y=j;D[W]<=S;)++W;for(;D[Y-1]>P;)--Y;(W||Y<j)&&(D=D.slice(W,Y),j=Y-W);var rt=new Array(j+1),Q;for(l=0;l<=j;++l)Q=rt[l]=[],Q.x0=l>0?D[l-1]:S,Q.x1=l<j?D[l]:P;if(isFinite(_)){if(_>0)for(l=0;l<h;++l)(g=b[l])!=null&&S<=g&&g<=P&&rt[Math.min(j,Math.floor((g-S)/_))].push(f[l]);else if(_<0){for(l=0;l<h;++l)if((g=b[l])!=null&&S<=g&&g<=P){const G=Math.floor((S-g)*_);rt[Math.min(j,G+(D[G]<=g))].push(f[l])}}}else for(l=0;l<h;++l)(g=b[l])!=null&&S<=g&&g<=P&&rt[ia(D,g,0,j)].push(f[l]);return rt}return s.value=function(f){return arguments.length?(e=typeof f=="function"?f:Ln(f),s):e},s.domain=function(f){return arguments.length?(i=typeof f=="function"?f:Ln([f[0],f[1]]),s):i},s.thresholds=function(f){return arguments.length?(o=typeof f=="function"?f:Ln(Array.isArray(f)?cy.call(f):f),s):o},s}function ly(e,i,o){const s=ze(e),f=Rn(e,.75)-Rn(e,.25);return s&&f?Math.ceil((o-i)/(2*f*Math.pow(s,-1/3))):1}function hy(e,i,o){const s=ze(e),f=aa(e);return s&&f?Math.ceil((o-i)*Math.cbrt(s)/(3.49*f)):1}function dy(e,i){const o=new la;if(i===void 0)for(let l of e)l!=null&&l>=l&&o.set(l,(o.get(l)||0)+1);else{let l=-1;for(let h of e)(h=i(h,++l,e))!=null&&h>=h&&o.set(h,(o.get(h)||0)+1)}let s,f=0;for(const[l,h]of o)h>f&&(f=h,s=l);return s}function vy(e,i=py){const o=[];let s,f=!1;for(const l of e)f&&o.push(i(s,l)),s=l,f=!0;return o}function py(e,i){return[e,i]}function gy(e,i=lt){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let o=Array.from(e);const s=new Float64Array(o.length);i.length!==2&&(o=o.map(i),i=lt);const f=(g,_)=>i(o[g],o[_]);let l,h;return e=Uint32Array.from(o,(g,_)=>_),e.sort(i===lt?(g,_)=>cg(o[g],o[_]):lg(f)),e.forEach((g,_)=>{const b=f(g,l===void 0?g:l);b>=0?((l===void 0||b>0)&&(l=g,h=_),s[g]=h):s[g]=NaN}),s}function yy(e,i=lt){let o,s=!1;if(i.length===1){let f;for(const l of e){const h=i(l);(s?lt(h,f)<0:lt(h,h)===0)&&(o=l,f=h,s=!0)}}else for(const f of e)(s?i(f,o)<0:i(f,f)===0)&&(o=f,s=!0);return o}function pa(e,i=lt){if(i.length===1)return oa(e,i);let o,s=-1,f=-1;for(const l of e)++f,(s<0?i(l,l)===0:i(l,o)<0)&&(o=l,s=f);return s}function _y(e,i=lt){if(i.length===1)return sa(e,i);let o,s=-1,f=-1;for(const l of e)++f,(s<0?i(l,l)===0:i(l,o)>0)&&(o=l,s=f);return s}function my(e,i){const o=pa(e,i);return o<0?void 0:o}const wy=ga(Math.random);function ga(e){return function(o,s=0,f=o.length){let l=f-(s=+s);for(;l;){const h=e()*l--|0,g=o[l+s];o[l+s]=o[h+s],o[h+s]=g}return o}}function by(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let o=-1;for(const s of e)if(!i(s,++o,e))return!1;return!0}function xy(e,i){if(typeof i!="function")throw new TypeError("test is not a function");let o=-1;for(const s of e)if(i(s,++o,e))return!0;return!1}function Ey(e,i){if(typeof i!="function")throw new TypeError("test is not a function");const o=[];let s=-1;for(const f of e)i(f,++s,e)&&o.push(f);return o}function Ay(e,i){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof i!="function")throw new TypeError("mapper is not a function");return Array.from(e,(o,s)=>i(o,s,e))}function Ty(e,i,o){if(typeof i!="function")throw new TypeError("reducer is not a function");const s=e[Symbol.iterator]();let f,l,h=-1;if(arguments.length<3){if({done:f,value:o}=s.next(),f)return;++h}for(;{done:f,value:l}=s.next(),!f;)o=i(o,l,++h,e);return o}function My(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Sy(e,...i){e=new Lt(e);for(const o of i)for(const s of o)e.delete(s);return e}function Cy(e,i){const o=i[Symbol.iterator](),s=new Lt;for(const f of e){if(s.has(f))return!1;let l,h;for(;({value:l,done:h}=o.next())&&!h;){if(Object.is(f,l))return!1;s.add(l)}}return!0}function Py(e,...i){e=new Lt(e),i=i.map(Oy);t:for(const o of e)for(const s of i)if(!s.has(o)){e.delete(o);continue t}return e}function Oy(e){return e instanceof Lt?e:new Lt(e)}function ya(e,i){const o=e[Symbol.iterator](),s=new Set;for(const f of i){const l=Ki(f);if(s.has(l))continue;let h,g;for(;{value:h,done:g}=o.next();){if(g)return!1;const _=Ki(h);if(s.add(_),Object.is(l,_))break}}return!0}function Ki(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Iy(e,i){return ya(i,e)}function $y(...e){const i=new Lt;for(const o of e)for(const s of o)i.add(s);return i}const Ny=Object.freeze(Object.defineProperty({__proto__:null,Adder:Og,InternMap:la,InternSet:Lt,ascending:lt,bin:Hi,bisect:ia,bisectCenter:ag,bisectLeft:og,bisectRight:sg,bisector:ug,blur:Jg,blur2:Qg,blurImage:Gg,count:ze,cross:oy,cumsum:sy,descending:fg,deviation:aa,difference:Sy,disjoint:Cy,every:by,extent:Pe,fcumsum:Ig,filter:Ey,flatGroup:Fg,flatRollup:zg,fsum:$g,greatest:hg,greatestIndex:_y,group:ca,groupSort:uy,groups:Ug,histogram:Hi,index:jg,indexes:Vg,intersection:Py,least:yy,leastIndex:pa,map:Ay,max:dg,maxIndex:sa,mean:vg,median:pg,medianIndex:gg,merge:yg,min:qg,minIndex:oa,mode:dy,nice:da,pairs:vy,permute:_g,quantile:Rn,quantileIndex:mg,quantileSorted:wg,quickselect:bg,range:Ng,rank:gy,reduce:Ty,reverse:My,rollup:fa,rollups:Bg,scan:my,shuffle:wy,shuffler:ga,some:xy,sort:Dn,subset:Iy,sum:Hg,superset:ya,thresholdFreedmanDiaconis:ly,thresholdScott:hy,thresholdSturges:va,tickIncrement:Ne,tickStep:Lg,ticks:ua,transpose:Kg,union:$y,variance:xg,zip:Wg},Symbol.toStringTag,{value:"Module"}));function Wi(e,i,o){var s=new Eg;return i=i==null?0:+i,s.restart(function(f){s.stop(),e(f+i)},i,o),s}var kn={exports:{}};const Ly=Rt(Ny);var ct="$";function Le(){}Le.prototype=ee.prototype={constructor:Le,has:function(e){return ct+e in this},get:function(e){return this[ct+e]},set:function(e,i){return this[ct+e]=i,this},remove:function(e){var i=ct+e;return i in this&&delete this[i]},clear:function(){for(var e in this)e[0]===ct&&delete this[e]},keys:function(){var e=[];for(var i in this)i[0]===ct&&e.push(i.slice(1));return e},values:function(){var e=[];for(var i in this)i[0]===ct&&e.push(this[i]);return e},entries:function(){var e=[];for(var i in this)i[0]===ct&&e.push({key:i.slice(1),value:this[i]});return e},size:function(){var e=0;for(var i in this)i[0]===ct&&++e;return e},empty:function(){for(var e in this)if(e[0]===ct)return!1;return!0},each:function(e){for(var i in this)i[0]===ct&&e(this[i],i.slice(1),this)}};function ee(e,i){var o=new Le;if(e instanceof Le)e.each(function(g,_){o.set(_,g)});else if(Array.isArray(e)){var s=-1,f=e.length,l;if(i==null)for(;++s<f;)o.set(s,e[s]);else for(;++s<f;)o.set(i(l=e[s],s,e),l)}else if(e)for(var h in e)o.set(h,e[h]);return o}function Dy(){var e=[],i=[],o,s,f;function l(g,_,b,T){if(_>=e.length)return o!=null&&g.sort(o),s!=null?s(g):g;for(var S=-1,P=g.length,D=e[_++],j,W,Y=ee(),rt,Q=b();++S<P;)(rt=Y.get(j=D(W=g[S])+""))?rt.push(W):Y.set(j,[W]);return Y.each(function(G,ot){T(Q,ot,l(G,_,b,T))}),Q}function h(g,_){if(++_>e.length)return g;var b,T=i[_-1];return s!=null&&_>=e.length?b=g.entries():(b=[],g.each(function(S,P){b.push({key:P,values:h(S,_)})})),T!=null?b.sort(function(S,P){return T(S.key,P.key)}):b}return f={object:function(g){return l(g,0,Ry,ky)},map:function(g){return l(g,0,Yi,Zi)},entries:function(g){return h(l(g,0,Yi,Zi),0)},key:function(g){return e.push(g),f},sortKeys:function(g){return i[e.length-1]=g,f},sortValues:function(g){return o=g,f},rollup:function(g){return s=g,f}}}function Ry(){return{}}function ky(e,i,o){e[i]=o}function Yi(){return ee()}function Zi(e,i,o){e.set(i,o)}function De(){}var Nt=ee.prototype;De.prototype=_a.prototype={constructor:De,has:Nt.has,add:function(e){return e+="",this[ct+e]=e,this},remove:Nt.remove,clear:Nt.clear,values:Nt.keys,size:Nt.size,empty:Nt.empty,each:Nt.each};function _a(e,i){var o=new De;if(e instanceof De)e.each(function(l){o.add(l)});else if(e){var s=-1,f=e.length;if(i==null)for(;++s<f;)o.add(e[s]);else for(;++s<f;)o.add(i(e[s],s,e))}return o}function Fy(e){var i=[];for(var o in e)i.push(o);return i}function zy(e){var i=[];for(var o in e)i.push(e[o]);return i}function Uy(e){var i=[];for(var o in e)i.push({key:o,value:e[o]});return i}const jy=Object.freeze(Object.defineProperty({__proto__:null,entries:Uy,keys:Fy,map:ee,nest:Dy,set:_a,values:zy},Symbol.toStringTag,{value:"Module"})),Vy=Rt(jy),By=Rt(Ag);var Fn="http://www.w3.org/1999/xhtml";const zn={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ne(e){var i=e+="",o=i.indexOf(":");return o>=0&&(i=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),zn.hasOwnProperty(i)?{space:zn[i],local:e}:e}function qy(e){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===Fn&&i.documentElement.namespaceURI===Fn?i.createElement(e):i.createElementNS(o,e)}}function Hy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ue(e){var i=ne(e);return(i.local?Hy:qy)(i)}function Ky(){}function je(e){return e==null?Ky:function(){return this.querySelector(e)}}function Wy(e){typeof e!="function"&&(e=je(e));for(var i=this._groups,o=i.length,s=new Array(o),f=0;f<o;++f)for(var l=i[f],h=l.length,g=s[f]=new Array(h),_,b,T=0;T<h;++T)(_=l[T])&&(b=e.call(_,_.__data__,T,l))&&("__data__"in _&&(b.__data__=_.__data__),g[T]=b);return new at(s,this._parents)}function ma(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yy(){return[]}function Hn(e){return e==null?Yy:function(){return this.querySelectorAll(e)}}function Zy(e){return function(){return ma(e.apply(this,arguments))}}function Xy(e){typeof e=="function"?e=Zy(e):e=Hn(e);for(var i=this._groups,o=i.length,s=[],f=[],l=0;l<o;++l)for(var h=i[l],g=h.length,_,b=0;b<g;++b)(_=h[b])&&(s.push(e.call(_,_.__data__,b,h)),f.push(_));return new at(s,f)}function Kn(e){return function(){return this.matches(e)}}function wa(e){return function(i){return i.matches(e)}}var Jy=Array.prototype.find;function Qy(e){return function(){return Jy.call(this.children,e)}}function Gy(){return this.firstElementChild}function t_(e){return this.select(e==null?Gy:Qy(typeof e=="function"?e:wa(e)))}var e_=Array.prototype.filter;function n_(){return Array.from(this.children)}function r_(e){return function(){return e_.call(this.children,e)}}function i_(e){return this.selectAll(e==null?n_:r_(typeof e=="function"?e:wa(e)))}function a_(e){typeof e!="function"&&(e=Kn(e));for(var i=this._groups,o=i.length,s=new Array(o),f=0;f<o;++f)for(var l=i[f],h=l.length,g=s[f]=[],_,b=0;b<h;++b)(_=l[b])&&e.call(_,_.__data__,b,l)&&g.push(_);return new at(s,this._parents)}function ba(e){return new Array(e.length)}function o_(){return new at(this._enter||this._groups.map(ba),this._parents)}function Re(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}Re.prototype={constructor:Re,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function s_(e){return function(){return e}}function u_(e,i,o,s,f,l){for(var h=0,g,_=i.length,b=l.length;h<b;++h)(g=i[h])?(g.__data__=l[h],s[h]=g):o[h]=new Re(e,l[h]);for(;h<_;++h)(g=i[h])&&(f[h]=g)}function f_(e,i,o,s,f,l,h){var g,_,b=new Map,T=i.length,S=l.length,P=new Array(T),D;for(g=0;g<T;++g)(_=i[g])&&(P[g]=D=h.call(_,_.__data__,g,i)+"",b.has(D)?f[g]=_:b.set(D,_));for(g=0;g<S;++g)D=h.call(e,l[g],g,l)+"",(_=b.get(D))?(s[g]=_,_.__data__=l[g],b.delete(D)):o[g]=new Re(e,l[g]);for(g=0;g<T;++g)(_=i[g])&&b.get(P[g])===_&&(f[g]=_)}function c_(e){return e.__data__}function l_(e,i){if(!arguments.length)return Array.from(this,c_);var o=i?f_:u_,s=this._parents,f=this._groups;typeof e!="function"&&(e=s_(e));for(var l=f.length,h=new Array(l),g=new Array(l),_=new Array(l),b=0;b<l;++b){var T=s[b],S=f[b],P=S.length,D=h_(e.call(T,T&&T.__data__,b,s)),j=D.length,W=g[b]=new Array(j),Y=h[b]=new Array(j),rt=_[b]=new Array(P);o(T,S,W,Y,rt,D,i);for(var Q=0,G=0,ot,Z;Q<j;++Q)if(ot=W[Q]){for(Q>=G&&(G=Q+1);!(Z=Y[G])&&++G<j;);ot._next=Z||null}}return h=new at(h,s),h._enter=g,h._exit=_,h}function h_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function d_(){return new at(this._exit||this._groups.map(ba),this._parents)}function v_(e,i,o){var s=this.enter(),f=this,l=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),i!=null&&(f=i(f),f&&(f=f.selection())),o==null?l.remove():o(l),s&&f?s.merge(f).order():f}function p_(e){for(var i=e.selection?e.selection():e,o=this._groups,s=i._groups,f=o.length,l=s.length,h=Math.min(f,l),g=new Array(f),_=0;_<h;++_)for(var b=o[_],T=s[_],S=b.length,P=g[_]=new Array(S),D,j=0;j<S;++j)(D=b[j]||T[j])&&(P[j]=D);for(;_<f;++_)g[_]=o[_];return new at(g,this._parents)}function g_(){for(var e=this._groups,i=-1,o=e.length;++i<o;)for(var s=e[i],f=s.length-1,l=s[f],h;--f>=0;)(h=s[f])&&(l&&h.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(h,l),l=h);return this}function y_(e){e||(e=__);function i(S,P){return S&&P?e(S.__data__,P.__data__):!S-!P}for(var o=this._groups,s=o.length,f=new Array(s),l=0;l<s;++l){for(var h=o[l],g=h.length,_=f[l]=new Array(g),b,T=0;T<g;++T)(b=h[T])&&(_[T]=b);_.sort(i)}return new at(f,this._parents).order()}function __(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function m_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function w_(){return Array.from(this)}function b_(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],f=0,l=s.length;f<l;++f){var h=s[f];if(h)return h}return null}function x_(){let e=0;for(const i of this)++e;return e}function E_(){return!this.node()}function A_(e){for(var i=this._groups,o=0,s=i.length;o<s;++o)for(var f=i[o],l=0,h=f.length,g;l<h;++l)(g=f[l])&&e.call(g,g.__data__,l,f);return this}function T_(e){return function(){this.removeAttribute(e)}}function M_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S_(e,i){return function(){this.setAttribute(e,i)}}function C_(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function P_(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function O_(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function I_(e,i){var o=ne(e);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((i==null?o.local?M_:T_:typeof i=="function"?o.local?O_:P_:o.local?C_:S_)(o,i))}function Wn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $_(e){return function(){this.style.removeProperty(e)}}function N_(e,i,o){return function(){this.style.setProperty(e,i,o)}}function L_(e,i,o){return function(){var s=i.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,o)}}function D_(e,i,o){return arguments.length>1?this.each((i==null?$_:typeof i=="function"?L_:N_)(e,i,o??"")):Dt(this.node(),e)}function Dt(e,i){return e.style.getPropertyValue(i)||Wn(e).getComputedStyle(e,null).getPropertyValue(i)}function R_(e){return function(){delete this[e]}}function k_(e,i){return function(){this[e]=i}}function F_(e,i){return function(){var o=i.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function z_(e,i){return arguments.length>1?this.each((i==null?R_:typeof i=="function"?F_:k_)(e,i)):this.node()[e]}function xa(e){return e.trim().split(/^|\s+/)}function Yn(e){return e.classList||new Ea(e)}function Ea(e){this._node=e,this._names=xa(e.getAttribute("class")||"")}Ea.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Aa(e,i){for(var o=Yn(e),s=-1,f=i.length;++s<f;)o.add(i[s])}function Ta(e,i){for(var o=Yn(e),s=-1,f=i.length;++s<f;)o.remove(i[s])}function U_(e){return function(){Aa(this,e)}}function j_(e){return function(){Ta(this,e)}}function V_(e,i){return function(){(i.apply(this,arguments)?Aa:Ta)(this,e)}}function B_(e,i){var o=xa(e+"");if(arguments.length<2){for(var s=Yn(this.node()),f=-1,l=o.length;++f<l;)if(!s.contains(o[f]))return!1;return!0}return this.each((typeof i=="function"?V_:i?U_:j_)(o,i))}function q_(){this.textContent=""}function H_(e){return function(){this.textContent=e}}function K_(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function W_(e){return arguments.length?this.each(e==null?q_:(typeof e=="function"?K_:H_)(e)):this.node().textContent}function Y_(){this.innerHTML=""}function Z_(e){return function(){this.innerHTML=e}}function X_(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function J_(e){return arguments.length?this.each(e==null?Y_:(typeof e=="function"?X_:Z_)(e)):this.node().innerHTML}function Q_(){this.nextSibling&&this.parentNode.appendChild(this)}function G_(){return this.each(Q_)}function tm(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function em(){return this.each(tm)}function nm(e){var i=typeof e=="function"?e:Ue(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function rm(){return null}function im(e,i){var o=typeof e=="function"?e:Ue(e),s=i==null?rm:typeof i=="function"?i:je(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function am(){var e=this.parentNode;e&&e.removeChild(this)}function om(){return this.each(am)}function sm(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function um(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function fm(e){return this.select(e?um:sm)}function cm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lm(e){return function(i){e.call(this,i,this.__data__)}}function hm(e){return e.trim().split(/^|\s+/).map(function(i){var o="",s=i.indexOf(".");return s>=0&&(o=i.slice(s+1),i=i.slice(0,s)),{type:i,name:o}})}function dm(e){return function(){var i=this.__on;if(i){for(var o=0,s=-1,f=i.length,l;o<f;++o)l=i[o],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):i[++s]=l;++s?i.length=s:delete this.__on}}}function vm(e,i,o){return function(){var s=this.__on,f,l=lm(i);if(s){for(var h=0,g=s.length;h<g;++h)if((f=s[h]).type===e.type&&f.name===e.name){this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=l,f.options=o),f.value=i;return}}this.addEventListener(e.type,l,o),f={type:e.type,name:e.name,value:i,listener:l,options:o},s?s.push(f):this.__on=[f]}}function pm(e,i,o){var s=hm(e+""),f,l=s.length,h;if(arguments.length<2){var g=this.node().__on;if(g){for(var _=0,b=g.length,T;_<b;++_)for(f=0,T=g[_];f<l;++f)if((h=s[f]).type===T.type&&h.name===T.name)return T.value}return}for(g=i?vm:dm,f=0;f<l;++f)this.each(g(s[f],i,o));return this}function Ma(e,i,o){var s=Wn(e),f=s.CustomEvent;typeof f=="function"?f=new f(i,o):(f=s.document.createEvent("Event"),o?(f.initEvent(i,o.bubbles,o.cancelable),f.detail=o.detail):f.initEvent(i,!1,!1)),e.dispatchEvent(f)}function gm(e,i){return function(){return Ma(this,e,i)}}function ym(e,i){return function(){return Ma(this,e,i.apply(this,arguments))}}function _m(e,i){return this.each((typeof i=="function"?ym:gm)(e,i))}function*mm(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],f=0,l=s.length,h;f<l;++f)(h=s[f])&&(yield h)}var Zn=[null];function at(e,i){this._groups=e,this._parents=i}function kt(){return new at([[document.documentElement]],Zn)}function wm(){return this}at.prototype=kt.prototype={constructor:at,select:Wy,selectAll:Xy,selectChild:t_,selectChildren:i_,filter:a_,data:l_,enter:o_,exit:d_,join:v_,merge:p_,selection:wm,order:g_,sort:y_,call:m_,nodes:w_,node:b_,size:x_,empty:E_,each:A_,attr:I_,style:D_,property:z_,classed:B_,text:W_,html:J_,raise:G_,lower:em,append:nm,insert:im,remove:om,clone:fm,datum:cm,on:pm,dispatch:_m,[Symbol.iterator]:mm};function Xn(e){return typeof e=="string"?new at([[document.querySelector(e)]],[document.documentElement]):new at([[e]],Zn)}function bm(e){return Xn(Ue(e).call(document.documentElement))}var xm=0;function Sa(){return new Un}function Un(){this._="@"+(++xm).toString(36)}Un.prototype=Sa.prototype={constructor:Un,get:function(e){for(var i=this._;!(i in e);)if(!(e=e.parentNode))return;return e[i]},set:function(e,i){return e[this._]=i},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function Ca(e){let i;for(;i=e.sourceEvent;)e=i;return e}function Pa(e,i){if(e=Ca(e),i===void 0&&(i=e.currentTarget),i){var o=i.ownerSVGElement||i;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(i.getScreenCTM().inverse()),[s.x,s.y]}if(i.getBoundingClientRect){var f=i.getBoundingClientRect();return[e.clientX-f.left-i.clientLeft,e.clientY-f.top-i.clientTop]}}return[e.pageX,e.pageY]}function Em(e,i){return e.target&&(e=Ca(e),i===void 0&&(i=e.currentTarget),e=e.touches||[e]),Array.from(e,o=>Pa(o,i))}function Am(e){return typeof e=="string"?new at([document.querySelectorAll(e)],[document.documentElement]):new at([ma(e)],Zn)}const Tm=Object.freeze(Object.defineProperty({__proto__:null,create:bm,creator:Ue,local:Sa,matcher:Kn,namespace:ne,namespaces:zn,pointer:Pa,pointers:Em,select:Xn,selectAll:Am,selection:kt,selector:je,selectorAll:Hn,style:Dt,window:Wn},Symbol.toStringTag,{value:"Module"})),Mm=Rt(Tm);var Sm=Tg("start","end","cancel","interrupt"),Cm=[],Oa=0,jn=1,Vn=2,Oe=3,Xi=4,Bn=5,Ie=6;function Ve(e,i,o,s,f,l){var h=e.__transition;if(!h)e.__transition={};else if(o in h)return;Pm(e,o,{name:i,index:s,group:f,on:Sm,tween:Cm,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Oa})}function Jn(e,i){var o=vt(e,i);if(o.state>Oa)throw new Error("too late; already scheduled");return o}function _t(e,i){var o=vt(e,i);if(o.state>Oe)throw new Error("too late; already running");return o}function vt(e,i){var o=e.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function Pm(e,i,o){var s=e.__transition,f;s[i]=o,o.timer=Mg(l,0,o.time);function l(b){o.state=jn,o.timer.restart(h,o.delay,o.time),o.delay<=b&&h(b-o.delay)}function h(b){var T,S,P,D;if(o.state!==jn)return _();for(T in s)if(D=s[T],D.name===o.name){if(D.state===Oe)return Wi(h);D.state===Xi?(D.state=Ie,D.timer.stop(),D.on.call("interrupt",e,e.__data__,D.index,D.group),delete s[T]):+T<i&&(D.state=Ie,D.timer.stop(),D.on.call("cancel",e,e.__data__,D.index,D.group),delete s[T])}if(Wi(function(){o.state===Oe&&(o.state=Xi,o.timer.restart(g,o.delay,o.time),g(b))}),o.state=Vn,o.on.call("start",e,e.__data__,o.index,o.group),o.state===Vn){for(o.state=Oe,f=new Array(P=o.tween.length),T=0,S=-1;T<P;++T)(D=o.tween[T].value.call(e,e.__data__,o.index,o.group))&&(f[++S]=D);f.length=S+1}}function g(b){for(var T=b<o.duration?o.ease.call(null,b/o.duration):(o.timer.restart(_),o.state=Bn,1),S=-1,P=f.length;++S<P;)f[S].call(e,T);o.state===Bn&&(o.on.call("end",e,e.__data__,o.index,o.group),_())}function _(){o.state=Ie,o.timer.stop(),delete s[i];for(var b in s)return;delete e.__transition}}function Ia(e,i){var o=e.__transition,s,f,l=!0,h;if(o){i=i==null?null:i+"";for(h in o){if((s=o[h]).name!==i){l=!1;continue}f=s.state>Vn&&s.state<Bn,s.state=Ie,s.timer.stop(),s.on.call(f?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete o[h]}l&&delete e.__transition}}function Om(e){return this.each(function(){Ia(this,e)})}function Im(e,i){var o,s;return function(){var f=_t(this,e),l=f.tween;if(l!==o){s=o=l;for(var h=0,g=s.length;h<g;++h)if(s[h].name===i){s=s.slice(),s.splice(h,1);break}}f.tween=s}}function $m(e,i,o){var s,f;if(typeof o!="function")throw new Error;return function(){var l=_t(this,e),h=l.tween;if(h!==s){f=(s=h).slice();for(var g={name:i,value:o},_=0,b=f.length;_<b;++_)if(f[_].name===i){f[_]=g;break}_===b&&f.push(g)}l.tween=f}}function Nm(e,i){var o=this._id;if(e+="",arguments.length<2){for(var s=vt(this.node(),o).tween,f=0,l=s.length,h;f<l;++f)if((h=s[f]).name===e)return h.value;return null}return this.each((i==null?Im:$m)(o,e,i))}function Qn(e,i,o){var s=e._id;return e.each(function(){var f=_t(this,s);(f.value||(f.value={}))[i]=o.apply(this,arguments)}),function(f){return vt(f,s).value[i]}}function $a(e,i){var o;return(typeof i=="number"?Dg:i instanceof Bi?qi:(o=Bi(i))?(i=o,qi):Rg)(e,i)}function Lm(e){return function(){this.removeAttribute(e)}}function Dm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rm(e,i,o){var s,f=o+"",l;return function(){var h=this.getAttribute(e);return h===f?null:h===s?l:l=i(s=h,o)}}function km(e,i,o){var s,f=o+"",l;return function(){var h=this.getAttributeNS(e.space,e.local);return h===f?null:h===s?l:l=i(s=h,o)}}function Fm(e,i,o){var s,f,l;return function(){var h,g=o(this),_;return g==null?void this.removeAttribute(e):(h=this.getAttribute(e),_=g+"",h===_?null:h===s&&_===f?l:(f=_,l=i(s=h,g)))}}function zm(e,i,o){var s,f,l;return function(){var h,g=o(this),_;return g==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),_=g+"",h===_?null:h===s&&_===f?l:(f=_,l=i(s=h,g)))}}function Um(e,i){var o=ne(e),s=o==="transform"?Sg:$a;return this.attrTween(e,typeof i=="function"?(o.local?zm:Fm)(o,s,Qn(this,"attr."+e,i)):i==null?(o.local?Dm:Lm)(o):(o.local?km:Rm)(o,s,i))}function jm(e,i){return function(o){this.setAttribute(e,i.call(this,o))}}function Vm(e,i){return function(o){this.setAttributeNS(e.space,e.local,i.call(this,o))}}function Bm(e,i){var o,s;function f(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&Vm(e,l)),o}return f._value=i,f}function qm(e,i){var o,s;function f(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&jm(e,l)),o}return f._value=i,f}function Hm(e,i){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var s=ne(e);return this.tween(o,(s.local?Bm:qm)(s,i))}function Km(e,i){return function(){Jn(this,e).delay=+i.apply(this,arguments)}}function Wm(e,i){return i=+i,function(){Jn(this,e).delay=i}}function Ym(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Km:Wm)(i,e)):vt(this.node(),i).delay}function Zm(e,i){return function(){_t(this,e).duration=+i.apply(this,arguments)}}function Xm(e,i){return i=+i,function(){_t(this,e).duration=i}}function Jm(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Zm:Xm)(i,e)):vt(this.node(),i).duration}function Qm(e,i){if(typeof i!="function")throw new Error;return function(){_t(this,e).ease=i}}function Gm(e){var i=this._id;return arguments.length?this.each(Qm(i,e)):vt(this.node(),i).ease}function t0(e,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;_t(this,e).ease=o}}function e0(e){if(typeof e!="function")throw new Error;return this.each(t0(this._id,e))}function n0(e){typeof e!="function"&&(e=Kn(e));for(var i=this._groups,o=i.length,s=new Array(o),f=0;f<o;++f)for(var l=i[f],h=l.length,g=s[f]=[],_,b=0;b<h;++b)(_=l[b])&&e.call(_,_.__data__,b,l)&&g.push(_);return new yt(s,this._parents,this._name,this._id)}function r0(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,o=e._groups,s=i.length,f=o.length,l=Math.min(s,f),h=new Array(s),g=0;g<l;++g)for(var _=i[g],b=o[g],T=_.length,S=h[g]=new Array(T),P,D=0;D<T;++D)(P=_[D]||b[D])&&(S[D]=P);for(;g<s;++g)h[g]=i[g];return new yt(h,this._parents,this._name,this._id)}function i0(e){return(e+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function a0(e,i,o){var s,f,l=i0(i)?Jn:_t;return function(){var h=l(this,e),g=h.on;g!==s&&(f=(s=g).copy()).on(i,o),h.on=f}}function o0(e,i){var o=this._id;return arguments.length<2?vt(this.node(),o).on.on(e):this.each(a0(o,e,i))}function s0(e){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==e)return;i&&i.removeChild(this)}}function u0(){return this.on("end.remove",s0(this._id))}function f0(e){var i=this._name,o=this._id;typeof e!="function"&&(e=je(e));for(var s=this._groups,f=s.length,l=new Array(f),h=0;h<f;++h)for(var g=s[h],_=g.length,b=l[h]=new Array(_),T,S,P=0;P<_;++P)(T=g[P])&&(S=e.call(T,T.__data__,P,g))&&("__data__"in T&&(S.__data__=T.__data__),b[P]=S,Ve(b[P],i,o,P,b,vt(T,o)));return new yt(l,this._parents,i,o)}function c0(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Hn(e));for(var s=this._groups,f=s.length,l=[],h=[],g=0;g<f;++g)for(var _=s[g],b=_.length,T,S=0;S<b;++S)if(T=_[S]){for(var P=e.call(T,T.__data__,S,_),D,j=vt(T,o),W=0,Y=P.length;W<Y;++W)(D=P[W])&&Ve(D,i,o,W,P,j);l.push(P),h.push(T)}return new yt(l,h,i,o)}var l0=kt.prototype.constructor;function h0(){return new l0(this._groups,this._parents)}function d0(e,i){var o,s,f;return function(){var l=Dt(this,e),h=(this.style.removeProperty(e),Dt(this,e));return l===h?null:l===o&&h===s?f:f=i(o=l,s=h)}}function Na(e){return function(){this.style.removeProperty(e)}}function v0(e,i,o){var s,f=o+"",l;return function(){var h=Dt(this,e);return h===f?null:h===s?l:l=i(s=h,o)}}function p0(e,i,o){var s,f,l;return function(){var h=Dt(this,e),g=o(this),_=g+"";return g==null&&(_=g=(this.style.removeProperty(e),Dt(this,e))),h===_?null:h===s&&_===f?l:(f=_,l=i(s=h,g))}}function g0(e,i){var o,s,f,l="style."+i,h="end."+l,g;return function(){var _=_t(this,e),b=_.on,T=_.value[l]==null?g||(g=Na(i)):void 0;(b!==o||f!==T)&&(s=(o=b).copy()).on(h,f=T),_.on=s}}function y0(e,i,o){var s=(e+="")=="transform"?Cg:$a;return i==null?this.styleTween(e,d0(e,s)).on("end.style."+e,Na(e)):typeof i=="function"?this.styleTween(e,p0(e,s,Qn(this,"style."+e,i))).each(g0(this._id,e)):this.styleTween(e,v0(e,s,i),o).on("end.style."+e,null)}function _0(e,i,o){return function(s){this.style.setProperty(e,i.call(this,s),o)}}function m0(e,i,o){var s,f;function l(){var h=i.apply(this,arguments);return h!==f&&(s=(f=h)&&_0(e,h,o)),s}return l._value=i,l}function w0(e,i,o){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(i==null)return this.tween(s,null);if(typeof i!="function")throw new Error;return this.tween(s,m0(e,i,o??""))}function b0(e){return function(){this.textContent=e}}function x0(e){return function(){var i=e(this);this.textContent=i??""}}function E0(e){return this.tween("text",typeof e=="function"?x0(Qn(this,"text",e)):b0(e==null?"":e+""))}function A0(e){return function(i){this.textContent=e.call(this,i)}}function T0(e){var i,o;function s(){var f=e.apply(this,arguments);return f!==o&&(i=(o=f)&&A0(f)),i}return s._value=e,s}function M0(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,T0(e))}function S0(){for(var e=this._name,i=this._id,o=Da(),s=this._groups,f=s.length,l=0;l<f;++l)for(var h=s[l],g=h.length,_,b=0;b<g;++b)if(_=h[b]){var T=vt(_,i);Ve(_,e,o,b,h,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new yt(s,this._parents,e,o)}function C0(){var e,i,o=this,s=o._id,f=o.size();return new Promise(function(l,h){var g={value:h},_={value:function(){--f===0&&l()}};o.each(function(){var b=_t(this,s),T=b.on;T!==e&&(i=(e=T).copy(),i._.cancel.push(g),i._.interrupt.push(g),i._.end.push(_)),b.on=i}),f===0&&l()})}var P0=0;function yt(e,i,o,s){this._groups=e,this._parents=i,this._name=o,this._id=s}function La(e){return kt().transition(e)}function Da(){return++P0}var bt=kt.prototype;yt.prototype=La.prototype={constructor:yt,select:f0,selectAll:c0,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:n0,merge:r0,selection:h0,transition:S0,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:o0,attr:Um,attrTween:Hm,style:y0,styleTween:w0,text:E0,textTween:M0,remove:u0,tween:Nm,delay:Ym,duration:Jm,ease:Gm,easeVarying:e0,end:C0,[Symbol.iterator]:bt[Symbol.iterator]};function O0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var I0={time:null,delay:0,duration:250,ease:O0};function $0(e,i){for(var o;!(o=e.__transition)||!(o=o[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return o}function N0(e){var i,o;e instanceof yt?(i=e._id,e=e._name):(i=Da(),(o=I0).time=Pg(),e=e==null?null:e+"");for(var s=this._groups,f=s.length,l=0;l<f;++l)for(var h=s[l],g=h.length,_,b=0;b<g;++b)(_=h[b])&&Ve(_,e,i,b,h,o||$0(_,i));return new yt(s,this._parents,e,i)}kt.prototype.interrupt=Om;kt.prototype.transition=N0;var L0=[null];function D0(e,i){var o=e.__transition,s,f;if(o){i=i==null?null:i+"";for(f in o)if((s=o[f]).state>jn&&s.name===i)return new yt([[e]],L0,i,+f)}return null}const R0=Object.freeze(Object.defineProperty({__proto__:null,active:D0,interrupt:Ia,transition:La},Symbol.toStringTag,{value:"Module"})),k0=Rt(R0);var F0={value:()=>{}};function Ra(){for(var e=0,i=arguments.length,o={},s;e<i;++e){if(!(s=arguments[e]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new $e(o)}function $e(e){this._=e}function z0(e,i){return e.trim().split(/^|\s+/).map(function(o){var s="",f=o.indexOf(".");if(f>=0&&(s=o.slice(f+1),o=o.slice(0,f)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}$e.prototype=Ra.prototype={constructor:$e,on:function(e,i){var o=this._,s=z0(e+"",o),f,l=-1,h=s.length;if(arguments.length<2){for(;++l<h;)if((f=(e=s[l]).type)&&(f=U0(o[f],e.name)))return f;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++l<h;)if(f=(e=s[l]).type)o[f]=Ji(o[f],e.name,i);else if(i==null)for(f in o)o[f]=Ji(o[f],e.name,null);return this},copy:function(){var e={},i=this._;for(var o in i)e[o]=i[o].slice();return new $e(e)},call:function(e,i){if((f=arguments.length-2)>0)for(var o=new Array(f),s=0,f,l;s<f;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],s=0,f=l.length;s<f;++s)l[s].value.apply(i,o)},apply:function(e,i,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],f=0,l=s.length;f<l;++f)s[f].value.apply(i,o)}};function U0(e,i){for(var o=0,s=e.length,f;o<s;++o)if((f=e[o]).name===i)return f.value}function Ji(e,i,o){for(var s=0,f=e.length;s<f;++s)if(e[s].name===i){e[s]=F0,e=e.slice(0,s).concat(e.slice(s+1));break}return o!=null&&e.push({name:i,value:o}),e}const j0=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Ra},Symbol.toStringTag,{value:"Module"})),V0=Rt(j0);function B0(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ke(e,i){if((o=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"))<0)return null;var o,s=e.slice(0,o);return[s.length>1?s[0]+s.slice(2):s,+e.slice(o+1)]}function Zt(e){return e=ke(Math.abs(e)),e?e[1]:NaN}function q0(e,i){return function(o,s){for(var f=o.length,l=[],h=0,g=e[0],_=0;f>0&&g>0&&(_+g+1>s&&(g=Math.max(1,s-_)),l.push(o.substring(f-=g,f+g)),!((_+=g+1)>s));)g=e[h=(h+1)%e.length];return l.reverse().join(i)}}function H0(e){return function(i){return i.replace(/[0-9]/g,function(o){return e[+o]})}}var K0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fe(e){if(!(i=K0.exec(e)))throw new Error("invalid format: "+e);var i;return new Be({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Fe.prototype=Be.prototype;function Be(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Be.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function W0(e){t:for(var i=e.length,o=1,s=-1,f;o<i;++o)switch(e[o]){case".":s=f=o;break;case"0":s===0&&(s=o),f=o;break;default:if(!+e[o])break t;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(f+1):e}var ka;function Y0(e,i){var o=ke(e,i);if(!o)return e+"";var s=o[0],f=o[1],l=f-(ka=Math.max(-8,Math.min(8,Math.floor(f/3)))*3)+1,h=s.length;return l===h?s:l>h?s+new Array(l-h+1).join("0"):l>0?s.slice(0,l)+"."+s.slice(l):"0."+new Array(1-l).join("0")+ke(e,Math.max(0,i+l-1))[0]}function Qi(e,i){var o=ke(e,i);if(!o)return e+"";var s=o[0],f=o[1];return f<0?"0."+new Array(-f).join("0")+s:s.length>f+1?s.slice(0,f+1)+"."+s.slice(f+1):s+new Array(f-s.length+2).join("0")}const Gi={"%":(e,i)=>(e*100).toFixed(i),b:e=>Math.round(e).toString(2),c:e=>e+"",d:B0,e:(e,i)=>e.toExponential(i),f:(e,i)=>e.toFixed(i),g:(e,i)=>e.toPrecision(i),o:e=>Math.round(e).toString(8),p:(e,i)=>Qi(e*100,i),r:Qi,s:Y0,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ta(e){return e}var ea=Array.prototype.map,na=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fa(e){var i=e.grouping===void 0||e.thousands===void 0?ta:q0(ea.call(e.grouping,Number),e.thousands+""),o=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",f=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?ta:H0(ea.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"−":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function b(S){S=Fe(S);var P=S.fill,D=S.align,j=S.sign,W=S.symbol,Y=S.zero,rt=S.width,Q=S.comma,G=S.precision,ot=S.trim,Z=S.type;Z==="n"?(Q=!0,Z="g"):Gi[Z]||(G===void 0&&(G=12),ot=!0,Z="g"),(Y||P==="0"&&D==="=")&&(Y=!0,P="0",D="=");var qe=W==="$"?o:W==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",He=W==="$"?s:/[%p]/.test(Z)?h:"",re=Gi[Z],Ke=/[defgprs%]/.test(Z);G=G===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function ie(B){var mt=qe,tt=He,ht,ae,Ft;if(Z==="c")tt=re(B)+tt,B="";else{B=+B;var zt=B<0||1/B<0;if(B=isNaN(B)?_:re(Math.abs(B),G),ot&&(B=W0(B)),zt&&+B==0&&j!=="+"&&(zt=!1),mt=(zt?j==="("?j:g:j==="-"||j==="("?"":j)+mt,tt=(Z==="s"?na[8+ka/3]:"")+tt+(zt&&j==="("?")":""),Ke){for(ht=-1,ae=B.length;++ht<ae;)if(Ft=B.charCodeAt(ht),48>Ft||Ft>57){tt=(Ft===46?f+B.slice(ht+1):B.slice(ht))+tt,B=B.slice(0,ht);break}}}Q&&!Y&&(B=i(B,1/0));var Ut=mt.length+B.length+tt.length,dt=Ut<rt?new Array(rt-Ut+1).join(P):"";switch(Q&&Y&&(B=i(dt+B,dt.length?rt-tt.length:1/0),dt=""),D){case"<":B=mt+B+tt+dt;break;case"=":B=mt+dt+B+tt;break;case"^":B=dt.slice(0,Ut=dt.length>>1)+mt+B+tt+dt.slice(Ut);break;default:B=dt+mt+B+tt;break}return l(B)}return ie.toString=function(){return S+""},ie}function T(S,P){var D=b((S=Fe(S),S.type="f",S)),j=Math.max(-8,Math.min(8,Math.floor(Zt(P)/3)))*3,W=Math.pow(10,-j),Y=na[8+j/3];return function(rt){return D(W*rt)+Y}}return{format:b,formatPrefix:T}}var Ce,za,Ua;ja({thousands:",",grouping:[3],currency:["$",""]});function ja(e){return Ce=Fa(e),za=Ce.format,Ua=Ce.formatPrefix,Ce}function Z0(e){return Math.max(0,-Zt(Math.abs(e)))}function X0(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zt(i)/3)))*3-Zt(Math.abs(e)))}function J0(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,Zt(i)-Zt(e))+1}const Q0=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:Be,get format(){return za},formatDefaultLocale:ja,formatLocale:Fa,get formatPrefix(){return Ua},formatSpecifier:Fe,precisionFixed:Z0,precisionPrefix:X0,precisionRound:J0},Symbol.toStringTag,{value:"Module"})),G0=Rt(Q0);(function(e,i){(function(o,s){s(i,Ly,Vy,By,Mm,k0,V0,G0)})($n,function(o,s,f,l,h,g,_,b){var T=typeof window<"u"?window:typeof $n<"u"?$n:typeof self<"u"?self:{};function S(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function P(t,n){return n={exports:{}},t(n,n.exports),n.exports}function D(){this.__data__=[],this.size=0}var j=D;function W(t,n){return t===n||t!==t&&n!==n}var Y=W;function rt(t,n){for(var r=t.length;r--;)if(Y(t[r][0],n))return r;return-1}var Q=rt,G=Array.prototype,ot=G.splice;function Z(t){var n=this.__data__,r=Q(n,t);if(r<0)return!1;var a=n.length-1;return r==a?n.pop():ot.call(n,r,1),--this.size,!0}var qe=Z;function He(t){var n=this.__data__,r=Q(n,t);return r<0?void 0:n[r][1]}var re=He;function Ke(t){return Q(this.__data__,t)>-1}var ie=Ke;function B(t,n){var r=this.__data__,a=Q(r,t);return a<0?(++this.size,r.push([t,n])):r[a][1]=n,this}var mt=B;function tt(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}tt.prototype.clear=j,tt.prototype.delete=qe,tt.prototype.get=re,tt.prototype.has=ie,tt.prototype.set=mt;var ht=tt;function ae(){this.__data__=new ht,this.size=0}var Ft=ae;function zt(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}var Ut=zt;function dt(t){return this.__data__.get(t)}var Va=dt;function Ba(t){return this.__data__.has(t)}var qa=Ba,Ha=typeof T=="object"&&T&&T.Object===Object&&T,Gn=Ha,Ka=typeof self=="object"&&self&&self.Object===Object&&self,Wa=Gn||Ka||Function("return this")(),pt=Wa,Ya=pt.Symbol,ut=Ya,tr=Object.prototype,Za=tr.hasOwnProperty,Xa=tr.toString,Xt=ut?ut.toStringTag:void 0;function Ja(t){var n=Za.call(t,Xt),r=t[Xt];try{t[Xt]=void 0;var a=!0}catch{}var u=Xa.call(t);return a&&(n?t[Xt]=r:delete t[Xt]),u}var Qa=Ja,Ga=Object.prototype,to=Ga.toString;function eo(t){return to.call(t)}var no=eo,ro="[object Null]",io="[object Undefined]",er=ut?ut.toStringTag:void 0;function ao(t){return t==null?t===void 0?io:ro:er&&er in Object(t)?Qa(t):no(t)}var Et=ao;function oo(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var At=oo,so="[object AsyncFunction]",uo="[object Function]",fo="[object GeneratorFunction]",co="[object Proxy]";function lo(t){if(!At(t))return!1;var n=Et(t);return n==uo||n==fo||n==so||n==co}var oe=lo,ho=pt["__core-js_shared__"],We=ho,nr=function(){var t=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vo(t){return!!nr&&nr in t}var po=vo,go=Function.prototype,yo=go.toString;function _o(t){if(t!=null){try{return yo.call(t)}catch{}try{return t+""}catch{}}return""}var Tt=_o,mo=/[\\^$.*+?()[\]{}|]/g,wo=/^\[object .+?Constructor\]$/,bo=Function.prototype,xo=Object.prototype,Eo=bo.toString,Ao=xo.hasOwnProperty,To=RegExp("^"+Eo.call(Ao).replace(mo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mo(t){if(!At(t)||po(t))return!1;var n=oe(t)?To:wo;return n.test(Tt(t))}var So=Mo;function Co(t,n){return t==null?void 0:t[n]}var Po=Co;function Oo(t,n){var r=Po(t,n);return So(r)?r:void 0}var Mt=Oo,Io=Mt(pt,"Map"),Jt=Io,$o=Mt(Object,"create"),Qt=$o;function No(){this.__data__=Qt?Qt(null):{},this.size=0}var Lo=No;function Do(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var Ro=Do,ko="__lodash_hash_undefined__",Fo=Object.prototype,zo=Fo.hasOwnProperty;function Uo(t){var n=this.__data__;if(Qt){var r=n[t];return r===ko?void 0:r}return zo.call(n,t)?n[t]:void 0}var jo=Uo,Vo=Object.prototype,Bo=Vo.hasOwnProperty;function qo(t){var n=this.__data__;return Qt?n[t]!==void 0:Bo.call(n,t)}var Ho=qo,Ko="__lodash_hash_undefined__";function Wo(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Qt&&n===void 0?Ko:n,this}var Yo=Wo;function jt(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}jt.prototype.clear=Lo,jt.prototype.delete=Ro,jt.prototype.get=jo,jt.prototype.has=Ho,jt.prototype.set=Yo;var rr=jt;function Zo(){this.size=0,this.__data__={hash:new rr,map:new(Jt||ht),string:new rr}}var Xo=Zo;function Jo(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}var Qo=Jo;function Go(t,n){var r=t.__data__;return Qo(n)?r[typeof n=="string"?"string":"hash"]:r.map}var se=Go;function ts(t){var n=se(this,t).delete(t);return this.size-=n?1:0,n}var es=ts;function ns(t){return se(this,t).get(t)}var rs=ns;function is(t){return se(this,t).has(t)}var as=is;function os(t,n){var r=se(this,t),a=r.size;return r.set(t,n),this.size+=r.size==a?0:1,this}var ss=os;function Vt(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var a=t[n];this.set(a[0],a[1])}}Vt.prototype.clear=Xo,Vt.prototype.delete=es,Vt.prototype.get=rs,Vt.prototype.has=as,Vt.prototype.set=ss;var ue=Vt,us=200;function fs(t,n){var r=this.__data__;if(r instanceof ht){var a=r.__data__;if(!Jt||a.length<us-1)return a.push([t,n]),this.size=++r.size,this;r=this.__data__=new ue(a)}return r.set(t,n),this.size=r.size,this}var cs=fs;function Bt(t){var n=this.__data__=new ht(t);this.size=n.size}Bt.prototype.clear=Ft,Bt.prototype.delete=Ut,Bt.prototype.get=Va,Bt.prototype.has=qa,Bt.prototype.set=cs;var Gt=Bt;function ls(t,n){for(var r=-1,a=t==null?0:t.length;++r<a&&n(t[r],r,t)!==!1;);return t}var Ye=ls,hs=function(){try{var t=Mt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),fe=hs;function ds(t,n,r){n=="__proto__"&&fe?fe(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}var ir=ds,vs=Object.prototype,ps=vs.hasOwnProperty;function gs(t,n,r){var a=t[n];(!(ps.call(t,n)&&Y(a,r))||r===void 0&&!(n in t))&&ir(t,n,r)}var ar=gs;function ys(t,n,r,a){var u=!r;r||(r={});for(var c=-1,d=n.length;++c<d;){var v=n[c],m=a?a(r[v],t[v],v,r,t):void 0;m===void 0&&(m=t[v]),u?ir(r,v,m):ar(r,v,m)}return r}var ce=ys;function _s(t,n){for(var r=-1,a=Array(t);++r<t;)a[r]=n(r);return a}var ms=_s;function ws(t){return t!=null&&typeof t=="object"}var gt=ws,bs="[object Arguments]";function xs(t){return gt(t)&&Et(t)==bs}var or=xs,sr=Object.prototype,Es=sr.hasOwnProperty,As=sr.propertyIsEnumerable,Ts=or(function(){return arguments}())?or:function(t){return gt(t)&&Es.call(t,"callee")&&!As.call(t,"callee")},le=Ts,Ms=Array.isArray,et=Ms;function Ss(){return!1}var Cs=Ss,qt=P(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,u=a&&a.exports===r,c=u?pt.Buffer:void 0,d=c?c.isBuffer:void 0,v=d||Cs;t.exports=v}),Ps=9007199254740991,Os=/^(?:0|[1-9]\d*)$/;function Is(t,n){var r=typeof t;return n=n??Ps,!!n&&(r=="number"||r!="symbol"&&Os.test(t))&&t>-1&&t%1==0&&t<n}var ur=Is,$s=9007199254740991;function Ns(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$s}var Ze=Ns,Ls="[object Arguments]",Ds="[object Array]",Rs="[object Boolean]",ks="[object Date]",Fs="[object Error]",zs="[object Function]",Us="[object Map]",js="[object Number]",Vs="[object Object]",Bs="[object RegExp]",qs="[object Set]",Hs="[object String]",Ks="[object WeakMap]",Ws="[object ArrayBuffer]",Ys="[object DataView]",Zs="[object Float32Array]",Xs="[object Float64Array]",Js="[object Int8Array]",Qs="[object Int16Array]",Gs="[object Int32Array]",tu="[object Uint8Array]",eu="[object Uint8ClampedArray]",nu="[object Uint16Array]",ru="[object Uint32Array]",X={};X[Zs]=X[Xs]=X[Js]=X[Qs]=X[Gs]=X[tu]=X[eu]=X[nu]=X[ru]=!0,X[Ls]=X[Ds]=X[Ws]=X[Rs]=X[Ys]=X[ks]=X[Fs]=X[zs]=X[Us]=X[js]=X[Vs]=X[Bs]=X[qs]=X[Hs]=X[Ks]=!1;function iu(t){return gt(t)&&Ze(t.length)&&!!X[Et(t)]}var au=iu;function ou(t){return function(n){return t(n)}}var Xe=ou,Ht=P(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,u=a&&a.exports===r,c=u&&Gn.process,d=function(){try{var v=a&&a.require&&a.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();t.exports=d}),fr=Ht&&Ht.isTypedArray,su=fr?Xe(fr):au,he=su,uu=Object.prototype,fu=uu.hasOwnProperty;function cu(t,n){var r=et(t),a=!r&&le(t),u=!r&&!a&&qt(t),c=!r&&!a&&!u&&he(t),d=r||a||u||c,v=d?ms(t.length,String):[],m=v.length;for(var w in t)(n||fu.call(t,w))&&!(d&&(w=="length"||u&&(w=="offset"||w=="parent")||c&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||ur(w,m)))&&v.push(w);return v}var cr=cu,lu=Object.prototype;function hu(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||lu;return t===r}var de=hu;function du(t,n){return function(r){return t(n(r))}}var lr=du,vu=lr(Object.keys,Object),pu=vu,gu=Object.prototype,yu=gu.hasOwnProperty;function _u(t){if(!de(t))return pu(t);var n=[];for(var r in Object(t))yu.call(t,r)&&r!="constructor"&&n.push(r);return n}var Je=_u;function mu(t){return t!=null&&Ze(t.length)&&!oe(t)}var St=mu;function wu(t){return St(t)?cr(t):Je(t)}var Ct=wu;function bu(t,n){return t&&ce(n,Ct(n),t)}var xu=bu;function Eu(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}var Au=Eu,Tu=Object.prototype,Mu=Tu.hasOwnProperty;function Su(t){if(!At(t))return Au(t);var n=de(t),r=[];for(var a in t)a=="constructor"&&(n||!Mu.call(t,a))||r.push(a);return r}var Cu=Su;function Pu(t){return St(t)?cr(t,!0):Cu(t)}var Qe=Pu;function Ou(t,n){return t&&ce(n,Qe(n),t)}var Iu=Ou,$u=P(function(t,n){var r=n&&!n.nodeType&&n,a=r&&!0&&t&&!t.nodeType&&t,u=a&&a.exports===r,c=u?pt.Buffer:void 0,d=c?c.allocUnsafe:void 0;function v(m,w){if(w)return m.slice();var p=m.length,y=d?d(p):new m.constructor(p);return m.copy(y),y}t.exports=v});function Nu(t,n){var r=-1,a=t.length;for(n||(n=Array(a));++r<a;)n[r]=t[r];return n}var Lu=Nu;function Du(t,n){for(var r=-1,a=t==null?0:t.length,u=0,c=[];++r<a;){var d=t[r];n(d,r,t)&&(c[u++]=d)}return c}var hr=Du;function Ru(){return[]}var dr=Ru,ku=Object.prototype,Fu=ku.propertyIsEnumerable,vr=Object.getOwnPropertySymbols,zu=vr?function(t){return t==null?[]:(t=Object(t),hr(vr(t),function(n){return Fu.call(t,n)}))}:dr,Ge=zu;function Uu(t,n){return ce(t,Ge(t),n)}var ju=Uu;function Vu(t,n){for(var r=-1,a=n.length,u=t.length;++r<a;)t[u+r]=n[r];return t}var tn=Vu,Bu=lr(Object.getPrototypeOf,Object),en=Bu,qu=Object.getOwnPropertySymbols,Hu=qu?function(t){for(var n=[];t;)tn(n,Ge(t)),t=en(t);return n}:dr,pr=Hu;function Ku(t,n){return ce(t,pr(t),n)}var Wu=Ku;function Yu(t,n,r){var a=n(t);return et(t)?a:tn(a,r(t))}var gr=Yu;function Zu(t){return gr(t,Ct,Ge)}var nn=Zu;function Xu(t){return gr(t,Qe,pr)}var Ju=Xu,Qu=Mt(pt,"DataView"),rn=Qu,Gu=Mt(pt,"Promise"),an=Gu,tf=Mt(pt,"Set"),Kt=tf,ef=Mt(pt,"WeakMap"),on=ef,yr="[object Map]",nf="[object Object]",_r="[object Promise]",mr="[object Set]",wr="[object WeakMap]",br="[object DataView]",rf=Tt(rn),af=Tt(Jt),of=Tt(an),sf=Tt(Kt),uf=Tt(on),Pt=Et;(rn&&Pt(new rn(new ArrayBuffer(1)))!=br||Jt&&Pt(new Jt)!=yr||an&&Pt(an.resolve())!=_r||Kt&&Pt(new Kt)!=mr||on&&Pt(new on)!=wr)&&(Pt=function(t){var n=Et(t),r=n==nf?t.constructor:void 0,a=r?Tt(r):"";if(a)switch(a){case rf:return br;case af:return yr;case of:return _r;case sf:return mr;case uf:return wr}return n});var Ot=Pt,ff=Object.prototype,cf=ff.hasOwnProperty;function lf(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&cf.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var hf=lf,df=pt.Uint8Array,ve=df;function vf(t){var n=new t.constructor(t.byteLength);return new ve(n).set(new ve(t)),n}var sn=vf;function pf(t,n){var r=n?sn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var gf=pf,yf=/\w*$/;function _f(t){var n=new t.constructor(t.source,yf.exec(t));return n.lastIndex=t.lastIndex,n}var mf=_f,xr=ut?ut.prototype:void 0,Er=xr?xr.valueOf:void 0;function wf(t){return Er?Object(Er.call(t)):{}}var bf=wf;function xf(t,n){var r=n?sn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Ef=xf,Af="[object Boolean]",Tf="[object Date]",Mf="[object Map]",Sf="[object Number]",Cf="[object RegExp]",Pf="[object Set]",Of="[object String]",If="[object Symbol]",$f="[object ArrayBuffer]",Nf="[object DataView]",Lf="[object Float32Array]",Df="[object Float64Array]",Rf="[object Int8Array]",kf="[object Int16Array]",Ff="[object Int32Array]",zf="[object Uint8Array]",Uf="[object Uint8ClampedArray]",jf="[object Uint16Array]",Vf="[object Uint32Array]";function Bf(t,n,r){var a=t.constructor;switch(n){case $f:return sn(t);case Af:case Tf:return new a(+t);case Nf:return gf(t,r);case Lf:case Df:case Rf:case kf:case Ff:case zf:case Uf:case jf:case Vf:return Ef(t,r);case Mf:return new a;case Sf:case Of:return new a(t);case Cf:return mf(t);case Pf:return new a;case If:return bf(t)}}var qf=Bf,Ar=Object.create,Hf=function(){function t(){}return function(n){if(!At(n))return{};if(Ar)return Ar(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}(),Tr=Hf;function Kf(t){return typeof t.constructor=="function"&&!de(t)?Tr(en(t)):{}}var Wf=Kf,Yf="[object Map]";function Zf(t){return gt(t)&&Ot(t)==Yf}var Xf=Zf,Mr=Ht&&Ht.isMap,Jf=Mr?Xe(Mr):Xf,Qf=Jf,Gf="[object Set]";function tc(t){return gt(t)&&Ot(t)==Gf}var ec=tc,Sr=Ht&&Ht.isSet,nc=Sr?Xe(Sr):ec,rc=nc,ic=1,ac=2,oc=4,Cr="[object Arguments]",sc="[object Array]",uc="[object Boolean]",fc="[object Date]",cc="[object Error]",Pr="[object Function]",lc="[object GeneratorFunction]",hc="[object Map]",dc="[object Number]",Or="[object Object]",vc="[object RegExp]",pc="[object Set]",gc="[object String]",yc="[object Symbol]",_c="[object WeakMap]",mc="[object ArrayBuffer]",wc="[object DataView]",bc="[object Float32Array]",xc="[object Float64Array]",Ec="[object Int8Array]",Ac="[object Int16Array]",Tc="[object Int32Array]",Mc="[object Uint8Array]",Sc="[object Uint8ClampedArray]",Cc="[object Uint16Array]",Pc="[object Uint32Array]",K={};K[Cr]=K[sc]=K[mc]=K[wc]=K[uc]=K[fc]=K[bc]=K[xc]=K[Ec]=K[Ac]=K[Tc]=K[hc]=K[dc]=K[Or]=K[vc]=K[pc]=K[gc]=K[yc]=K[Mc]=K[Sc]=K[Cc]=K[Pc]=!0,K[cc]=K[Pr]=K[_c]=!1;function pe(t,n,r,a,u,c){var d,v=n&ic,m=n&ac,w=n&oc;if(r&&(d=u?r(t,a,u,c):r(t)),d!==void 0)return d;if(!At(t))return t;var p=et(t);if(p){if(d=hf(t),!v)return Lu(t,d)}else{var y=Ot(t),x=y==Pr||y==lc;if(qt(t))return $u(t,v);if(y==Or||y==Cr||x&&!u){if(d=m||x?{}:Wf(t),!v)return m?Wu(t,Iu(d,t)):ju(t,xu(d,t))}else{if(!K[y])return u?t:{};d=qf(t,y,v)}}c||(c=new Gt);var E=c.get(t);if(E)return E;c.set(t,d),rc(t)?t.forEach(function(R){d.add(pe(R,n,r,R,t,c))}):Qf(t)&&t.forEach(function(R,M){d.set(M,pe(R,n,r,M,t,c))});var $=w?m?Ju:nn:m?Qe:Ct,N=p?void 0:$(t);return Ye(N||t,function(R,M){N&&(M=R,R=t[M]),ar(d,M,pe(R,n,r,M,t,c))}),d}var Oc=pe,Ic=4;function $c(t){return Oc(t,Ic)}var Nc=$c;function Lc(t){return function(){return t}}var Ir=Lc;function Dc(t){return function(n,r,a){for(var u=-1,c=Object(n),d=a(n),v=d.length;v--;){var m=d[t?v:++u];if(r(c[m],m,c)===!1)break}return n}}var Rc=Dc,kc=Rc(),Fc=kc;function zc(t,n){return t&&Fc(t,n,Ct)}var $r=zc;function Uc(t,n){return function(r,a){if(r==null)return r;if(!St(r))return t(r,a);for(var u=r.length,c=n?u:-1,d=Object(r);(n?c--:++c<u)&&a(d[c],c,d)!==!1;);return r}}var jc=Uc,Vc=jc($r),ge=Vc;function Bc(t){return t}var ye=Bc;function qc(t){return typeof t=="function"?t:ye}var Hc=qc;function Kc(t,n){var r=et(t)?Ye:ge;return r(t,Hc(n))}var Wc=Kc,Yc=Wc;function Zc(t,n){var r=[];return ge(t,function(a,u,c){n(a,u,c)&&r.push(a)}),r}var Xc=Zc,Jc="__lodash_hash_undefined__";function Qc(t){return this.__data__.set(t,Jc),this}var Gc=Qc;function tl(t){return this.__data__.has(t)}var el=tl;function _e(t){var n=-1,r=t==null?0:t.length;for(this.__data__=new ue;++n<r;)this.add(t[n])}_e.prototype.add=_e.prototype.push=Gc,_e.prototype.has=el;var Nr=_e;function nl(t,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(t[r],r,t))return!0;return!1}var rl=nl;function il(t,n){return t.has(n)}var Lr=il,al=1,ol=2;function sl(t,n,r,a,u,c){var d=r&al,v=t.length,m=n.length;if(v!=m&&!(d&&m>v))return!1;var w=c.get(t),p=c.get(n);if(w&&p)return w==n&&p==t;var y=-1,x=!0,E=r&ol?new Nr:void 0;for(c.set(t,n),c.set(n,t);++y<v;){var $=t[y],N=n[y];if(a)var R=d?a(N,$,y,n,t,c):a($,N,y,t,n,c);if(R!==void 0){if(R)continue;x=!1;break}if(E){if(!rl(n,function(M,F){if(!Lr(E,F)&&($===M||u($,M,r,a,c)))return E.push(F)})){x=!1;break}}else if(!($===N||u($,N,r,a,c))){x=!1;break}}return c.delete(t),c.delete(n),x}var Dr=sl;function ul(t){var n=-1,r=Array(t.size);return t.forEach(function(a,u){r[++n]=[u,a]}),r}var fl=ul;function cl(t){var n=-1,r=Array(t.size);return t.forEach(function(a){r[++n]=a}),r}var un=cl,ll=1,hl=2,dl="[object Boolean]",vl="[object Date]",pl="[object Error]",gl="[object Map]",yl="[object Number]",_l="[object RegExp]",ml="[object Set]",wl="[object String]",bl="[object Symbol]",xl="[object ArrayBuffer]",El="[object DataView]",Rr=ut?ut.prototype:void 0,fn=Rr?Rr.valueOf:void 0;function Al(t,n,r,a,u,c,d){switch(r){case El:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case xl:return!(t.byteLength!=n.byteLength||!c(new ve(t),new ve(n)));case dl:case vl:case yl:return Y(+t,+n);case pl:return t.name==n.name&&t.message==n.message;case _l:case wl:return t==n+"";case gl:var v=fl;case ml:var m=a&ll;if(v||(v=un),t.size!=n.size&&!m)return!1;var w=d.get(t);if(w)return w==n;a|=hl,d.set(t,n);var p=Dr(v(t),v(n),a,u,c,d);return d.delete(t),p;case bl:if(fn)return fn.call(t)==fn.call(n)}return!1}var Tl=Al,Ml=1,Sl=Object.prototype,Cl=Sl.hasOwnProperty;function Pl(t,n,r,a,u,c){var d=r&Ml,v=nn(t),m=v.length,w=nn(n),p=w.length;if(m!=p&&!d)return!1;for(var y=m;y--;){var x=v[y];if(!(d?x in n:Cl.call(n,x)))return!1}var E=c.get(t),$=c.get(n);if(E&&$)return E==n&&$==t;var N=!0;c.set(t,n),c.set(n,t);for(var R=d;++y<m;){x=v[y];var M=t[x],F=n[x];if(a)var A=d?a(F,M,x,n,t,c):a(M,F,x,t,n,c);if(!(A===void 0?M===F||u(M,F,r,a,c):A)){N=!1;break}R||(R=x=="constructor")}if(N&&!R){var L=t.constructor,O=n.constructor;L!=O&&"constructor"in t&&"constructor"in n&&!(typeof L=="function"&&L instanceof L&&typeof O=="function"&&O instanceof O)&&(N=!1)}return c.delete(t),c.delete(n),N}var Ol=Pl,Il=1,kr="[object Arguments]",Fr="[object Array]",me="[object Object]",$l=Object.prototype,zr=$l.hasOwnProperty;function Nl(t,n,r,a,u,c){var d=et(t),v=et(n),m=d?Fr:Ot(t),w=v?Fr:Ot(n);m=m==kr?me:m,w=w==kr?me:w;var p=m==me,y=w==me,x=m==w;if(x&&qt(t)){if(!qt(n))return!1;d=!0,p=!1}if(x&&!p)return c||(c=new Gt),d||he(t)?Dr(t,n,r,a,u,c):Tl(t,n,m,r,a,u,c);if(!(r&Il)){var E=p&&zr.call(t,"__wrapped__"),$=y&&zr.call(n,"__wrapped__");if(E||$){var N=E?t.value():t,R=$?n.value():n;return c||(c=new Gt),u(N,R,r,a,c)}}return x?(c||(c=new Gt),Ol(t,n,r,a,u,c)):!1}var Ll=Nl;function Ur(t,n,r,a,u){return t===n?!0:t==null||n==null||!gt(t)&&!gt(n)?t!==t&&n!==n:Ll(t,n,r,a,Ur,u)}var jr=Ur,Dl=1,Rl=2;function kl(t,n,r,a){var u=r.length,c=u,d=!a;if(t==null)return!c;for(t=Object(t);u--;){var v=r[u];if(d&&v[2]?v[1]!==t[v[0]]:!(v[0]in t))return!1}for(;++u<c;){v=r[u];var m=v[0],w=t[m],p=v[1];if(d&&v[2]){if(w===void 0&&!(m in t))return!1}else{var y=new Gt;if(a)var x=a(w,p,m,t,n,y);if(!(x===void 0?jr(p,w,Dl|Rl,a,y):x))return!1}}return!0}var Fl=kl;function zl(t){return t===t&&!At(t)}var Vr=zl;function Ul(t){for(var n=Ct(t),r=n.length;r--;){var a=n[r],u=t[a];n[r]=[a,u,Vr(u)]}return n}var jl=Ul;function Vl(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}var Br=Vl;function Bl(t){var n=jl(t);return n.length==1&&n[0][2]?Br(n[0][0],n[0][1]):function(r){return r===t||Fl(r,t,n)}}var ql=Bl,Hl="[object Symbol]";function Kl(t){return typeof t=="symbol"||gt(t)&&Et(t)==Hl}var cn=Kl,Wl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yl=/^\w*$/;function Zl(t,n){if(et(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||cn(t)?!0:Yl.test(t)||!Wl.test(t)||n!=null&&t in Object(n)}var ln=Zl,Xl="Expected a function";function hn(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(Xl);var r=function(){var a=arguments,u=n?n.apply(this,a):a[0],c=r.cache;if(c.has(u))return c.get(u);var d=t.apply(this,a);return r.cache=c.set(u,d)||c,d};return r.cache=new(hn.Cache||ue),r}hn.Cache=ue;var Jl=hn,Ql=500;function Gl(t){var n=Jl(t,function(a){return r.size===Ql&&r.clear(),a}),r=n.cache;return n}var th=Gl,eh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nh=/\\(\\)?/g,rh=th(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(eh,function(r,a,u,c){n.push(u?c.replace(nh,"$1"):a||r)}),n}),ih=rh;function ah(t,n){for(var r=-1,a=t==null?0:t.length,u=Array(a);++r<a;)u[r]=n(t[r],r,t);return u}var dn=ah,oh=1/0,qr=ut?ut.prototype:void 0,Hr=qr?qr.toString:void 0;function Kr(t){if(typeof t=="string")return t;if(et(t))return dn(t,Kr)+"";if(cn(t))return Hr?Hr.call(t):"";var n=t+"";return n=="0"&&1/t==-oh?"-0":n}var sh=Kr;function uh(t){return t==null?"":sh(t)}var fh=uh;function ch(t,n){return et(t)?t:ln(t,n)?[t]:ih(fh(t))}var Wr=ch,lh=1/0;function hh(t){if(typeof t=="string"||cn(t))return t;var n=t+"";return n=="0"&&1/t==-lh?"-0":n}var we=hh;function dh(t,n){n=Wr(n,t);for(var r=0,a=n.length;t!=null&&r<a;)t=t[we(n[r++])];return r&&r==a?t:void 0}var Yr=dh;function vh(t,n,r){var a=t==null?void 0:Yr(t,n);return a===void 0?r:a}var ph=vh;function gh(t,n){return t!=null&&n in Object(t)}var yh=gh;function _h(t,n,r){n=Wr(n,t);for(var a=-1,u=n.length,c=!1;++a<u;){var d=we(n[a]);if(!(c=t!=null&&r(t,d)))break;t=t[d]}return c||++a!=u?c:(u=t==null?0:t.length,!!u&&Ze(u)&&ur(d,u)&&(et(t)||le(t)))}var Zr=_h;function mh(t,n){return t!=null&&Zr(t,n,yh)}var wh=mh,bh=1,xh=2;function Eh(t,n){return ln(t)&&Vr(n)?Br(we(t),n):function(r){var a=ph(r,t);return a===void 0&&a===n?wh(r,t):jr(n,a,bh|xh)}}var Ah=Eh;function Th(t){return function(n){return n==null?void 0:n[t]}}var Xr=Th;function Mh(t){return function(n){return Yr(n,t)}}var Sh=Mh;function Ch(t){return ln(t)?Xr(we(t)):Sh(t)}var Ph=Ch;function Oh(t){return typeof t=="function"?t:t==null?ye:typeof t=="object"?et(t)?Ah(t[0],t[1]):ql(t):Ph(t)}var be=Oh;function Ih(t,n){var r=et(t)?hr:Xc;return r(t,be(n))}var $h=Ih,Nh=Object.prototype,Lh=Nh.hasOwnProperty;function Dh(t,n){return t!=null&&Lh.call(t,n)}var Rh=Dh;function kh(t,n){return t!=null&&Zr(t,n,Rh)}var Fh=kh,zh="[object Map]",Uh="[object Set]",jh=Object.prototype,Vh=jh.hasOwnProperty;function Bh(t){if(t==null)return!0;if(St(t)&&(et(t)||typeof t=="string"||typeof t.splice=="function"||qt(t)||he(t)||le(t)))return!t.length;var n=Ot(t);if(n==zh||n==Uh)return!t.size;if(de(t))return!Je(t).length;for(var r in t)if(Vh.call(t,r))return!1;return!0}var qh=Bh;function Hh(t){return t===void 0}var Kh=Hh;function Wh(t,n){var r=-1,a=St(t)?Array(t.length):[];return ge(t,function(u,c,d){a[++r]=n(u,c,d)}),a}var Yh=Wh;function Zh(t,n){var r=et(t)?dn:Yh;return r(t,be(n))}var Xh=Zh;function Jh(t,n,r,a){var u=-1,c=t==null?0:t.length;for(a&&c&&(r=t[++u]);++u<c;)r=n(r,t[u],u,t);return r}var Qh=Jh;function Gh(t,n,r,a,u){return u(t,function(c,d,v){r=a?(a=!1,c):n(r,c,d,v)}),r}var td=Gh;function ed(t,n,r){var a=et(t)?Qh:td,u=arguments.length<3;return a(t,be(n),r,u,ge)}var nd=ed,rd="[object String]";function id(t){return typeof t=="string"||!et(t)&&gt(t)&&Et(t)==rd}var ad=id,od=Xr("length"),sd=od,ud="\\ud800-\\udfff",fd="\\u0300-\\u036f",cd="\\ufe20-\\ufe2f",ld="\\u20d0-\\u20ff",hd=fd+cd+ld,dd="\\ufe0e\\ufe0f",vd="\\u200d",pd=RegExp("["+vd+ud+hd+dd+"]");function gd(t){return pd.test(t)}var yd=gd,Jr="\\ud800-\\udfff",_d="\\u0300-\\u036f",md="\\ufe20-\\ufe2f",wd="\\u20d0-\\u20ff",bd=_d+md+wd,xd="\\ufe0e\\ufe0f",Ed="["+Jr+"]",vn="["+bd+"]",pn="\\ud83c[\\udffb-\\udfff]",Ad="(?:"+vn+"|"+pn+")",Qr="[^"+Jr+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",Td="\\u200d",ei=Ad+"?",ni="["+xd+"]?",Md="(?:"+Td+"(?:"+[Qr,Gr,ti].join("|")+")"+ni+ei+")*",Sd=ni+ei+Md,Cd="(?:"+[Qr+vn+"?",vn,Gr,ti,Ed].join("|")+")",ri=RegExp(pn+"(?="+pn+")|"+Cd+Sd,"g");function Pd(t){for(var n=ri.lastIndex=0;ri.test(t);)++n;return n}var Od=Pd;function Id(t){return yd(t)?Od(t):sd(t)}var $d=Id,Nd="[object Map]",Ld="[object Set]";function Dd(t){if(t==null)return 0;if(St(t))return ad(t)?$d(t):t.length;var n=Ot(t);return n==Nd||n==Ld?t.size:Je(t).length}var Rd=Dd;function kd(t,n,r){var a=et(t),u=a||qt(t)||he(t);if(n=be(n),r==null){var c=t&&t.constructor;u?r=a?new c:[]:At(t)?r=oe(c)?Tr(en(t)):{}:r={}}return(u?Ye:$r)(t,function(d,v,m){return n(r,d,v,m)}),r}var Fd=kd,ii=ut?ut.isConcatSpreadable:void 0;function zd(t){return et(t)||le(t)||!!(ii&&t&&t[ii])}var Ud=zd;function ai(t,n,r,a,u){var c=-1,d=t.length;for(r||(r=Ud),u||(u=[]);++c<d;){var v=t[c];n>0&&r(v)?n>1?ai(v,n-1,r,a,u):tn(u,v):a||(u[u.length]=v)}return u}var jd=ai;function Vd(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}var Bd=Vd,oi=Math.max;function qd(t,n,r){return n=oi(n===void 0?t.length-1:n,0),function(){for(var a=arguments,u=-1,c=oi(a.length-n,0),d=Array(c);++u<c;)d[u]=a[n+u];u=-1;for(var v=Array(n+1);++u<n;)v[u]=a[u];return v[n]=r(d),Bd(t,this,v)}}var Hd=qd,Kd=fe?function(t,n){return fe(t,"toString",{configurable:!0,enumerable:!1,value:Ir(n),writable:!0})}:ye,Wd=Kd,Yd=800,Zd=16,Xd=Date.now;function Jd(t){var n=0,r=0;return function(){var a=Xd(),u=Zd-(a-r);if(r=a,u>0){if(++n>=Yd)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}var Qd=Jd,Gd=Qd(Wd),tv=Gd;function ev(t,n){return tv(Hd(t,n,ye),t+"")}var nv=ev;function rv(t,n,r,a){for(var u=t.length,c=r+(a?1:-1);a?c--:++c<u;)if(n(t[c],c,t))return c;return-1}var iv=rv;function av(t){return t!==t}var ov=av;function sv(t,n,r){for(var a=r-1,u=t.length;++a<u;)if(t[a]===n)return a;return-1}var uv=sv;function fv(t,n,r){return n===n?uv(t,n,r):iv(t,ov,r)}var cv=fv;function lv(t,n){var r=t==null?0:t.length;return!!r&&cv(t,n,0)>-1}var hv=lv;function dv(t,n,r){for(var a=-1,u=t==null?0:t.length;++a<u;)if(r(n,t[a]))return!0;return!1}var vv=dv;function pv(){}var gv=pv,yv=1/0,_v=Kt&&1/un(new Kt([,-0]))[1]==yv?function(t){return new Kt(t)}:gv,mv=_v,wv=200;function bv(t,n,r){var a=-1,u=hv,c=t.length,d=!0,v=[],m=v;if(r)d=!1,u=vv;else if(c>=wv){var w=n?null:mv(t);if(w)return un(w);d=!1,u=Lr,m=new Nr}else m=n?[]:v;t:for(;++a<c;){var p=t[a],y=n?n(p):p;if(p=r||p!==0?p:0,d&&y===y){for(var x=m.length;x--;)if(m[x]===y)continue t;n&&m.push(y),v.push(p)}else u(m,y,r)||(m!==v&&m.push(y),v.push(p))}return v}var xv=bv;function Ev(t){return gt(t)&&St(t)}var Av=Ev,Tv=nv(function(t){return xv(jd(t,1,Av,!0))}),Mv=Tv;function Sv(t,n){return dn(n,function(r){return t[r]})}var Cv=Sv;function Pv(t){return t==null?[]:Cv(t,Ct(t))}var Ov=Pv,xe;if(typeof S=="function")try{xe={clone:Nc,constant:Ir,each:Yc,filter:$h,has:Fh,isArray:et,isEmpty:qh,isFunction:oe,isUndefined:Kh,keys:Ct,map:Xh,reduce:nd,size:Rd,transform:Fd,union:Mv,values:Ov}}catch{}xe||(xe=window._);var I=xe,gn=V,Iv="\0",It="\0",si="";function V(t){this._isDirected=I.has(t,"directed")?t.directed:!0,this._isMultigraph=I.has(t,"multigraph")?t.multigraph:!1,this._isCompound=I.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=I.constant(void 0),this._defaultEdgeLabelFn=I.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[It]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}V.prototype._nodeCount=0,V.prototype._edgeCount=0,V.prototype.isDirected=function(){return this._isDirected},V.prototype.isMultigraph=function(){return this._isMultigraph},V.prototype.isCompound=function(){return this._isCompound},V.prototype.setGraph=function(t){return this._label=t,this},V.prototype.graph=function(){return this._label},V.prototype.setDefaultNodeLabel=function(t){return I.isFunction(t)||(t=I.constant(t)),this._defaultNodeLabelFn=t,this},V.prototype.nodeCount=function(){return this._nodeCount},V.prototype.nodes=function(){return I.keys(this._nodes)},V.prototype.sources=function(){var t=this;return I.filter(this.nodes(),function(n){return I.isEmpty(t._in[n])})},V.prototype.sinks=function(){var t=this;return I.filter(this.nodes(),function(n){return I.isEmpty(t._out[n])})},V.prototype.setNodes=function(t,n){var r=arguments,a=this;return I.each(t,function(u){r.length>1?a.setNode(u,n):a.setNode(u)}),this},V.prototype.setNode=function(t,n){return I.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=It,this._children[t]={},this._children[It][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},V.prototype.node=function(t){return this._nodes[t]},V.prototype.hasNode=function(t){return I.has(this._nodes,t)},V.prototype.removeNode=function(t){var n=this;if(I.has(this._nodes,t)){var r=function(a){n.removeEdge(n._edgeObjs[a])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],I.each(this.children(t),function(a){n.setParent(a)}),delete this._children[t]),I.each(I.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],I.each(I.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},V.prototype.setParent=function(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(I.isUndefined(n))n=It;else{n+="";for(var r=n;!I.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this},V.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},V.prototype.parent=function(t){if(this._isCompound){var n=this._parent[t];if(n!==It)return n}},V.prototype.children=function(t){if(I.isUndefined(t)&&(t=It),this._isCompound){var n=this._children[t];if(n)return I.keys(n)}else{if(t===It)return this.nodes();if(this.hasNode(t))return[]}},V.prototype.predecessors=function(t){var n=this._preds[t];if(n)return I.keys(n)},V.prototype.successors=function(t){var n=this._sucs[t];if(n)return I.keys(n)},V.prototype.neighbors=function(t){var n=this.predecessors(t);if(n)return I.union(n,this.successors(t))},V.prototype.isLeaf=function(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0},V.prototype.filterNodes=function(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;I.each(this._nodes,function(c,d){t(d)&&n.setNode(d,c)}),I.each(this._edgeObjs,function(c){n.hasNode(c.v)&&n.hasNode(c.w)&&n.setEdge(c,r.edge(c))});var a={};function u(c){var d=r.parent(c);return d===void 0||n.hasNode(d)?(a[c]=d,d):d in a?a[d]:u(d)}return this._isCompound&&I.each(n.nodes(),function(c){n.setParent(c,u(c))}),n},V.prototype.setDefaultEdgeLabel=function(t){return I.isFunction(t)||(t=I.constant(t)),this._defaultEdgeLabelFn=t,this},V.prototype.edgeCount=function(){return this._edgeCount},V.prototype.edges=function(){return I.values(this._edgeObjs)},V.prototype.setPath=function(t,n){var r=this,a=arguments;return I.reduce(t,function(u,c){return a.length>1?r.setEdge(u,c,n):r.setEdge(u,c),c}),this},V.prototype.setEdge=function(){var t,n,r,a,u=!1,c=arguments[0];typeof c=="object"&&c!==null&&"v"in c?(t=c.v,n=c.w,r=c.name,arguments.length===2&&(a=arguments[1],u=!0)):(t=c,n=arguments[1],r=arguments[3],arguments.length>2&&(a=arguments[2],u=!0)),t=""+t,n=""+n,I.isUndefined(r)||(r=""+r);var d=te(this._isDirected,t,n,r);if(I.has(this._edgeLabels,d))return u&&(this._edgeLabels[d]=a),this;if(!I.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[d]=u?a:this._defaultEdgeLabelFn(t,n,r);var v=$v(this._isDirected,t,n,r);return t=v.v,n=v.w,Object.freeze(v),this._edgeObjs[d]=v,ui(this._preds[n],t),ui(this._sucs[t],n),this._in[n][d]=v,this._out[t][d]=v,this._edgeCount++,this},V.prototype.edge=function(t,n,r){var a=arguments.length===1?yn(this._isDirected,arguments[0]):te(this._isDirected,t,n,r);return this._edgeLabels[a]},V.prototype.hasEdge=function(t,n,r){var a=arguments.length===1?yn(this._isDirected,arguments[0]):te(this._isDirected,t,n,r);return I.has(this._edgeLabels,a)},V.prototype.removeEdge=function(t,n,r){var a=arguments.length===1?yn(this._isDirected,arguments[0]):te(this._isDirected,t,n,r),u=this._edgeObjs[a];return u&&(t=u.v,n=u.w,delete this._edgeLabels[a],delete this._edgeObjs[a],fi(this._preds[n],t),fi(this._sucs[t],n),delete this._in[n][a],delete this._out[t][a],this._edgeCount--),this},V.prototype.inEdges=function(t,n){var r=this._in[t];if(r){var a=I.values(r);return n?I.filter(a,function(u){return u.v===n}):a}},V.prototype.outEdges=function(t,n){var r=this._out[t];if(r){var a=I.values(r);return n?I.filter(a,function(u){return u.w===n}):a}},V.prototype.nodeEdges=function(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))};function ui(t,n){t[n]?t[n]++:t[n]=1}function fi(t,n){--t[n]||delete t[n]}function te(t,n,r,a){var u=""+n,c=""+r;if(!t&&u>c){var d=u;u=c,c=d}return u+si+c+si+(I.isUndefined(a)?Iv:a)}function $v(t,n,r,a){var u=""+n,c=""+r;if(!t&&u>c){var d=u;u=c,c=d}var v={v:u,w:c};return a&&(v.name=a),v}function yn(t,n){return te(t,n.v,n.w,n.name)}var Nv="2.1.8",ci={Graph:gn,version:Nv},Lv={write:Dv,read:Fv};function Dv(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Rv(t),edges:kv(t)};return I.isUndefined(t.graph())||(n.value=I.clone(t.graph())),n}function Rv(t){return I.map(t.nodes(),function(n){var r=t.node(n),a=t.parent(n),u={v:n};return I.isUndefined(r)||(u.value=r),I.isUndefined(a)||(u.parent=a),u})}function kv(t){return I.map(t.edges(),function(n){var r=t.edge(n),a={v:n.v,w:n.w};return I.isUndefined(n.name)||(a.name=n.name),I.isUndefined(r)||(a.value=r),a})}function Fv(t){var n=new gn(t.options).setGraph(t.value);return I.each(t.nodes,function(r){n.setNode(r.v,r.value),r.parent&&n.setParent(r.v,r.parent)}),I.each(t.edges,function(r){n.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),n}var zv=Uv;function Uv(t){var n={},r=[],a;function u(c){I.has(n,c)||(n[c]=!0,a.push(c),I.each(t.successors(c),u),I.each(t.predecessors(c),u))}return I.each(t.nodes(),function(c){a=[],u(c),a.length&&r.push(a)}),r}var li=ft;function ft(){this._arr=[],this._keyIndices={}}ft.prototype.size=function(){return this._arr.length},ft.prototype.keys=function(){return this._arr.map(function(t){return t.key})},ft.prototype.has=function(t){return I.has(this._keyIndices,t)},ft.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},ft.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ft.prototype.add=function(t,n){var r=this._keyIndices;if(t=String(t),!I.has(r,t)){var a=this._arr,u=a.length;return r[t]=u,a.push({key:t,priority:n}),this._decrease(u),!0}return!1},ft.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},ft.prototype.decrease=function(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)},ft.prototype._heapify=function(t){var n=this._arr,r=2*t,a=r+1,u=t;r<n.length&&(u=n[r].priority<n[u].priority?r:u,a<n.length&&(u=n[a].priority<n[u].priority?a:u),u!==t&&(this._swap(t,u),this._heapify(u)))},ft.prototype._decrease=function(t){for(var n=this._arr,r=n[t].priority,a;t!==0&&(a=t>>1,!(n[a].priority<r));)this._swap(t,a),t=a},ft.prototype._swap=function(t,n){var r=this._arr,a=this._keyIndices,u=r[t],c=r[n];r[t]=c,r[n]=u,a[c.key]=t,a[u.key]=n};var hi=Vv,jv=I.constant(1);function Vv(t,n,r,a){return Bv(t,String(n),r||jv,a||function(u){return t.outEdges(u)})}function Bv(t,n,r,a){var u={},c=new li,d,v,m=function(w){var p=w.v!==d?w.v:w.w,y=u[p],x=r(w),E=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+x);E<y.distance&&(y.distance=E,y.predecessor=d,c.decrease(p,E))};for(t.nodes().forEach(function(w){var p=w===n?0:Number.POSITIVE_INFINITY;u[w]={distance:p},c.add(w,p)});c.size()>0&&(d=c.removeMin(),v=u[d],v.distance!==Number.POSITIVE_INFINITY);)a(d).forEach(m);return u}var qv=Hv;function Hv(t,n,r){return I.transform(t.nodes(),function(a,u){a[u]=hi(t,u,n,r)},{})}var di=Kv;function Kv(t){var n=0,r=[],a={},u=[];function c(d){var v=a[d]={onStack:!0,lowlink:n,index:n++};if(r.push(d),t.successors(d).forEach(function(p){I.has(a,p)?a[p].onStack&&(v.lowlink=Math.min(v.lowlink,a[p].index)):(c(p),v.lowlink=Math.min(v.lowlink,a[p].lowlink))}),v.lowlink===v.index){var m=[],w;do w=r.pop(),a[w].onStack=!1,m.push(w);while(d!==w);u.push(m)}}return t.nodes().forEach(function(d){I.has(a,d)||c(d)}),u}var Wv=Yv;function Yv(t){return I.filter(di(t),function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})}var Zv=Jv,Xv=I.constant(1);function Jv(t,n,r){return Qv(t,n||Xv,r||function(a){return t.outEdges(a)})}function Qv(t,n,r){var a={},u=t.nodes();return u.forEach(function(c){a[c]={},a[c][c]={distance:0},u.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),r(c).forEach(function(d){var v=d.v===c?d.w:d.v,m=n(d);a[c][v]={distance:m,predecessor:c}})}),u.forEach(function(c){var d=a[c];u.forEach(function(v){var m=a[v];u.forEach(function(w){var p=m[c],y=d[w],x=m[w],E=p.distance+y.distance;E<x.distance&&(x.distance=E,x.predecessor=y.predecessor)})})}),a}var _n=vi;vi.CycleException=Ee;function vi(t){var n={},r={},a=[];function u(c){if(I.has(r,c))throw new Ee;I.has(n,c)||(r[c]=!0,n[c]=!0,I.each(t.predecessors(c),u),delete r[c],a.push(c))}if(I.each(t.sinks(),u),I.size(n)!==t.nodeCount())throw new Ee;return a}function Ee(){}Ee.prototype=new Error;var Gv=tp;function tp(t){try{_n(t)}catch(n){if(n instanceof _n.CycleException)return!1;throw n}return!0}var pi=ep;function ep(t,n,r){I.isArray(n)||(n=[n]);var a=(t.isDirected()?t.successors:t.neighbors).bind(t),u=[],c={};return I.each(n,function(d){if(!t.hasNode(d))throw new Error("Graph does not have node: "+d);gi(t,d,r==="post",c,a,u)}),u}function gi(t,n,r,a,u,c){I.has(a,n)||(a[n]=!0,r||c.push(n),I.each(u(n),function(d){gi(t,d,r,a,u,c)}),r&&c.push(n))}var np=rp;function rp(t,n){return pi(t,n,"post")}var ip=ap;function ap(t,n){return pi(t,n,"pre")}var op=sp;function sp(t,n){var r=new gn,a={},u=new li,c;function d(m){var w=m.v===c?m.w:m.v,p=u.priority(w);if(p!==void 0){var y=n(m);y<p&&(a[w]=c,u.decrease(w,y))}}if(t.nodeCount()===0)return r;I.each(t.nodes(),function(m){u.add(m,Number.POSITIVE_INFINITY),r.setNode(m)}),u.decrease(t.nodes()[0],0);for(var v=!1;u.size()>0;){if(c=u.removeMin(),I.has(a,c))r.setEdge(c,a[c]);else{if(v)throw new Error("Input graph is not connected: "+t);v=!0}t.nodeEdges(c).forEach(d)}return r}var up={components:zv,dijkstra:hi,dijkstraAll:qv,findCycles:Wv,floydWarshall:Zv,isAcyclic:Gv,postorder:np,preorder:ip,prim:op,tarjan:di,topsort:_n},yi={Graph:ci.Graph,json:Lv,alg:up,version:ci.version},mn=yi.Graph,fp=yi.alg;function cp(t,n){n===void 0&&(n=[]);var r=new mn({directed:!0});if(t.nodes().length===0)return r;n=lp(t,n);var a=f.map(),u,c,d,v;for(d=0;d<n.length;++d)if(u=n[d],!(!u.nodes||u.nodes.length===0)){for(c=""+d,v=0;v<u.nodes.length;++v)a.set(u.nodes[v],c);r.setNode(c,{type:u.type,nodes:u.nodes})}return t.nodes(),t.nodes().forEach(function(m){t.node(m),a.has(m)||(c=""+d++,u={type:"same",nodes:[m]},a.set(m,c),r.setNode(c,u))}),t.edges().forEach(function(m){t.edge(m);var w=a.get(m.v),p=a.get(m.w),y=r.edge(w,p)||{delta:0};w===p?(y.delta=0,r.setEdge(w,p,y)):t.node(m.v).backwards?(y.delta=Math.max(y.delta,t.node(m.w).backwards?1:0),r.setEdge(p,w,y)):(y.delta=Math.max(y.delta,t.node(m.w).backwards?0:1),r.setEdge(w,p,y))}),r}function lp(t,n){for(var r=0;r<n.length;++r)if(n[r].type==="min")return n;var a=t.sources(),u=a.length?a[0]:t.nodes()[0];return[{type:"min",nodes:[u]}].concat(n)}function hp(t,n){var r=dp(t,n);return t.edges().forEach(function(a){var u=vp(r,a.v,a.w);if(u<0){var c=t.edge(a)||{};c.reversed=!0,t.removeEdge(a),t.setEdge(a.w,a.v,c)}}),t}function dp(t,n){var r=f.set(),a=new mn({directed:!0}),u=[];if(!t.hasNode(n))throw Error("node not in graph");return wn(t,n,r,a,u),t.nodes().forEach(function(c){r.has(c)||wn(t,c,r,a,u)}),u.forEach(function(c,d){a.node(c).thread=d+1<u.length?u[d+1]:u[0]}),a}function vp(t,n,r){var a=t.node(n),u=t.node(r);if(a.depth<u.depth)for(var c=a.thread;t.node(c).depth>a.depth;){if(c===r)return 1;c=t.node(c).thread}else if(u.depth<a.depth)for(var d=u.thread;t.node(d).depth>u.depth;){if(d===n)return-1;d=t.node(d).thread}return 0}function wn(t,n,r,a,u,c){if(c===void 0&&(c=0),!r.has(n)){r.add(n),u.push(n),a.setNode(n,{depth:c});var d=t.outEdges(n).map(function(v){return v.w});d.forEach(function(v,m){r.has(v)||a.setEdge(n,v,{delta:1}),wn(t,v,r,a,u,c+1)})}}function pp(t){var n=t.sources(),r=f.set(),a=f.set();t.edges().forEach(function(c){c.v===c.w&&a.add(bn(c))}),t.nodes().forEach(function(c){t.node(c).rank=0});for(var u=function(){var c=n.shift();r.add(c);var d=t.node(c);d||t.setNode(c,d={}),d.rank=0,t.inEdges(c).forEach(function(v){var m=t.edge(v).delta===void 0?1:t.edge(v).delta;d.rank=Math.max(d.rank,t.node(v.v).rank+m)}),t.outEdges(c).forEach(function(v){a.add(bn(v))}),t.nodes().forEach(function(v){n.indexOf(v)<0&&!r.has(v)&&!t.inEdges(v).some(function(m){return!a.has(bn(m))})&&n.push(v)})};n.length>0;)u()}function bn(t){return t.v+""+t.w+""+t.name}function gp(t,n){var r=cp(t,n);r.nodeCount()!==0&&(yp(r),hp(r,"0"),pp(r),_p(r),r.nodes().forEach(function(a){var u=r.node(a);u.nodes.forEach(function(c){t.node(c).rank=u.rank})}))}function yp(t){t.sources().forEach(function(n){n!=="0"&&t.setEdge("0",n,{temp:!0,delta:0})})}function _p(t){t.edges().forEach(function(r){var a=t.edge(r);a.temp&&n(r.w)});function n(r){var a=t.node(r),u=s.min(t.outEdges(r),function(c){return t.node(c.w).rank-t.edge(c).delta});u!==void 0&&(a.rank=u)}}function mp(t,n){var r=[];if(n.length===0)return r;var a=t.sources(),u=f.map();return n.forEach(function(c,d){r.push([]),c.forEach(function(v){d===0&&a.indexOf(v)<0&&a.push(v),u.set(v,d)})}),fp.preorder(t,a).forEach(function(c){r[u.get(c)].push(c)}),r}function xn(t,n,r){return wp(t,n,r)}function wp(t,n,r){var a,u,c;n.length>r.length?(a=n,u=r):(a=r,u=n),c=u.length;var d=[];a.forEach(function(x){u.forEach(function(E,$){(t.hasEdge(x,E)||t.hasEdge(E,x))&&d.push($)})});for(var v=1;v<c;)v*=2;var m=2*v-1;v-=1;for(var w=new Array(m),p=0;p<m;p++)w[p]=0;var y=0;return d.forEach(function(x){var E=x+v;for(w[E]++;E>0;)E%2&&(y+=w[E+1]),E=Math.floor((E-1)/2),w[E]++}),y}function bp(t,n){for(var r=!0;r;){r=!1;for(var a=0;a<n.length;++a)for(var u=0;u<n[a].length-1;++u){var c=_i(t,n,a);mi(n[a],u,u+1);var d=_i(t,n,a);d<c?r=!0:mi(n[a],u,u+1)}}}function _i(t,n,r){var a=0;return r>0&&(a+=xn(t,n[r-1],n[r])),r+1<n.length&&(a+=xn(t,n[r],n[r+1])),a}function mi(t,n,r){var a=t[n];t[n]=t[r],t[r]=a}function wi(t){var n=Math.floor(t.length/2);if(t.length===0)return-1;if(t.length%2===1)return t[n];if(t.length===2)return(t[0]+t[1])/2;var r=t[n-1]-t[0],a=t[t.length-1]-t[n];return(t[n-1]*a+t[n]*r)/(r+a)}function bi(t,n,r,a,u,c){c===void 0&&(c=!1);var d=n[r],v=n[a],m=[];return v.forEach(function(w,p){t.nodeEdges(w,u).length>0&&m.push(p)}),m.length===0&&c&&d.forEach(function(w,p){t.nodeEdges(w,u).length>0&&m.push(p+.5)}),m.sort(function(w,p){return w-p}),m}function xi(t,n){for(var r=f.map(t.map(function(w,p){return[w,p]}),function(w){return w[0]}),a=1;a<t.length;++a)for(var u=a;u>0;--u){for(var c=u-1,d=n.get(t[c]),v=n.get(t[u]);(d=n.get(t[c]))===-1&&c>0;)c--;if(v===-1||d===-1||(d===v&&(d=r.get(t[c]),v=r.get(t[u])),v>=d))break;var m;m=[t[c],t[u]],t[u]=m[0],t[c]=m[1]}}function xp(t,n,r,a){if(r===void 0&&(r=1),a===void 0&&(a=!1),r>0)for(var u=function(m){var w=f.map();n[m].forEach(function(p){var y=wi(bi(t,n,m,m-1,p,a));w.set(p,y)}),xi(n[m],w)},c=1;c<n.length;++c)u(c);else for(var d=function(m){var w=f.map();n[m].forEach(function(p){var y=wi(bi(t,n,m,m+1,p,a));w.set(p,y)}),xi(n[m],w)},v=n.length-2;v>=0;--v)d(v)}function Ei(t,n){n===void 0&&(n=25);for(var r=Ep(t),a=mp(t,r),u=a,c=0;c++<n;)xp(t,a,c%2===0),bp(t,a),Ai(t,a)<Ai(t,u)&&(u=Ap(a));u.forEach(function(d){d.forEach(function(v,m){t.node(v).depth=m})})}function Ep(t){var n=[];return t.nodes().forEach(function(r){for(var a=t.node(r).rank||0;a>=n.length;)n.push([]);n[a].push(r)}),n}function Ai(t,n){for(var r=0,a=0;a<n.length-1;++a)r+=xn(t,n[a],n[a+1]);return r}function Ap(t){var n=[];return t.forEach(function(r){n.push(r.map(function(a){return a}))}),n}function Tp(t){typeof t.graph()!="object"&&t.setGraph({}),t.graph().dummyChains=[],t.edges().forEach(function(n){return Mp(t,n)})}function Mp(t,n){var r=t.edge(n),a=Cp(t.node(n.v),t.node(n.w));if(a.length===0)return;t.removeEdge(n);var u=n.v;a.forEach(function(d,v){var m="__"+n.v+"_"+n.w+"_"+v;t.hasNode(m)||(d.dummy="edge",t.setNode(m,d),v===0&&t.graph().dummyChains.push(m)),c(u,u=m)}),c(u,n.w);function c(d,v){var m={points:[],value:r.value,origEdge:n,origLabel:r};t.setEdge(d,v,m,n.name)}}function Sp(t){var n=t.graph().dummyChains||[];n.forEach(function(r){var a=t.node(r),u=t.inEdges(r).map(function(v){return t.edge(v)});u.forEach(function(v){v.origLabel.dy=v.dy,v.origLabel.x0=v.x0,v.origLabel.y0=v.y0,v.origLabel.r0=v.r0,v.origLabel.d0=v.d0,t.setEdge(v.origEdge,v.origLabel)});for(var c=u.map(function(v){return v.r1}),d;a.dummy;)u=t.outEdges(r).map(function(v){return t.edge(v)}),u.forEach(function(v,m){v.origLabel.points.push({x:(a.x0+a.x1)/2,y:v.y0,d:v.d0,ro:v.r0,ri:c[m]})}),c=u.map(function(v){return v.r1}),d=t.successors(r)[0],t.removeNode(r),a=t.node(r=d);u.forEach(function(v){v.origLabel.x1=v.x1,v.origLabel.y1=v.y1,v.origLabel.r1=v.r1,v.origLabel.d1=v.d1})})}function Cp(t,n){var r=[],a=t.rank;if(a+1<=n.rank){for(t.backwards&&r.push({rank:a,backwards:!1});++a<n.rank;)r.push({rank:a,backwards:!1});n.backwards&&r.push({rank:a,backwards:!1})}else if(a>n.rank){for(t.backwards||r.push({rank:a,backwards:!0});a-- >n.rank+1;)r.push({rank:a,backwards:!0});n.backwards||r.push({rank:a,backwards:!0})}return r}function Ti(t){for(var n=s.max(t,function(w){return w.rank||0})||0,r=s.max(t,function(w){return w.band||0})||0,a=f.nest().key(function(w){return w.rank||0}).key(function(w){return w.band||0}).sortValues(function(w,p){return w.depth-p.depth}).map(t),u=new Array(n+1),c,d=0;d<=n;++d)if(u[d]=new Array(r+1),c=a.get(d),c)for(var v=0;v<=r;++v)u[d][v]=c.get(v)||[];else for(var m=0;m<=r;++m)u[d][m]=[];return u.bandValues=Pp(u),u}function Pp(t){if(t.length===0||t[0].length===0)return[];for(var n=t[0].length,r=new Array(n),a=0;a<n;a++)r[a]=0;return t.forEach(function(u){u.forEach(function(c,d){var v=s.sum(c,function(m){return m.value});r[d]=Math.max(r[d],v)})}),r}function Op(t,n,r){var a=s.max(t.nodes(),function(c){return t.node(c).rank||0})||0,u=(n-r)/a;t.nodes().forEach(function(c){var d=t.node(c);d.x0=u*(d.rank||0),d.x1=d.x0+r})}function Ip(t,n){return 1}function Mi(){var t=Ip;function n(r,a,u){r.forEach(function(c){var d=0;c.forEach(function(v,m){var w=r.bandValues[m]/s.sum(r.bandValues)*a,p=u*w/5,y=w-2*p,x=s.sum(v,function(F){return F.dy}),E=v.map(function(F,A){return F.value&&v[A+1]?t(v[A],v[A+1],n):0}),$=Math.max(0,y-x),N=s.sum(E)?$/s.sum(E):0,R=d+p;v.length===1&&(R+=(y-v[0].dy)/2);var M=Number.MAX_VALUE;v.forEach(function(F,A){F.y=R,F.spaceAbove=M,F.spaceBelow=E[A]*N,R+=F.dy+F.spaceBelow,M=F.spaceBelow,F.data&&F.data.forceY!==void 0&&(F.y=p+F.data.forceY*(y-F.dy))}),v.length>0&&(v[v.length-1].spaceBelow=Number.MAX_VALUE),d+=w})})}return n.separation=function(r){return arguments.length?(t=$p(r),n):t},n}function $p(t){if(typeof t!="function")throw new Error;return t}function Si(t,n){t.nodes().forEach(function(r){var a=t.node(r),u=f.map();function c(w,p){if(u.has(w))return u.get(w);var y={id:w,node:a.data,side:p,incoming:[],outgoing:[]};return u.set(w,y),y}t.inEdges(r).forEach(function(w){var p=t.edge(w),y=c(p.targetPortId||"in",a.direction!=="l"?"west":"east");y.incoming.push(w),p.targetPort=y}),t.outEdges(r).forEach(function(w){var p=t.edge(w),y=c(p.sourcePortId||"out",a.direction!=="l"?"east":"west");y.outgoing.push(w),p.sourcePort=y}),a.ports=u.values(),a.ports.sort(n),a.fromElsewhere=a.fromElsewhere||[],a.toElsewhere=a.toElsewhere||[];var d=0;a.fromElsewhere.forEach(function(w){w.x1=a.x0,d+=w.dy});var v={west:d,east:0},m={west:0,east:0};a.ports.forEach(function(w){w.y=v[w.side],w.index=m[w.side],w.dy=Math.max(s.sum(w.incoming,function(y){return t.edge(y).dy}),s.sum(w.outgoing,function(y){return t.edge(y).dy}));var p=w.side==="west"?a.x0:a.x1;w.outgoing.forEach(function(y){var x=t.edge(y);x.x0=p,x.y0=a.y+w.y+x.dy/2}),w.incoming.forEach(function(y){var x=t.edge(y);x.x1=p,x.y1=a.y+w.y+x.dy/2}),v[w.side]+=w.dy,m[w.side]+=1}),a.toElsewhere.forEach(function(w){w.x0=a.x1})})}function Ci(t,n,r){if(r===void 0&&(r=!0),n.v===n.w)return Math.PI/2*(r?1:-1);var a=t.edge(n);return Math.atan2(a.y1-a.y0,a.x1-a.x0)}function Pi(t,n){t.nodes().forEach(function(r){return Np(t,r)})}function Np(t,n){var r=t.node(n);r.ports.forEach(function(a){a.incoming.sort(Oi(t,r,!1)),a.outgoing.sort(Oi(t,r,!0))})}function Oi(t,n,r){return r===void 0&&(r=!0),function(a,u){var c=Ci(t,a,r),d=Ci(t,u,r),v=r?1:-1;return a.v===u.v&&a.w===u.w&&Math.abs(c-d)<.001?typeof a.name=="number"&&typeof u.name=="number"?a.name-u.name:typeof a.name=="string"&&typeof u.name=="string"?a.name.localeCompare(u.name):0:Math.abs(c-d)<.001?a.w===u.w?t.node(u.v).y-t.node(a.v).y:a.v===u.v?t.node(u.w).y-t.node(a.w).y:0:v*(c-d)}}function Ii(t,n){for(var r=null,a=0;a<t.length;++a)if(n(t[a])){r=a;break}return r}function $i(t,n){if(t.length!==0){for(var r=0,a,u=t.length-1;u>=0;--u)a=t[u].dy/2,t[u][n]-a<r&&(t[u][n]=Math.min(t[u].Rmax,r+a)),r=t[u][n]+a;for(var c=t[0].Rmax+t[0].dy/2,d=0;d<t.length;++d)a=t[d].dy/2,t[d][n]+a>c&&(t[d][n]=Math.max(a,c-a)),c=t[d][n]-a}}function Ni(t){return Lp(t),Dp(t),t}function Lp(t){t.nodes().forEach(function(n){var r=t.node(n),a=r.y,u=r.y;r.fromElsewhere.forEach(function(c){c.y1=u+c.dy/2,c.d1=r.backwards?"l":"r",c.dy=c.dy,u+=c.dy}),r.ports.forEach(function(c){a=r.y+c.y,u=r.y+c.y,c.outgoing.forEach(function(d){var v=t.edge(d);v.y0=a+v.dy/2,v.d0=r.backwards?"l":"r",v.dy=v.dy,a+=v.dy}),c.incoming.forEach(function(d){var v=t.edge(d);v.y1=u+v.dy/2,v.d1=r.backwards?"l":"r",v.dy=v.dy,u+=v.dy})}),r.toElsewhere.forEach(function(c){c.y0=a+c.dy/2,c.d0=r.backwards?"l":"r",c.dy=c.dy,a+=c.dy})})}function Dp(t){t.nodes().forEach(function(n){var r=t.node(n);Ae(r.toElsewhere,"r0"),Ae(r.fromElsewhere,"r1"),r.ports.forEach(function(a){Ae(a.outgoing.map(function(u){return t.edge(u)}),"r0"),Ae(a.incoming.map(function(u){return t.edge(u)}),"r1")})})}function Rp(t){var n=t.x1-t.x0,r=t.y1-t.y0;return t.d0!==t.d1?Math.abs(r)/2.1:r!==0?(n*n+r*r)/Math.abs(4*r):1/0}function Ae(t,n){t.forEach(function(c){c.Rmax=Rp(c),c[n]=Math.max(c.dy/2,c.d0===c.d1?c.Rmax*.6:5+c.dy/2)});var r=n==="r0"?Ii(t,function(c){return c.y1>c.y0}):Ii(t,function(c){return c.y0>c.y1});if(r===null&&(r=t.length),$i(t.slice(r),n),r>0){for(var a=[],u=r-1;u>=0;u--)a.push(t[u]);$i(a,n)}}function Li(t,n,r,a,u,c,d){var v=new mn({directed:!0,multigraph:!0});return t.nodes.forEach(function(m,w){var p=n(m,w);if(v.hasNode(p))throw new Error("duplicate: "+p);v.setNode(p,{data:m,index:w,backwards:r(m,w),fromElsewhere:m.fromElsewhere||[],toElsewhere:m.toElsewhere||[],x0:m.x0,x1:m.x1,y:m.y0})}),t.links.forEach(function(m,w){var p=Di(a(m,w)),y=Di(u(m,w)),x={data:m,sourcePortId:p.port,targetPortId:y.port,index:w,points:[],value:d(m,w),type:c(m,w)};if(!v.hasNode(p.id))throw new Error("missing: "+p.id);if(!v.hasNode(y.id))throw new Error("missing: "+y.id);v.setEdge(p.id,y.id,x,c(m,w))}),v.setGraph({}),v}function Di(t){return typeof t=="object"?t:{id:t,port:void 0}}function kp(t){return t.nodes}function Fp(t){return t.links}function zp(t){return t.id}function Up(t){return t.direction&&t.direction.toLowerCase()==="l"}function jp(t){return{id:typeof t.source=="object"?t.source.id:t.source,port:typeof t.sourcePort=="object"?t.sourcePort.id:t.sourcePort}}function Vp(t){return{id:typeof t.target=="object"?t.target.id:t.target,port:typeof t.targetPort=="object"?t.targetPort.id:t.targetPort}}function Bp(t){return t.type}function qp(t,n){return t.id.localeCompare(n.id)}function Hp(){var t=kp,n=Fp,r=zp,a=Up,u=jp,c=Vp,d=Bp,v=null,m=[],w=25,p=null,y=qp,x=0,E=0,$=1,N=1,R=1,M=null,F=function(C){return C.value},A=.5,L=Mi();function O(){var C={nodes:t.apply(null,arguments),links:n.apply(null,arguments)},U=Li(C,r,a,u,c,d,F);if(En(U,F),p)U.nodes().forEach(function(J){var q=U.node(J),st=p(q.data);q.x0=st[0],q.x1=st[0]+R,q.y=st[1]}),An(U,M);else{v!==null?z(U,v):(gp(U,m),Ei(U,w)),Tp(U),En(U,F),v===null&&Ei(U,w);var H=Ti(U.nodes().map(function(J){return U.node(J)}));k(U,H),An(U,M),L(H,N-E,A),Op(U,$-x,R),U.nodes().forEach(function(J){var q=U.node(J);q.x0+=x,q.x1+=x,q.y+=E})}return Si(U,y),Pi(U),Ni(U),Sp(U),Ri(U),ki(U),C}O.update=function(C,U){var H=Li(C,r,a,u,c,d,F);En(H,F);var J=Ti(H.nodes().map(function(q){return H.node(q)}));return k(H,J),An(H,M),Si(H,y),Pi(H),Ni(H),Ri(H),ki(H),C},O.nodes=function(C){return arguments.length?(t=wt(C),O):t},O.links=function(C){return arguments.length?(n=wt(C),O):n},O.nodeId=function(C){return arguments.length?(r=wt(C),O):r},O.nodeBackwards=function(C){return arguments.length?(a=wt(C),O):a},O.sourceId=function(C){return arguments.length?(u=wt(C),O):u},O.targetId=function(C){return arguments.length?(c=wt(C),O):c},O.linkType=function(C){return arguments.length?(d=wt(C),O):d},O.sortPorts=function(C){return arguments.length?(y=wt(C),O):y};function k(C,U){if(M===null){var H=s.sum(U.bandValues);H<=0?M=1:(M=(N-E)/H,A!==1&&(M*=1-A))}}O.ordering=function(C){return arguments.length?(v=C,O):v},O.rankSets=function(C){return arguments.length?(m=C,O):m},O.nodeWidth=function(C){return arguments.length?(R=C,O):R},O.nodePosition=function(C){return arguments.length?(p=C,O):p},O.size=function(C){return arguments.length?(x=E=0,$=+C[0],N=+C[1],O):[$-x,N-E]},O.extent=function(C){return arguments.length?(x=+C[0][0],E=+C[0][1],$=+C[1][0],N=+C[1][1],O):[[x,E],[$,N]]},O.whitespace=function(C){return arguments.length?(A=C,O):A},O.scale=function(C){return arguments.length?(M=C,O):M},O.linkValue=function(C){return arguments.length?(F=C,O):F},O.verticalLayout=function(C){return arguments.length?(L=wt(C),O):L};function z(C,U){U.forEach(function(H,J){H.forEach(function(q,st){if(q.forEach)q.forEach(function(it,$t){var xt=C.node(it);xt&&(xt.rank=J,xt.band=st,xt.depth=$t)});else{var nt=C.node(q);nt&&(nt.rank=J,nt.depth=st)}})})}return O}function En(t,n){t.nodes().forEach(function(r){var a=t.node(r),u=s.sum(t.inEdges(r),function(d){return t.edge(d).value}),c=s.sum(t.outEdges(r),function(d){return t.edge(d).value});u+=s.sum(a.fromElsewhere||[],function(d){return n(d)}),c+=s.sum(a.toElsewhere||[],function(d){return n(d)}),a.value=Math.max(u,c)})}function An(t,n){t.edges().forEach(function(r){var a=t.edge(r);a.dy=a.value*n}),t.nodes().forEach(function(r){var a=t.node(r);a.dy=a.value*n,a.fromElsewhere=a.fromElsewhere||[],a.toElsewhere=a.toElsewhere||[],a.fromElsewhere.forEach(function(u){u.dy=u.value*n,u.source={id:"__from_elsewhere_"+r},u.target=a.data}),a.toElsewhere.forEach(function(u){u.dy=u.value*n,u.source=a.data,u.target={id:"__to_elsewhere_"+r}})})}function wt(t){if(typeof t!="function")throw new Error;return t}function Ri(t){t.edges().forEach(function(n){var r=t.edge(n);r.points.unshift({x:r.x0,y:r.y0,ro:r.r0,d:r.d0}),r.points.push({x:r.x1,y:r.y1,ri:r.r1,d:r.d1})}),t.nodes().forEach(function(n){var r=t.node(n);r.fromElsewhere.forEach(function(a){a.points=[{x:a.x1,y:a.y1,ri:a.r1,d:a.d1,style:"down-right"}]}),r.toElsewhere.forEach(function(a){a.points=[{x:a.x0,y:a.y0,ri:a.r0,d:a.d0,style:"right-down"}]})})}function ki(t,n){t.nodes().forEach(function(r){var a=t.node(r);a.data.incoming=[],a.data.outgoing=[],a.data.ports=a.ports,a.data.ports.forEach(function(u){u.incoming=[],u.outgoing=[]}),a.data.dy=a.dy,a.data.x0=a.x0,a.data.x1=a.x1,a.data.y0=a.y,a.data.y1=a.y+a.dy,a.data.rank=a.rank,a.data.band=a.band,a.data.depth=a.depth,a.data.value=a.value,a.data.spaceAbove=a.spaceAbove,a.data.spaceBelow=a.spaceBelow}),t.edges().forEach(function(r){var a=t.edge(r);a.data.source=t.node(r.v).data,a.data.target=t.node(r.w).data,a.data.sourcePort=a.sourcePort,a.data.targetPort=a.targetPort,a.data.source.outgoing.push(a.data),a.data.target.incoming.push(a.data),a.data.sourcePort&&a.data.sourcePort.outgoing.push(a.data),a.data.targetPort&&a.data.targetPort.incoming.push(a.data),a.data.value=a.value,a.data.type=a.type,a.data.dy=a.dy,a.data.points=a.points||[]})}function Kp(){var t=25,n=8;function r(a,u){v(),p();for(var c=1,d=t;d>0;--d)w(c*=.99),p(),m(c),p();function v(){a.forEach(function(y){var x=0;y.forEach(function(E){E.forEach(function($){$.y=x++})})})}function m(y){a.forEach(function(E){E.forEach(function($){$.forEach(function(N){var R=N.incoming||N.edges;if(R.length){var M=s.sum(R,x)/s.sum(R,Fi);N.y+=(M-Te(N))*y}})})});function x(E){return Te(E.source)*E.value}}function w(y){a.slice().reverse().forEach(function(E){E.forEach(function($){$.forEach(function(N){var R=N.outgoing||N.edges;if(R.length){var M=s.sum(R,x)/s.sum(R,Fi);N.y+=(M-Te(N))*y}})})});function x(E){return Te(E.target)*E.value}}function p(){a.forEach(function(y){y.forEach(function(x){var E,$,N=0,R=x.length,M;for(x.sort(Wp),M=0;M<R;++M)E=x[M],$=N-E.y,$>0&&(E.y+=$),N=E.y+E.dy+n;if($=N-n-u,$>0)for(N=E.y-=$,M=R-2;M>=0;--M)E=x[M],$=E.y+E.dy+n-N,$>0&&(E.y-=$),N=E.y})})}}return r.iterations=function(a){return arguments.length?(t=+a,r):t},r.padding=function(a){return arguments.length?(n=+a,r):n},r}function Te(t){return t.y+t.dy/2}function Fi(t){return t.value}function Wp(t,n){return t.y-n.y}function Yp(t){return t.dy===0?0:2}function zi(){var t=Yp;function n(p){var y=p.x1-p.x0,x=p.y1-p.y0,E=p.dy/2,$=(y*y+x*x)/Math.abs(4*x);return[E,$]}function r(p){if(p.points.length===1)return w(p);for(var y="",x,E=0;E<p.points.length-1;++E)x={x0:p.points[E].x,y0:p.points[E].y,x1:p.points[E+1].x,y1:p.points[E+1].y,r0:p.points[E].ro,r1:p.points[E+1].ri,d0:p.points[E].d,d1:p.points[E+1].d,dy:p.dy},y+=a(x);return y}function a(p){var y=(p.d0||"r")+(p.d1||"r");if(p.source&&p.source===p.target)return u(p);if(y==="rl")return c(p);if(y==="rd")return d(p);if(y==="dr")return v(p);if(y==="lr")return m(p);var x=Math.max(t(p),p.dy)/2,E=p.x0,$=p.x1,N=p.y0,R=p.y1;if($<E){var M;M=[$,E],E=M[0],$=M[1];var F;F=[R,N],N=F[0],R=F[1]}var A=R>N?1:-1,L=1,O=n(p),k=Math.max(O[0],Math.min(O[1],($-E)/3)),z=Math.max(O[0],Math.min(O[1],p.r0||k)),C=Math.max(O[0],Math.min(O[1],p.r1||k)),U=$-E,H=R-N-A*(z+C),J=Math.sqrt(U*U+H*H),q=-A*Math.acos(Math.min(1,(z+C)/J)),st=Math.atan2(H,U),nt=Math.PI/2+A*(st+q),it=x*A*Math.sin(nt),$t=x*Math.cos(nt),xt=E+L*z*Math.sin(Math.abs(nt)),Sn=$-L*C*Math.sin(Math.abs(nt)),Cn=N+z*A*(1-Math.cos(nt)),Pn=R-C*A*(1-Math.cos(nt));(isNaN(nt)||Math.abs(nt)<.001)&&(nt=z=C=0,xt=E,Sn=$,Cn=N,Pn=R,it=0,$t=x);function Me(Vi,On){var eg=Vi*(R-N)>0?1:0,In=L*Vi*(R-N)>0?On+x:On-x;return nt===0&&(In=On),"A"+In+" "+In+" "+Math.abs(nt)+" 0 "+eg+" "}var Se;return Se="M"+[E,N-x]+" "+Me(1,z)+[xt+it,Cn-$t]+" L"+[Sn+it,Pn-$t]+" "+Me(-1,C)+[$,R-x]+" L"+[$,R+x]+" "+Me(1,C)+[Sn-it,Pn+$t]+" L"+[xt-it,Cn+$t]+" "+Me(-1,z)+[E,N+x]+" Z",/NaN/.test(Se)&&console.error("path NaN",p,Se),Se}function u(p){var y=Math.max(t(p),p.dy)/2,x=y*1.5,E=2*Math.PI,$=p.x0,N=p.y0;function R(M){var F=M>0?1:0,A=M>0?x+y:x-y;return"A"+A+" "+A+" "+Math.abs(E)+" 1 "+F+" "}return"M"+[$+.1,N-y]+" "+R(1)+[$-.1,N-y]+" L"+[$-.1,N+y]+" "+R(-1)+[$+.1,N+y]+" Z"}function c(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1,R=p.x1-p.x0,M=p.y1-p.y0,F=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(N-$)/2.1,F),L=Math.atan2(M-2*A,R),O=p.y1>p.y0?1:-1,k=y*Math.sin(L),z=y*Math.cos(L),C=p.x0+A*Math.sin(Math.abs(L)),U=p.x1+A*Math.sin(Math.abs(L)),H=p.y0+A*O*(1-Math.cos(L)),J=p.y1-A*O*(1-Math.cos(L));function q(st){var nt=st*L>0?1:0,it=st*L>0?A+y:A-y;return L===0&&(it=A),"A"+it+" "+it+" "+Math.abs(L)+" 0 "+nt+" "}return"M"+[x,$-y]+" "+q(1)+[C+k,H-z]+" L"+[U+k,J-z]+" "+q(1)+[E,N+y]+" L"+[E,N-y]+" "+q(-1)+[U-k,J+z]+" L"+[C-k,H+z]+" "+q(-1)+[x,$+y]+" Z"}function d(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1;p.x1-p.x0,p.y1-p.y0;var R=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var F=$+M;function A(L){var O=L*R>0?1:0,k=L*R>0?M+y:M-y;return R===0&&(k=M),"A"+k+" "+k+" "+Math.abs(R)+" 0 "+O+" "}return"M"+[x,$-y]+" "+A(1)+[E+y,F]+" L"+[E+y,N]+" "+[E-y,N]+" "+[E-y,F]+" "+A(-1)+[x,$+y]+" Z"}function v(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1;p.x1-p.x0,p.y1-p.y0;var R=Math.PI/2,M=Math.max(0,E-x);p.y1>p.y0;var F=N-M;function A(L){var O=L*R>0?1:0,k=L*R>0?M+y:M-y;return R===0&&(k=M),"A"+k+" "+k+" "+Math.abs(R)+" 0 "+O+" "}return"M"+[x-y,$]+" L"+[x+y,$]+" "+[x+y,F]+" "+A(-1)+[E,N-y]+" L"+[E,N+y]+" "+A(1)+[x-y,F]+" Z"}function m(p){var y=Math.max(t(p),p.dy)/2,x=p.x0,E=p.x1,$=p.y0,N=p.y1,R=p.x1-p.x0,M=p.y1-p.y0,F=(p.r0+p.r1)/2||5+y,A=Math.min(Math.abs(M)/2.1,F),L=Math.atan2(M-2*A,R),O=p.y1>p.y0?1:-1,k=y*Math.sin(L),z=y*Math.cos(L),C=p.x0-A*Math.sin(Math.abs(L)),U=p.x1-A*Math.sin(Math.abs(L)),H=p.y0+A*O*(1-Math.cos(L)),J=p.y1-A*O*(1-Math.cos(L));function q(st){var nt=st*L>0?1:0,it=-st*L>0?A+y:A-y;return L===0&&(it=A),"A"+it+" "+it+" "+Math.abs(L)+" 0 "+nt+" "}return"M"+[x,$-y]+" "+q(-1)+[C-k,H-z]+" L"+[U-k,J-z]+" "+q(-1)+[E,N+y]+" L"+[E,N-y]+" "+q(1)+[U+k,J-z]+" L"+[C+k,H-z]+" "+q(1)+[x,$+y]+" Z"}function w(p){var y=p.points[0],x=Math.max(t(p),p.dy)/2;if(y.style==="down-right")return"M"+[y.x-20,y.y-x]+" L"+[y.x,y.y-x]+" L"+[y.x,y.y+x]+" L"+[y.x-20,y.y+x]+" Z";if(y.style==="right-down")return"M"+[y.x,y.y-x]+" L"+[y.x+20,y.y-x]+" L"+[y.x+20,y.y+x]+" L"+[y.x,y.y+x]+" Z"}return r.minWidth=function(p){return arguments.length?(t=Zp(p),r):t},r}function Zp(t){if(typeof t!="function")throw new Error;return t}var Ui=function(){var t=function(u){return u.title!==void 0?u.title:u.id},n=function(u){return null},r=function(u){return!!t(u)};function a(u){var c=u.selection?u.selection():u;c.select("text").empty()&&(c.append("title"),c.append("line").attr("x1",0).attr("x2",0),c.append("rect").attr("class","node-body"),c.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),c.append("text").attr("class","node-title").attr("dy",".35em"),c.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),c.attr("transform",ji)),c.each(function(d){var v=h.select(this).select("title"),m=h.select(this).select(".node-value"),w=h.select(this).select(".node-title"),p=h.select(this).select("line"),y=h.select(this).select(".node-body"),x=h.select(this).select(".node-click-target"),E=Xp(d);E.dy=d.y0===d.y1?0:Math.max(1,d.y1-d.y0);var $=d.x1-d.x0>2,N=t(d)+(!$&&n(d)?" ("+n(d)+")":"");v.text(N),m.text(n).style("display",$?"inline":"none"),w.attr("text-anchor",E.right?"end":"start").text(N).each(Jp,100),u!==c&&(w=w.transition(u),p=p.transition(u),y=y.transition(u),x=x.transition(u)),u.attr("transform",ji),p.attr("y1",function(M){return E.titleAbove?-5:0}).attr("y2",function(M){return E.dy}).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),x.attr("height",function(M){return E.dy+5}),y.attr("width",function(M){return M.x1-M.x0}).attr("height",function(M){return E.dy}),w.attr("transform",R).style("display",function(M){return M.y0===M.y1||!r(M)?"none":"inline"}),m.style("font-size",function(M){return Math.min(M.x1-M.x0-4,M.y1-M.y0-4)+"px"}).attr("transform",function(M){var F=M.x1-M.x0,A=M.y1-M.y0,L=F>A?0:-90;return"translate("+F/2+","+A/2+") rotate("+L+")"});function R(M){var F=E,A=F.titleAbove?-10:(M.y1-M.y0)/2,L;return F.titleAbove?L=F.right?4:-4:L=F.right?-4:M.x1-M.x0+4,"translate("+L+","+A+")"}})}return a.nodeVisible=function(u){return arguments.length?(r=Tn(u),a):r},a.nodeTitle=function(u){return arguments.length?(t=Tn(u),a):t},a.nodeValue=function(u){return arguments.length?(n=Tn(u),a):n},a};function ji(t){return"translate("+t.x0+","+t.y0+")"}function Xp(t){var n=!1,r=!1;return t.spaceAbove>20&&t.style!=="type"?n=!0:n=!1,t.incoming.length===0?(r=!0,n=!1):t.outgoing.length===0&&(r=!1,n=!1),{titleAbove:n,right:r}}function Jp(t,n){var r=h.select(this),a=r.text().split(/\n/),u=1.1;a.length!==1&&(r.text(null),a.forEach(function(c,d){r.append("tspan").attr("x",0).attr("dy",(d===0?.7-a.length/2:1)*u+"em").text(c)}))}function Tn(t){if(typeof t!="function")throw new Error;return t}function Qp(t,n){var r={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0};return n.nodes.forEach(function(a){var u=t.get(a);u&&(u.x0<r.left&&(r.left=u.x0),u.x1>r.right&&(r.right=u.x1),u.y0<r.top&&(r.top=u.y0),u.y1>r.bottom&&(r.bottom=u.y1))}),n.rect=r,n}function Mn(t,n,r){return function(a){var u=[],c=t(a.source),d=t(a.target),v=n(a);return u.push(c+" → "+d),v&&u.push(v),u.push(r(a.value)),u.join(`
`)}}function Gp(){var t={top:0,right:0,bottom:0,left:0},n=null,r=[],a=b.format(".3s"),u=Ui(),c=zi(),d=function(A){return null},v=Mn(u.nodeTitle(),function(A){return A.type},a),m=tg,w=_.dispatch("selectNode","selectGroup","selectLink");function p(A){var L=A.selection?A.selection():A;L.each(function(O){var k=h.select(this),z=k.selectAll(".sankey").data([{type:"sankey"}]),C=z.enter().append("g").classed("sankey",!0);C.append("g").classed("groups",!0),C.append("g").classed("links",!0),C.append("g").classed("nodes",!0),C.append("g").classed("slice-titles",!0),z=z.merge(C),z.attr("transform","translate("+t.left+","+t.top+")");var U=f.map(O.nodes,function(q){return q.id}),H=(r||[]).map(function(q){return Qp(U,q)}),J=Array.from(O.links);O.nodes.forEach(function(q){Array.prototype.push.apply(J,q.fromElsewhere||[]),Array.prototype.push.apply(J,q.toElsewhere||[])}),y(z,A,O.nodes),x(z,A,J),E(k,H),k.on("click",function(){w.call("selectNode",this,null),w.call("selectLink",this,null)})})}function y(A,L,O){var k=A.select(".nodes").selectAll(".node").data(O,function(z){return z.id});k.exit().remove(),k=k.merge(k.enter().append("g").attr("class","node").call(u).on("click",F)),L instanceof g.transition?k.transition(L).call(u):k.call(u)}function x(A,L,O){var k=A.select(".links").selectAll(".link").data(O,function(C){return C.source.id+"-"+C.target.id+"-"+C.type});k.exit().remove();var z=k.enter().append("g").attr("class","link").on("click",M);z.append("path").attr("d",c).style("fill","white").each(function(C){this._current=C}),z.append("title"),z.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(C){return C.points[0].x+4}).attr("y",function(C){return C.points[0].y}),k=k.merge(z),k.classed("selected",function(C){return C.id===n}),k.sort(R),L instanceof g.transition?(k=k.transition(L),k.select("path").style("fill",d).each(function(C){h.select(this).transition(L).attrTween("d",$)})):k.select("path").style("fill",d).attr("d",c),k.select("title").text(v),k.select(".label").text(m).attr("x",function(C){return C.points[0].x+4}).attr("y",function(C){return C.points[0].y})}function E(A,L){var O=A.select(".groups").selectAll(".group").data(L);O.exit().remove();var k=O.enter().append("g").attr("class","group");k.append("rect"),k.append("text").attr("x",-10).attr("y",-25),O=O.merge(k),O.style("display",function(z){return z.title?"inline":"none"}).attr("transform",function(z){return"translate("+z.rect.left+","+z.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(z){return z.rect.right-z.rect.left+20}).attr("height",function(z){return z.rect.bottom-z.rect.top+30}),O.select("text").text(function(z){return z.title})}function $(A){A.points.forEach(function(k){k.ri>1e3&&(k.ri=1e3),k.ro>1e3&&(k.ro=1e3)});var L=l.interpolate(N(this._current),A),O=this;return function(k){return O._current=L(k),c(O._current)}}function N(A){return{points:A.points,dy:A.dy}}function R(A,L){return A.id===n?1:L.id===n||!A.source||A.target&&A.target.direction==="d"?-1:!L.source||L.target&&L.target.direction==="d"?1:!A.target||A.source&&A.source.direction==="d"?-1:!L.target||L.source&&L.source.direction==="d"?1:A.dy-L.dy}function M(A){h.event.stopPropagation();var L=h.select(this).node();w.call("selectLink",L,A)}function F(A){h.event.stopPropagation();var L=h.select(this).node();w.call("selectNode",L,A)}return p.margins=function(A){return arguments.length?(t={top:A.top===void 0?t.top:A.top,left:A.left===void 0?t.left:A.left,bottom:A.bottom===void 0?t.bottom:A.bottom,right:A.right===void 0?t.right:A.right},this):t},p.groups=function(A){return arguments.length?(r=A,this):r},p.nodeTitle=function(A){return arguments.length?(u.nodeTitle(A),v=Mn(A,function(L){return L.type},a),this):u.nodeTitle()},p.nodeValue=function(A){return arguments.length?(u.nodeValue(A),this):u.nodeValue()},p.linkTitle=function(A){return arguments.length?(v=A,this):v},p.linkLabel=function(A){return arguments.length?(m=A,this):m},p.linkColor=function(A){return arguments.length?(d=A,this):d},p.linkMinWidth=function(A){return arguments.length?(c.minWidth(A),this):c.minWidth()},p.selectNode=function(A){return this},p.selectLink=function(A){return n=A,this},p.on=function(){var A=w.on.apply(w,arguments);return A===w?p:A},p}function tg(t){return null}o.sankey=Hp,o.sankeyPositionJustified=Mi,o.sankeyPositionRelaxation=Kp,o.sankeyLink=zi,o.sankeyNode=Ui,o.sankeyDiagram=Gp,o.sankeyLinkTitle=Mn,Object.defineProperty(o,"__esModule",{value:!0})})})(kn,kn.exports);var ra=kn.exports;const t1={messages:{en:{total:"total",showChanges:"Only show changes"},de:{total:"Insgesamt",showChanges:"Nur Änderungen zeigen"}}},e1=ng({name:"SankeyPlugin",i18n:t1,props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},yamlConfig:String,thumbnail:Boolean,config:Object},data(){return{globalState:Nn.state,vizDetails:{csv:"",title:"",description:""},loadingText:"",jsonChart:{},totalTrips:0,cleanConfigId:`sankey-${Math.floor(1e12*Math.random())}`,onlyShowChanges:!1,csvData:[],colorRamp:[]}},computed:{fileApi(){return new Zg(this.fileSystem,Nn)},fileSystem(){const e=this.$store.state.svnProjects.filter(i=>i.slug===this.root);if(e.length===0)throw console.log("no such project"),Error;return e[0]}},watch:{"globalState.resizeEvents"(){this.changeDimensions()},yamlConfig(){this.getVizDetails()},subfolder(){this.getVizDetails()},onlyShowChanges(){this.jsonChart=this.processInputs(),this.doD3()}},methods:{changeDimensions(){var e;(e=this.jsonChart)!=null&&e.nodes&&this.doD3()},async getVizDetails(){if(this.config){this.vizDetails=Object.assign({},this.config),this.$emit("title",this.vizDetails.title);return}this.loadingText="Loading config...";const e=this.yamlConfig??"",i=e.indexOf("/")>-1?e:this.subfolder+"/"+e,o=await this.fileApi.getFileText(i);this.vizDetails=ig.parse(o),this.$emit("title",this.vizDetails.title)},async loadFiles(){this.loadingText="Loading files...";try{const e=await this.fileApi.getFileText(this.subfolder+"/"+this.vizDetails.csv);return Yg.parse(e,{header:!1,dynamicTyping:!0,skipEmptyLines:!0}).data}catch(e){const i=e;console.error({e:i}),this.loadingText=""+i,this.fileSystem&&this.fileSystem.needPassword&&i.status===401&&Nn.commit("requestLogin",this.fileSystem.slug)}return[]},processInputs(){this.loadingText="Building node graph...";const e=[],i=[],o=[];this.totalTrips=0;try{for(const T of this.csvData.slice(1)){e.includes(T[0])||e.push(T[0]),i.includes(T[1])||i.push(T[1]);const S=T[2];if(S!==0){if(S<0){console.warn("Data contains NEGATIVE numbers!!!");continue}this.onlyShowChanges&&T[0]===T[1]||(o.push([T[0],T[1],S]),this.totalTrips+=S)}}}catch(T){console.error(T)}const s=[],f=[],l={nodes:[],links:[],ordering:[[s],[f]]},h={},g={};e.forEach((T,S)=>{l.nodes.push({id:S,title:T}),h[T]=S,s.push(S)}),i.forEach((T,S)=>{const P=S+e.length;l.nodes.push({id:P,title:T}),g[T]=P,f.push(P)});for(const T of o)l.links.push({source:h[T[0]],target:g[T[1]],value:T[2]});const _=e.length,b=[...Array(_).keys()].map(T=>Xg(T/_).replace(/rgb(.*)\)/,"rgba$1, 0.7)"));return this.colorRamp=b,l},getMaxLabelWidth(){const i=document.createElement("canvas").getContext("2d");if(!i)return 120;i.font="16px Arial";let o=0;for(const s of this.jsonChart.nodes){const f=s.title,l=i.measureText(f).width;o=Math.max(o,l)}return o},doD3(){const e=this.jsonChart;let i=document.querySelector(`#${this.cleanConfigId}`),o=i?i.clientWidth:100,s=i?i.clientHeight:100,f=5+this.getMaxLabelWidth();const l=ra.sankey().nodeWidth(8).ordering(e.ordering).extent([[f,0],[o-f,s]]),h=ra.sankeyDiagram().linkColor(g=>this.colorRamp[g.source.id]);Xn("#"+this.cleanConfigId).datum(l(e)).call(h).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${o} ${s}`)}},async mounted(){await this.getVizDetails(),this.csvData=await this.loadFiles(),this.jsonChart=this.processInputs(),window.addEventListener("resize",this.changeDimensions),this.doD3()},beforeDestroy(){window.removeEventListener("resize",this.changeDimensions)}});var n1=function(){var i=this,o=i._self._c;return i._self._setupProxy,o("div",{staticClass:"sankey-container",class:{"is-thumbnail":i.thumbnail}},[o("svg",{staticClass:"chart-area",class:{"is-thumbnail":i.thumbnail},attrs:{id:i.cleanConfigId}}),i.thumbnail?i._e():o("div",{staticClass:"labels"},[o("p",{staticClass:"center"},[o("b",[i._v(i._s(i.totalTrips.toLocaleString())+" "+i._s(i.$t("total")))])])]),i.thumbnail?i._e():o("b-switch",{staticClass:"switcher",model:{value:i.onlyShowChanges,callback:function(s){i.onlyShowChanges=s},expression:"onlyShowChanges"}},[i._v(i._s(i.$t("showChanges")))])],1)},r1=[];var i1=rg(e1,n1,r1,!1,null,"381d071f",null,null);const m1=i1.exports;export{m1 as default};
//# sourceMappingURL=SankeyDiagram-6324834d.js.map
