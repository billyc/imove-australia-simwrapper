import{d as k,n as _,p as X,g,f as ct,a as H,s as $t,V as rt,S as Jt,b as Vt}from"./index-6ca30cbc.js";import{H as V,m as j}from"./HTTPFileSystem-a263b5e7.js";import{m as G}from"./index-036a3609.js";import{y as Q}from"./index-650b7cb7.js";import{T as Gt}from"./TopSheet-80ec6121.js";import{_ as Ft}from"./vue-good-table.esm-c2eb33ba.js";import{D as qt}from"./DashBoard-72d055ea.js";import{D as Kt}from"./DashboardDataManager-c48e5039.js";import"./util-6eb30833.js";import"./fxp-26b9b10f.js";import"./DataFetcher.worker-c87933e8.js";import"./RoadNetworkLoader.worker-48aaa0eb.js";import"./group-f6e6d4c5.js";import"./index-f6506551.js";const Zt=k({name:"BreadCrumbs",components:{},props:{root:{type:String,required:!0},subfolder:{type:String,required:!0},isLoading:{type:Boolean,required:!1}},computed:{fileSystem(){const s=this.$store.state.svnProjects.filter(t=>t.slug===this.root);if(s.length===0)throw console.log("no such project"),Error;return s[0]},crumbs(){if(!this.fileSystem)return[];const s=[{label:"SimWrapper",url:"/",root:"",subfolder:""},{label:this.fileSystem.name,url:"/"+this.fileSystem.slug,root:this.fileSystem.slug,subfolder:""}],t=this.subfolder.split("/");let e="",a=this.fileSystem.name;for(const i of t)i&&(e+=`/${i}`,e.startsWith("/")&&(e=e.substring(1)),s.push({label:i,url:"/"+this.fileSystem.slug+e,root:this.fileSystem.slug,subfolder:e}),a=i);return this.$emit("crumbs",{crumbs:s,finalFolder:a}),s}},methods:{clickedBreadcrumb(s){if(this.isLoading||!this.fileSystem)return;if(!s.root){this.$emit("navigate",{component:"SplashPage",props:{}});return}const t={root:s.root,xsubfolder:s.subfolder};this.$emit("navigate",{component:"TabbedDashboardView",props:t})}}});var Yt=function(){var t=this,e=t._self._c;return t._self._setupProxy,t.root?e("div",{staticClass:"trail"},[e("div",{staticClass:"x-home"},[e("p",{on:{click:function(a){return t.clickedBreadcrumb({url:"/"})}}},[e("i",{staticClass:"fa fa-home"})])]),t.root?e("div",{staticClass:"x-breadcrumbs"},t._l(t.crumbs.slice(1),function(a,i){return e("p",{key:a.url,on:{click:function(o){return t.clickedBreadcrumb(a)}}},[t._v(" • "+t._s(a.label))])}),0):t._e()]):t._e()},Qt=[];var Xt=_(Zt,Yt,Qt,!1,null,"2ece6f17",null,null);const Dt=Xt.exports;/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var O=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}return s},Z=function(t){return t.tagName==="IMG"},te=function(t){return NodeList.prototype.isPrototypeOf(t)},Y=function(t){return t&&t.nodeType===1},bt=function(t){var e=t.currentSrc||t.src;return e.substr(-4).toLowerCase()===".svg"},yt=function(t){try{return Array.isArray(t)?t.filter(Z):te(t)?[].slice.call(t).filter(Z):Y(t)?[t].filter(Z):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Z):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},ee=function(t){var e=document.createElement("div");return e.classList.add("medium-zoom-overlay"),e.style.background=t,e},se=function(t){var e=t.getBoundingClientRect(),a=e.top,i=e.left,o=e.width,r=e.height,l=t.cloneNode(),h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,S=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return l.removeAttribute("id"),l.style.position="absolute",l.style.top=a+h+"px",l.style.left=i+S+"px",l.style.width=o+"px",l.style.height=r+"px",l.style.transform="",l},W=function(t,e){var a=O({bubbles:!1,cancelable:!1,detail:void 0},e);if(typeof window.CustomEvent=="function")return new CustomEvent(t,a);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,a.bubbles,a.cancelable,a.detail),i},ae=function s(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=window.Promise||function(c){function u(){}c(u,u)},i=function(c){var u=c.target;if(u===z){F();return}d.indexOf(u)!==-1&&q({target:u})},o=function(){if(!(L||!n.original)){var c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(A-c)>p.scrollOffset&&setTimeout(F,150)}},r=function(c){var u=c.key||c.keyCode;(u==="Escape"||u==="Esc"||u===27)&&F()},l=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c;if(c.background&&(z.style.background=c.background),c.container&&c.container instanceof Object&&(u.container=O({},p.container,c.container)),c.template){var b=Y(c.template)?c.template:document.querySelector(c.template);u.template=b}return p=O({},p,u),d.forEach(function(C){C.dispatchEvent(W("medium-zoom:update",{detail:{zoom:y}}))}),y},h=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s(O({},p,c))},S=function(){for(var c=arguments.length,u=Array(c),b=0;b<c;b++)u[b]=arguments[b];var C=u.reduce(function(f,D){return[].concat(f,yt(D))},[]);return C.filter(function(f){return d.indexOf(f)===-1}).forEach(function(f){d.push(f),f.classList.add("medium-zoom-image")}),R.forEach(function(f){var D=f.type,T=f.listener,B=f.options;C.forEach(function(N){N.addEventListener(D,T,B)})}),y},m=function(){for(var c=arguments.length,u=Array(c),b=0;b<c;b++)u[b]=arguments[b];n.zoomed&&F();var C=u.length>0?u.reduce(function(f,D){return[].concat(f,yt(D))},[]):d;return C.forEach(function(f){f.classList.remove("medium-zoom-image"),f.dispatchEvent(W("medium-zoom:detach",{detail:{zoom:y}}))}),d=d.filter(function(f){return C.indexOf(f)===-1}),y},w=function(c,u){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return d.forEach(function(C){C.addEventListener("medium-zoom:"+c,u,b)}),R.push({type:"medium-zoom:"+c,listener:u,options:b}),y},$=function(c,u){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return d.forEach(function(C){C.removeEventListener("medium-zoom:"+c,u,b)}),R=R.filter(function(C){return!(C.type==="medium-zoom:"+c&&C.listener.toString()===u.toString())}),y},P=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.target,b=function(){var f={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},D=void 0,T=void 0;if(p.container)if(p.container instanceof Object)f=O({},f,p.container),D=f.width-f.left-f.right-p.margin*2,T=f.height-f.top-f.bottom-p.margin*2;else{var B=Y(p.container)?p.container:document.querySelector(p.container),N=B.getBoundingClientRect(),et=N.width,Et=N.height,Nt=N.left,At=N.top;f=O({},f,{width:et,height:Et,left:Nt,top:At})}D=D||f.width-p.margin*2,T=T||f.height-p.margin*2;var J=n.zoomedHd||n.original,zt=bt(J)?D:J.naturalWidth||D,Ot=bt(J)?T:J.naturalHeight||T,K=J.getBoundingClientRect(),It=K.top,Bt=K.left,gt=K.width,pt=K.height,Wt=Math.min(zt,D)/gt,Mt=Math.min(Ot,T)/pt,st=Math.min(Wt,Mt),Ut=(-Bt+(D-gt)/2+p.margin+f.left)/st,Ht=(-It+(T-pt)/2+p.margin+f.top)/st,vt="scale("+st+") translate3d("+Ut+"px, "+Ht+"px, 0)";n.zoomed.style.transform=vt,n.zoomedHd&&(n.zoomedHd.style.transform=vt)};return new a(function(C){if(u&&d.indexOf(u)===-1){C(y);return}var f=function et(){L=!1,n.zoomed.removeEventListener("transitionend",et),n.original.dispatchEvent(W("medium-zoom:opened",{detail:{zoom:y}})),C(y)};if(n.zoomed){C(y);return}if(u)n.original=u;else if(d.length>0){var D=d;n.original=D[0]}else{C(y);return}if(n.original.dispatchEvent(W("medium-zoom:open",{detail:{zoom:y}})),A=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,L=!0,n.zoomed=se(n.original),document.body.appendChild(z),p.template){var T=Y(p.template)?p.template:document.querySelector(p.template);n.template=document.createElement("div"),n.template.appendChild(T.content.cloneNode(!0)),document.body.appendChild(n.template)}if(document.body.appendChild(n.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),n.original.classList.add("medium-zoom-image--hidden"),n.zoomed.classList.add("medium-zoom-image--opened"),n.zoomed.addEventListener("click",F),n.zoomed.addEventListener("transitionend",f),n.original.getAttribute("data-zoom-src")){n.zoomedHd=n.zoomed.cloneNode(),n.zoomedHd.removeAttribute("srcset"),n.zoomedHd.removeAttribute("sizes"),n.zoomedHd.src=n.zoomed.getAttribute("data-zoom-src"),n.zoomedHd.onerror=function(){clearInterval(B),console.warn("Unable to reach the zoom image target "+n.zoomedHd.src),n.zoomedHd=null,b()};var B=setInterval(function(){n.zoomedHd.complete&&(clearInterval(B),n.zoomedHd.classList.add("medium-zoom-image--opened"),n.zoomedHd.addEventListener("click",F),document.body.appendChild(n.zoomedHd),b())},10)}else if(n.original.hasAttribute("srcset")){n.zoomedHd=n.zoomed.cloneNode(),n.zoomedHd.removeAttribute("sizes"),n.zoomedHd.removeAttribute("loading");var N=n.zoomedHd.addEventListener("load",function(){n.zoomedHd.removeEventListener("load",N),n.zoomedHd.classList.add("medium-zoom-image--opened"),n.zoomedHd.addEventListener("click",F),document.body.appendChild(n.zoomedHd),b()})}else b()})},F=function(){return new a(function(c){if(L||!n.original){c(y);return}var u=function b(){n.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(n.zoomed),n.zoomedHd&&document.body.removeChild(n.zoomedHd),document.body.removeChild(z),n.zoomed.classList.remove("medium-zoom-image--opened"),n.template&&document.body.removeChild(n.template),L=!1,n.zoomed.removeEventListener("transitionend",b),n.original.dispatchEvent(W("medium-zoom:closed",{detail:{zoom:y}})),n.original=null,n.zoomed=null,n.zoomedHd=null,n.template=null,c(y)};L=!0,document.body.classList.remove("medium-zoom--opened"),n.zoomed.style.transform="",n.zoomedHd&&(n.zoomedHd.style.transform=""),n.template&&(n.template.style.transition="opacity 150ms",n.template.style.opacity=0),n.original.dispatchEvent(W("medium-zoom:close",{detail:{zoom:y}})),n.zoomed.addEventListener("transitionend",u)})},q=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.target;return n.original?F():P({target:u})},I=function(){return p},v=function(){return d},E=function(){return n.original},d=[],R=[],L=!1,A=0,p=e,n={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?p=t:(t||typeof t=="string")&&S(t),p=O({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},p);var z=ee(p.background);document.addEventListener("click",i),document.addEventListener("keyup",r),document.addEventListener("scroll",o),window.addEventListener("resize",F);var y={open:P,close:F,toggle:q,update:l,clone:h,attach:S,detach:m,on:w,off:$,getOptions:I,getImages:v,getZoomedImage:E};return y};function ie(s,t){t===void 0&&(t={});var e=t.insertAt;if(!(!s||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=s:i.appendChild(document.createTextNode(s))}}var oe=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";ie(oe);const dt=ae,re={messages:{en:{title:"Key Performance Indicators"}}},ne=k({name:"TopsheetsFinder",i18n:re,components:{TopSheet:Gt},props:{fileSystemConfig:{type:Object,required:!0},subfolder:{type:String,required:!0},files:{type:Array,required:!0}},computed:{fileApi(){return new V(this.fileSystemConfig)}},data:()=>({allConfigFiles:{},topsheets:[]}),watch:{subfolder(){this.filesUpdated()},files(){this.filesUpdated()}},methods:{async findTopsheetsForThisFolder(){return this.allConfigFiles=await this.fileApi.findAllYamlConfigs(this.subfolder),Object.values(this.allConfigFiles.topsheets)},async filesUpdated(){this.files.length&&(this.topsheets=await this.findTopsheetsForThisFolder())}}});var le=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"topsheets-finder curate-content"},t._l(t.topsheets,function(a){return e("top-sheet",{key:a,attrs:{fileSystemConfig:t.fileSystemConfig,subfolder:t.subfolder,files:t.files,yaml:a,allConfigFiles:t.allConfigFiles}})}),1)},ce=[];var de=_(ne,le,ce,!1,null,"2ec385c7",null,null);const ut=de.exports,ue={messages:{en:{Maps:"Maps",Images:"Images",Analysis:"Analysis",Files:"Files",Folders:"Folders",Topsheet:"Topsheet"},de:{Maps:"Karten",Images:"Bilder",Analysis:"Ergebnisse",Files:"Dateien",Folders:"Ordner",Topsheet:"Topsheet"}}},he={"":"#118860","aggregate-od":"#E98B52","vehicle-anim":"#330033","x-y-t":"#583270","carrier-viewer":"#c97A2C",events:"#4400ff",hexagons:"#900564","area-map":"#c94264",network:"#894654",sankey:"#D8A672",summary:"#2EA95B",transit:"#3B6FE4"},me=k({name:"FolderBrowser",i18n:ue,components:Object.assign({TopsheetsFinder:ut},X),props:{root:{type:String,required:!0},allConfigFiles:{type:Object,required:!0},xsubfolder:String},data:()=>({globalState:g.state,summaryYamlFilename:"viz-summary.yml",mdRenderer:new G({html:!0,linkify:!0,typographer:!0}),myState:{errorStatus:"",folders:[],files:[],isLoading:!1,readme:"",svnProject:null,svnRoot:void 0,subfolder:"",vizes:[],summary:!1,finalFolder:""}}),computed:{vizImages(){const s={};for(let t=0;t<this.myState.vizes.length;t++)this.myState.vizes[t].component==="image-view"&&(s[t]=this.myState.vizes[t]);return s},vizMaps(){const s={};for(let t=0;t<this.myState.vizes.length;t++)this.myState.vizes[t].component!=="image-view"&&(s[t]=this.myState.vizes[t]);return s}},methods:{cleanName(s){return decodeURIComponent(s)},getFileSystem(s){const t=g.state.svnProjects.filter(e=>e.slug===s);if(t.length===0)throw console.log("no such project"),Error;return t[0]},clickedVisualization(s){const t=this.myState.vizes[s];if(t.component==="image-view"||!this.myState.svnProject)return;const e={root:this.myState.svnProject.slug,xsubfolder:this.myState.subfolder,subfolder:this.myState.subfolder,yamlConfig:t.config,thumbnail:!1};this.$emit("navigate",{component:t.component,props:e})},updateTitle(s,t){this.myState.vizes[s].title=t},async showReadme(){if(!this.myState.svnRoot)return;this.myState.readme="";const s="readme.md",t=this.myState.files.map(e=>e.toLocaleLowerCase()).indexOf(s);if(t>-1){const e=this.myState.files[t];try{const a=await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+e);this.myState.readme=this.mdRenderer.render(a)}catch{}}},buildShowEverythingView(){for(const s of this.globalState.visualizationTypes.values()){const t=j(this.myState.files,s.filePatterns,{nocase:!0});for(const e of t)this.myState.vizes.push({component:s.kebabName,config:e,title:".."})}},async buildCuratedSummaryView(){if(!this.myState.svnRoot)return;const s=Q.parse(await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+this.summaryYamlFilename));for(const t of s.plugins){const e=this.globalState.visualizationTypes.get(t);if(e)if(s[e.kebabName])for(const a of s[e.kebabName]){const i=await this.findMatchingFiles(a);for(const o of i)this.myState.vizes.push({component:e.kebabName,config:o,title:o})}else{const a=j(this.myState.files,e.filePatterns);for(const i of a)this.myState.vizes.push({component:e.kebabName,config:i,title:".."})}}},async findMatchingFiles(s){if(this.myState.files.indexOf(s)>-1)return[s];const t=j(this.myState.files,s);if(t.length)return t;if(!this.myState.svnRoot)return[];try{const e=s.split("/"),a=this.myState.subfolder+"/"+e[0];console.log(a);const i=await this.myState.svnRoot.getDirectory(a);return j(i.files,e[1]).map(r=>e[0]+"/"+r)}catch{}return[]},async fetchFolderContents(){if(!this.myState.svnRoot)return[];this.myState.isLoading=!0,this.myState.errorStatus="",this.myState.files=[];try{const s=await this.myState.svnRoot.getDirectory(this.myState.subfolder),t=s.dirs.filter(o=>!o.startsWith(".")).sort(),e=s.files.filter(o=>!o.startsWith(".")).sort(),a=Object.assign({},this.allConfigFiles.vizes);for(const o of e)a[o]=o;const i=Object.values(a);this.myState.errorStatus="",this.myState.folders=[" UP"].concat(t),this.myState.files=i}catch(s){const t=s;console.log("BAD PAGE"),console.log({eeee:t}),this.myState.folders=[],this.myState.files=[],this.myState.errorStatus="<h3>",t.status&&(this.myState.errorStatus+=`${t.status} `),t.statusText&&(this.myState.errorStatus+=`${t.statusText}`),this.myState.errorStatus==="<h3>"&&(this.myState.errorStatus+="Error"),this.myState.errorStatus+="</h3>",t.url&&(this.myState.errorStatus+=`<p>${t.url}</p>`),t.message&&(this.myState.errorStatus+=`<p>${t.message}</p>`),this.myState.errorStatus==="<h3>Error</h3>"&&(this.myState.errorStatus=""+t),this.myState.svnProject&&(this.myState.errorStatus+=`<p><i>${this.myState.svnProject.baseURL}${this.myState.subfolder}</i></p>`),this.myState.svnProject&&this.myState.svnProject.needPassword&&t.status===401&&g.commit("requestLogin",this.myState.svnProject.slug)}finally{this.myState.isLoading=!1}},openOutputFolder(s){if(this.myState.isLoading||!this.myState.svnProject)return;if(s===" UP"){this.$emit("up");return}let t=s===".."?this.myState.subfolder.substring(0,this.myState.subfolder.lastIndexOf("/")):this.myState.subfolder+"/"+s;t.startsWith("/")&&(t=t.slice(1));const e={root:this.myState.svnProject.slug,xsubfolder:t};!t&&!this.myState.subfolder?this.$emit("navigate",{component:"SplashPage",props:{}}):this.$emit("navigate",{component:"TabbedDashboardView",props:e})},getTabColor(s){return{backgroundColor:he[s]||"#8778BB"}},updateRoute(){const s=this.getFileSystem(this.root);this.myState.svnProject=s,this.myState.subfolder=this.xsubfolder||"",this.myState.readme="",this.myState.svnProject&&(this.myState.svnRoot=new V(this.myState.svnProject),this.fetchFolderContents())}},watch:{"globalState.colorScheme"(){this.fetchFolderContents()},xsubfolder(){this.updateRoute()},allConfigFiles(){this.updateRoute()},"globalState.authAttempts"(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},async"myState.files"(){if(this.myState.vizes=[],this.myState.files.length!==0){this.showReadme(),this.myState.summary=this.myState.files.indexOf(this.summaryYamlFilename)!==-1,this.myState.summary?await this.buildCuratedSummaryView():this.buildShowEverythingView(),await this.$nextTick();try{setTimeout(()=>{dt(".medium-zoom",{background:"#333344"})},250)}catch{}}}},mounted(){this.updateRoute()}});var fe=function(){var a,i;var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"folder-browser"},[t.myState.errorStatus?e("div",{staticClass:"stripe details"},[e("div",{staticClass:"vessel"},[e("div",{staticClass:"badnews",domProps:{innerHTML:t._s(t.myState.errorStatus)}})])]):e("div",{staticClass:"stripe details"},[e("div",{staticClass:"vessel"},[e("div",{staticClass:"curated-sections"},[t.myState.folders.length?e("h3",{staticClass:"curate-heading"},[t._v(" "+t._s(t.$t("Folders")))]):t._e(),t.myState.folders.length?e("div",{staticClass:"curate-content"},[e("div",{staticClass:"folder-table"},t._l(t.myState.folders,function(o,r){return e("div",{key:o.name,staticClass:"folder",class:{fade:t.myState.isLoading,"up-folder":r==0},on:{click:function(l){return t.openOutputFolder(o)}}},[e("p",[e("i",{staticClass:"fa",class:r==0?"fa-arrow-up":"fa-folder-open"}),t._v(" "+t._s(t.cleanName(o)))])])}),0)]):t._e(),t.myState.readme?e("div",{staticClass:"readme-header markdown"},[e("div",{staticClass:"curate-content markdown",domProps:{innerHTML:t._s(t.myState.readme)}})]):t._e(),Object.keys(t.vizMaps).length?e("div",{staticClass:"section-maps"},[e("h3",{staticClass:"curate-heading"},[t._v(t._s(t.$t("Maps")))]),e("div",{staticClass:"curate-content"},[e("div",{staticClass:"viz-table"},t._l(Object.entries(t.vizMaps),function([o,r]){return e("div",{key:o,staticClass:"viz-grid-item",on:{click:function(l){return t.clickedVisualization(o)}}},[e("div",{staticClass:"viz-frame"},[e("p",{staticClass:"v-title"},[e("b",[t._v(t._s(r.title))])]),e("p",{staticClass:"v-filename"},[t._v(t._s(r.config))]),e("p",{staticClass:"v-plugin",style:t.getTabColor(r.component)},[t._v(t._s(r.component||"dashboard"))]),e(r.component,{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],tag:"component",staticClass:"viz-frame-component",style:{"pointer-events":"none"},attrs:{root:t.myState.svnProject.slug,subfolder:t.myState.subfolder,yamlConfig:r.config,thumbnail:!0,fileApi:t.myState.svnRoot},on:{title:function(l){return t.updateTitle(o,l)}}})],1)])}),0)])]):t._e(),Object.keys(t.vizImages).length?e("div",{staticClass:"section-images"},[e("h3",{staticClass:"curate-heading"},[t._v(t._s(t.$t("Images")))]),e("div",{staticClass:"curate-content"},[e("div",{staticClass:"viz-image-table"},t._l(Object.entries(t.vizImages),function([o,r]){return e("div",{key:o,staticClass:"viz-image-grid-item",on:{click:function(l){return t.clickedVisualization(o)}}},[e("div",{staticClass:"viz-image-frame"},[e(r.component,{tag:"component",staticClass:"viz-image-frame-component",style:{"pointer-events":"auto"},attrs:{root:t.myState.svnProject.slug,subfolder:t.myState.subfolder,yamlConfig:r.config,thumbnail:!0,fileApi:t.myState.svnRoot},on:{title:function(l){return t.updateTitle(o,l)}}}),e("p",[t._v(t._s(r.title))])],1)])}),0)])]):t._e(),(i=(a=t.myState)==null?void 0:a.svnProject)!=null&&i.baseURL?e("div",{staticClass:"files-section"},[t.myState.files.length?e("h3",{staticClass:"curate-heading"},[t._v(t._s(t.$t("Files")))]):t._e(),t.myState.files.length?e("div",{staticClass:"curate-content"},[e("div",{staticClass:"file-table"},t._l(t.myState.files,function(o){return e("div",{key:o,staticClass:"file",class:{fade:t.myState.isLoading}},[e("a",{attrs:{href:`${t.myState.svnProject.baseURL}/${t.myState.subfolder}/${o}`}},[t._v(t._s(t.cleanName(o)))])])}),0)]):t._e()]):t._e()])])])])},ge=[];var pe=_(me,fe,ge,!1,null,"a5eb06ba",null,null);const Pt=pe.exports,ve={messages:{en:{sync:"Sync folders",theme:"Light/Dark",lang:"EN/DE",split:"Split view"},de:{sync:"Sync",theme:"Hell/Dunkel",lang:"DE/EN",split:"Aufteilen"}}},be=k({name:"ErrorPanel",i18n:ve,data:()=>({state:g.state,showDescription:!1,descriptionIndexListWarning:[],descriptionIndexListError:[],isError:!1}),watch:{"$route.path"(){this.clearAllButtons()}},computed:{headerTextColor(){let s={};return this.state.statusWarnings.length&&(s={color:"#fe8"}),this.state.statusErrors.length&&(s={color:"#f66"}),s}},methods:{cleanError(s){return s?s.startsWith("Error: ")?s.slice(7):s:""},clearAllButtons(){this.$store.commit("clearAllErrors"),this.$emit("activate",{name:"Files",class:"BrowserPanel",onlyIfVisible:!0})},toggleShowDescription(s,t){if(this.isError=t,t)if(this.descriptionIndexListError.includes(s)){var e=this.descriptionIndexListError.indexOf(s);this.descriptionIndexListError.splice(e,1)}else this.descriptionIndexListError.push(s);else if(this.descriptionIndexListWarning.includes(s)){var e=this.descriptionIndexListWarning.indexOf(s);this.descriptionIndexListWarning.splice(e,1)}else this.descriptionIndexListWarning.push(s)}}});var ye=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[e("div",{staticClass:"warnings"},[!t.state.statusErrors.length&&!t.state.statusWarnings.length?e("div",{staticClass:"no-error"},[e("p",{staticClass:"check"},[t._v("☑️")]),e("p",[t._v("No issues for this page.")])]):e("div",{staticClass:"has-errors"},[e("div",{staticClass:"clear-button"},[t.state.statusErrors.length||t.state.statusWarnings.length?e("b-button",{staticClass:"is-small",attrs:{type:"is-warning is-outlined",expanded:""},on:{click:function(a){return t.clearAllButtons()}}},[t._v("Clear all messages")]):t._e()],1),e("div",{staticClass:"message-area"},[t.state.statusErrors.length?e("h3",[t._v("Errors: "+t._s(t.state.statusErrors.length))]):t._e(),t._l(t.state.statusErrors,function(a,i){return e("div",{staticClass:"single-message"},[e("p",{domProps:{innerHTML:t._s(t.cleanError(a.msg))},on:{click:function(o){return t.toggleShowDescription(i,!0)}}}),t.descriptionIndexListError.includes(i)?e("div",{staticClass:"description"},[e("p",{domProps:{innerHTML:t._s(a.desc)}})]):t._e()])}),t.state.statusWarnings.length?e("h3",[t._v("Warnings: "+t._s(t.state.statusWarnings.length))]):t._e(),t._l(t.state.statusWarnings,function(a,i){return e("div",{staticClass:"single-message"},[e("p",{domProps:{innerHTML:t._s(a.msg)},on:{click:function(o){return t.toggleShowDescription(i,!1)}}}),t.descriptionIndexListWarning.includes(i)?e("div",{staticClass:"description"},[e("p",{domProps:{innerHTML:t._s(a.desc)}})]):t._e()])})],2)])])])},_e=[];var Se=_(be,ye,_e,!1,null,"b2378bec",null,null);const ht=Se.exports,Ce={messages:{en:{},de:{}}},we=Object.assign({ErrorPanel:ht}),ke=k({name:"ProjectLeftPanel",i18n:Ce,components:we,props:{currentFolder:{type:String,required:!0},projectFolder:{type:String,required:!0},navRoot:{type:String,required:!1}},data:()=>({globalState:g.state,subfolder:"",root:"",summaryYamlFilename:"viz-summary.yml",highlightedViz:-2,allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],errorStatus:"",folders:[],isLoading:!1}),mounted(){},watch:{"globalState.leftNavItems"(){console.log("CHANGED!!!")},subfolder(){this.updateRoute()}},computed:{fileSystem(){const s=this.$store.state.svnProjects.filter(t=>t.slug===this.navRoot);if(s.length===0)throw console.log("no such project"),Error;return s[0]},topItems(){var s;return((s=this.globalState.leftNavItems)==null?void 0:s.top)||[]},middleItems(){var s;return((s=this.globalState.leftNavItems)==null?void 0:s.middle)||[]},bottomItems(){var s;return((s=this.globalState.leftNavItems)==null?void 0:s.bottom)||[]},hasErrors(){return this.globalState.statusErrors.length>0}},methods:{updateLanguage(){this.$store.commit("setLocale",this.$store.state.locale=="en"?"de":"en"),this.$root.$i18n.locale=this.$store.state.locale},hasLabel(s){return s.text||s.text_de||s.text_en},getLabel(s){let t="";return this.$store.state.locale==="de"?t=s.text_de||s.text||s.text_en||"item":t=s.text_en||s.text||s.text_de||"item",t},getUrl(s){return s.startsWith("http")?s:`${this.fileSystem.baseURL}${s}`},getStyle(s,t){let e={};return s.style&&Object.assign(e,s.style),!t||!this.currentFolder.length||("/"+this.currentFolder).endsWith(s.url)&&(e.backgroundColor="#e3e3e0",e.borderRadius="4px",e.color="black"),e},navigate(s){if(s.startsWith("http"))window.location.href=s;else{const t=s.startsWith("/")?s:`${this.projectFolder}/${s}`,e={root:this.navRoot||"",xsubfolder:t,thumbnail:!1};this.$emit("navigate",{component:"TabbedDashboardView",props:e})}},updateRoute(){this.root&&(this.subfolder=this.subfolder||"",this.highlightedViz=-2)},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},updateShortcuts(){const s=this.globalState.svnProjects.filter(t=>!t.hidden&&!t.slug.startsWith("fs"));this.allRoots=s},cleanName(s){return decodeURIComponent(s)},getFileSystem(s){const t=g.state.svnProjects.filter(e=>e.slug===s);if(t.length===0)throw console.log("no such project"),Error;return t[0]},clickedOnFolder(s){const t={component:"TabbedDashboardView",props:{root:s.root,xsubfolder:""}};this.$emit("navigate",t)},clickedLogo(){this.$router.push("/")}}});var xe=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[e("div",{staticClass:"sw-leftpanel-top"},t._l(t.topItems,function(a,i){return e("div",{key:`top-${i}`,staticClass:"span"},[a.image?e("div",{staticClass:"image-top-thing"},[a.url?e("a",{on:{click:function(o){return t.navigate(a.url)}}},[e("img",{staticClass:"sw-nav-item",style:t.getStyle(a),attrs:{src:t.getUrl(a.image)}})]):e("img",{staticClass:"sw-nav-item",style:t.getStyle(a),attrs:{src:t.getUrl(a.image)}})]):a.section?e("h3",{staticClass:"sw-nav-item"},[t._v(t._s(t.getLabel(a)))]):t.hasLabel(a)?e("div",{staticClass:"sw-nav-item"},[a.url&&a.url.startsWith("http")?e("p",[e("a",{attrs:{href:a.url}},[t._v(t._s(t.getLabel(a)))])]):a.url?e("p",[e("a",{on:{click:function(o){return t.navigate(a.url)}}},[t._v(t._s(t.getLabel(a)))])]):e("p",[t._v(t._s(t.getLabel(a)))])]):t._e()])}),0),e("div",{staticClass:"sw-leftpanel-middle"},t._l(t.middleItems,function(a,i){return e("div",{key:`middle-${i}`,staticClass:"span",style:t.getStyle(a)},[a.image?e("img",{staticClass:"sw-nav-item",style:t.getStyle(a),attrs:{src:t.getUrl(a.image)}}):a.section?e("h3",{staticClass:"sw-nav-item",style:t.getStyle(a)},[t._v(t._s(t.getLabel(a)))]):t.hasLabel(a)?e("div",{staticClass:"sw-nav-item",style:t.getStyle(a)},[a.url?e("p",[e("a",{style:t.getStyle(a,!0),on:{click:function(o){return t.navigate(a.url)}}},[t._v(t._s(t.getLabel(a)))])]):e("p",{style:t.getStyle(a)},[t._v(t._s(t.getLabel(a)))])]):t._e()])}),0),e("div",{staticClass:"sw-leftpanel-bottom"},t._l(t.bottomItems,function(a,i){return e("div",{key:`bottom-${i}`,staticClass:"span"},[a.image?e("img",{staticClass:"sw-nav-item",style:t.getStyle(a),attrs:{src:t.getUrl(a.image)}}):a.section?e("h3",{staticClass:"sw-nav-item"},[t._v(t._s(t.getLabel(a)))]):t.hasLabel(a)?e("div",{staticClass:"sw-nav-item"},[a.url?e("p",[e("a",{on:{click:function(o){return t.navigate(a.url)}}},[t._v(t._s(t.getLabel(a)))])]):e("p",[t._v(t._s(t.getLabel(a)))])]):t._e()])}),0)])},$e=[];var Fe=_(ke,xe,$e,!1,null,"aaa58695",null,null);const De=Fe.exports,Pe={messages:{en:{},de:{}}},Re=k({name:"BrowserPanel",i18n:Pe,components:{},data:()=>({globalState:g.state,addKey:"",addNickname:"",addUrl:"",subfolder:"",root:"",highlightedViz:-2,errorStatus:"",servers:{},serverNames:[],isLoading:!1,showAddResource:!1}),mounted(){this.updateShortcuts();const s=localStorage.getItem("simrunner-servers")||"{}";this.servers=JSON.parse(s),this.serverNames=Object.keys(this.servers).sort(),this.serverNames.length||(this.showAddResource=!0)},watch:{"globalState.svnProjects"(){this.updateShortcuts()},subfolder(){this.updateRoute()}},computed:{},methods:{addServer(){if(!this.addUrl||!this.addKey)return;console.log("ADD: ",this.addUrl,this.addKey,this.addNickname);const t={serverNickname:this.cleanName(this.addNickname||this.addUrl),key:this.addKey,url:this.addUrl};this.servers[t.serverNickname]=t,this.servers=Object.assign({},this.servers),this.serverNames=Object.keys(this.servers).sort(),localStorage.setItem("simrunner-servers",JSON.stringify(this.servers))},removeServer(s){delete this.servers[s],this.serverNames=Object.keys(this.servers).sort(),localStorage.setItem("simrunner-servers",JSON.stringify(this.servers))},updateRoute(){this.root&&(this.getFileSystem(this.root),this.highlightedViz=-2)},updateShortcuts(){this.globalState.svnProjects.filter(s=>!s.hidden&&!s.slug.startsWith("fs"))},cleanName(s){return decodeURIComponent(s)},getFileSystem(s){const t=g.state.svnProjects.filter(e=>e.slug===s);if(t.length===0)throw console.log("no such project"),Error;return t[0]},clickedOnServer(s){const t=this.servers[s],e={component:"SimRunner",props:Object.assign({},t,{root:"",xsubfolder:""})};this.$emit("navigate",e)},dragEnd(){this.$emit("isDragging",!1)},dragStart(s,t){var l;this.$emit("isDragging",!0);const e={component:"TabbedDashboardView",props:{}},a=this.root||t,i=this.root?t:"",o=Object.assign({},e,{root:a,subfolder:i,xsubfolder:i});o.yamlConfig=o.config,delete o.config;const r=JSON.stringify(o);(l=s.dataTransfer)==null||l.setData("bundle",r)}}});var Te=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[t._m(0),e("div",{staticClass:"middle-panel"},[t._m(1),e("h3",{staticStyle:{"margin-top":"1rem"}},[t._v("Connected resources")]),e("div",{staticClass:"curate-content"},[e("div",{staticClass:"folder-table"},t._l(t.serverNames,function(a){return e("div",{key:a,staticClass:"folder",on:{click:function(i){return t.clickedOnServer(a)}}},[e("i",{staticClass:"fa fa-server"}),e("p",[t._v(" "+t._s(t.cleanName(a)))]),e("i",{staticClass:"fa fa-times",staticStyle:{"margin-left":"auto"},on:{click:function(i){return t.removeServer(a)}}})])}),0)]),e("div",{staticClass:"connect-here"},[e("h3",{staticStyle:{"margin-top":"1rem"},on:{click:function(a){t.showAddResource=!t.showAddResource}}},[t._v("Add new connection"),e("i",{staticClass:"fa",class:{"fa-times":t.showAddResource,"fa-arrow-up":!t.showAddResource},staticStyle:{float:"right"}})]),t.showAddResource?e("div",{staticClass:"add-details"},[e("p",[t._v("Label")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"server",maxlength:"255"},model:{value:t.addNickname,callback:function(a){t.addNickname=a},expression:"addNickname"}}),e("p",[t._v("Server URL")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"https://server",maxlength:"255"},model:{value:t.addUrl,callback:function(a){t.addUrl=a},expression:"addUrl"}}),e("p",[t._v("Authentication Key")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"user-123456",maxlength:"255"},model:{value:t.addKey,callback:function(a){t.addKey=a},expression:"addKey"}}),e("b-button",{staticClass:"add-button is-small",attrs:{type:"is-warning"},on:{click:t.addServer}},[t._v("  Add  ")])],1):t._e()])])])},je=[function(){var s=this,t=s._self._c;return s._self._setupProxy,t("div",{staticClass:"top-panel"},[t("h4",[s._v("Runs")])])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("div",{staticClass:"hint-clicks",staticStyle:{"margin-bottom":"1rem",opacity:"1"}},[t("p",[s._v("Connect to SimWrapper cloud resources here.")])])}];var Le=_(Re,Te,je,!1,null,"540d8de2",null,null);const Ee=Le.exports,Ne=k({name:"FileSystemComponents",data:()=>({sources:[]}),mounted(){this.sources=g.state.svnProjects.filter(s=>!s.hidden&&!s.slug.startsWith("fs"))},methods:{openProjectPage(s){const t=Object.assign({},s);t.component="TabbedDashboardView",t.props={root:s.slug,xsubfolder:""},this.$emit("navigate",t)},openProjectTab(s){window.open(s,"_blank")}}});var Ae=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"svn-projects"},t._l(t.sources,function(a){return e("div",{key:a.url,staticClass:"project",on:{click:[function(i){return t.openProjectPage(a)},function(i){return i.metaKey?t.openProjectTab(a):null},function(i){return i.ctrlKey?t.openProjectTab(a):null}],mouseup:function(i){return"button"in i&&i.button!==1?null:t.openProjectTab(a)}}},[e("div",{staticClass:"desc"},[e("h3",[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.description))])])])}),0)},ze=[];var Oe=_(Ne,Ae,ze,!1,null,"c18a2dce",null,null);const mt=Oe.exports,Ie="/",Be=[".nodashboards","nodashboards","nodashboards.txt"],We={messages:{en:{Maps:"Maps & Dashboards",Images:"Images",Analysis:"Analysis",Files:"Files",Folders:"Folders",Topsheet:"Table",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{Maps:"Karten",Images:"Bilder",Analysis:"Ergebnisse",Files:"Dateien",Folders:"Ordner",Topsheet:"Tabelle"}}},Me={"":"#118860","aggregate-od":"#E98B52","vehicle-anim":"#330033","x-y-t":"#583270",carriers:"#c97A2C",events:"#4400ff",hexagons:"#900564",map:"#c94264",network:"#894654",sankey:"#D8A672",summary:"#2EA95B",transit:"#3B6FE4"},Ue=Object.assign({FileSystemProjects:mt,TopsheetsFinder:ut},X),He=k({name:"BrowserPanel",i18n:We,components:Ue,data:()=>({globalState:g.state,subfolder:"/",root:"",summaryYamlFilename:"viz-summary.yml",highlightedViz:-2,needDoubleClickHint:!1,allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],mdRenderer:new G({html:!0,linkify:!0,typographer:!0}),myState:{errorStatus:"",folders:[],files:[],isLoading:!1,readme:"",svnProject:null,svnRoot:void 0,subfolder:"",vizes:[],summary:!1},clicks:0,clickTimer:{}}),mounted(){this.updateShortcuts(),this.getRootAndRoute(this.$route.params.pathMatch)},watch:{"globalState.svnProjects"(){this.updateShortcuts()},"globalState.colorScheme"(){this.fetchFolderContents()},subfolder(){this.updateRoute()},"globalState.authAttempts"(){this.authenticationChanged()},"myState.files"(){this.filesChanged()}},computed:{isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((s,t)=>parseInt(s.key.substring(2))<parseInt(t.key.substring(2))?-1:1)}},methods:{updateRoute(){if(!this.root)return;const s=this.getFileSystem(this.root);this.myState.svnProject=s,this.myState.subfolder=this.subfolder||"",this.myState.readme="",this.highlightedViz=-2,this.myState.svnProject&&(this.myState.svnRoot=new V(this.myState.svnProject,g),this.generateBreadcrumbs(),this.fetchFolderContents())},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},async filesChanged(){this.myState.vizes=[],this.myState.files.length!==0&&(this.showReadme(),this.myState.summary=this.myState.files.indexOf(this.summaryYamlFilename)!==-1,this.myState.summary?await this.buildCuratedSummaryView():this.buildShowEverythingView(),await this.$nextTick(),dt(".medium-zoom",{background:"#444450"}))},updateShortcuts(){const s=this.globalState.svnProjects.filter(t=>!t.hidden&&!t.slug.startsWith("fs"));this.allRoots=s},cleanName(s){return decodeURIComponent(s)},getFileSystem(s){const t=g.state.svnProjects.filter(e=>e.slug===s);if(t.length===0)throw console.log("no such project"),Error;return t[0]},generateBreadcrumbs(){if(!this.myState.svnProject)return[];const s=[{label:"SimWrapper",url:"/"},{label:this.myState.svnProject.name,url:"/"+this.myState.svnProject.slug}],t=this.myState.subfolder.split("/");let e="/";for(const a of t)a&&(e+=a+"/",s.push({label:a,url:"/"+this.myState.svnProject.slug+e}));return g.commit("setBreadCrumbs",s),s},clickedBreadcrumb(s){this.getRootAndRoute(s.url.slice(1))},getRootAndRoute(s){if(!s)return;if(s==="/"){this.root="";return}if(s.startsWith("split/")){console.log("SPLIT"),s.substring(6);return}let t=s,e="";const a=s.indexOf("/");a>-1&&(t=s.substring(0,a),e=s.substring(a+1)),this.root=t,this.subfolder=e},activateVisualization(s){const t=this.myState.vizes[s]||{component:"TabbedDashboardView",title:"Dashboard"};if(t.component==="image-view"||!this.myState.svnProject)return;this.highlightedViz=-2;const e=this.myState.subfolder.replaceAll("//","/"),a={root:this.myState.svnProject.slug,xsubfolder:e,subfolder:e,yamlConfig:t.config,thumbnail:!1};this.$emit("navigate",{component:t.component,props:a})},updateTitle(s,t){this.myState.vizes[s].title=t},configureSources(){this.$emit("activate",{name:"Settings",class:"SettingsPanel"})},getTabColor(s){return{backgroundColor:Me[s]||"#8778BB"}},async showReadme(){this.myState.readme="";const s="readme.md";if(this.myState.files.map(t=>t.toLocaleLowerCase()).indexOf(s)>-1){if(!this.myState.svnRoot)return;const t=await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+s);this.myState.readme=this.mdRenderer.render(t)}},buildShowEverythingView(){for(const s of this.globalState.visualizationTypes.values()){const t=j(this.myState.files,s.filePatterns);for(const e of t)this.myState.vizes.push({component:s.kebabName,config:e,title:".."})}},async buildCuratedSummaryView(){if(!this.myState.svnRoot)return;const s=Q.parse(await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+this.summaryYamlFilename));for(const t of s.plugins){const e=this.globalState.visualizationTypes.get(t);if(e)if(s[e.kebabName])for(const a of s[e.kebabName]){const i=await this.findMatchingFiles(a);for(const o of i)this.myState.vizes.push({component:e.kebabName,config:o,title:o})}else{const a=j(this.myState.files,e.filePatterns);for(const i of a)this.myState.vizes.push({component:e.kebabName,config:i,title:".."})}}},async findMatchingFiles(s){if(this.myState.files.indexOf(s)>-1)return[s];const t=j(this.myState.files,s);if(t.length)return t;if(!this.myState.svnRoot)return[];try{const e=s.split("/"),a=this.myState.subfolder+"/"+e[0];console.log(a);const i=await this.myState.svnRoot.getDirectory(a);return j(i.files,e[1]).map(r=>e[0]+"/"+r)}catch{}return[]},async fetchFolderContents(){if(!this.myState.svnRoot)return[];this.myState.isLoading=!0,this.myState.errorStatus="",this.myState.files=[];try{this.allConfigFiles=await this.findAllConfigsAndDashboards();const s=await this.myState.svnRoot.getDirectory(this.myState.subfolder),t=s.dirs.filter(o=>!o.startsWith(".")).sort(),e=s.files.filter(o=>!o.startsWith(".")).sort(),a=Object.assign({},this.allConfigFiles.vizes);for(const o of e)a[o]=o;const i=Object.values(a);this.myState.errorStatus="",this.myState.folders=["UP"].concat(t),this.myState.files=i}catch{const t=this.myState.subfolder.lastIndexOf("/");if(t>-1){this.subfolder=this.myState.subfolder.slice(0,t);return}else{this.subfolder="";return}}finally{this.myState.isLoading=!1}},clickedOnFolder(s){this.needDoubleClickHint=!1;const{folder:t,root:e,i:a}=s;if(e){this.root=e,this.subfolder="",this.updateRoute();return}if(this.myState.isLoading||!this.myState.svnProject)return;if(a==0&&t==="UP"){if(this.subfolder==="/"||this.subfolder==="")this.root="";else{const o=this.subfolder.lastIndexOf("/");this.subfolder=o>-1?this.subfolder.slice(0,o):"/"}return}let i=`${this.subfolder}/${t}`;i.startsWith("/")&&(i=i.slice(1)),this.subfolder=i},dragEnd(){this.$emit("isDragging",!1)},dragStart(s,t){var l;this.$emit("isDragging",!0);const e={component:"TabbedDashboardView",props:{}},a=this.root||t,i=this.root?t:"",o=Object.assign({},e,{root:a,subfolder:i,xsubfolder:i});o.yamlConfig=o.config,delete o.config;const r=JSON.stringify(o);(l=s.dataTransfer)==null||l.setData("bundle",r)},dragBreadCrumb(s,t){let e=t.startsWith("/")?t.slice(1):t;e.endsWith("/")&&(e=e.slice(0,-1));let a=e.indexOf("/")>-1?e.slice(e.indexOf("/")):"";this.dragStart(s,a)},async findAllConfigsAndDashboards(){if(!this.myState.svnRoot)return{dashboards:{},configs:{},vizes:{},topsheets:{}};try{const{files:s}=await this.myState.svnRoot.getDirectory(this.subfolder);let t=!0;Be.forEach(a=>{s.indexOf(a)>-1&&(t=!1)});const e=await this.myState.svnRoot.findAllYamlConfigs(this.subfolder);return t||(e.dashboards={}),e}catch{return{dashboards:{},configs:{},vizes:{},topsheets:{}}}},async clickedBrowseChromeLocalFolder(s){try{const t=await s.handle.requestPermission({mode:"read"});if(console.log(s.handle,t),t!=="granted")return;ct.find(i=>i.slug==s.key)||H(s.handle,s.key);const a={root:s.key};this.clickedOnFolder(a)}catch(t){console.error(""+t)}},async showChromeDirectory(){try{const t=await window.showDirectoryPicker(),e=H(t,null);this.$router.push(`${Ie}${e}/`)}catch{}}}});var Je=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[e("div",{staticClass:"top-panel"},[e("h4",[t._v("Split View")]),t.root?e("div",{staticClass:"trail"},[e("div",{staticClass:"x-home"},[e("p",{on:{click:function(a){return t.clickedBreadcrumb({url:"//"})}}},[e("i",{staticClass:"fa fa-home"})])]),t.root?e("div",{staticClass:"x-breadcrumbs"},t._l(t.globalState.breadcrumbs.slice(1),function(a,i){return e("p",{key:a.url,attrs:{draggable:""},on:{click:function(o){return t.clickedBreadcrumb(a)},dragstart:function(o){return t.dragBreadCrumb(o,a.url)},dragend:t.dragEnd}},[t._v(" • "+t._s(a.label))])}),0):t._e()]):t._e()]),e("div",{staticClass:"middle-panel"},[t._m(0),t.root?e("div",{staticClass:"curated-sections"},[e("h3",{staticClass:"curate-heading",attrs:{draggable:""},on:{dragstart:function(a){return t.dragStart(a,t.subfolder)},dragend:t.dragEnd}},[t._v(t._s(t.globalState.breadcrumbs[t.globalState.breadcrumbs.length-1].label))]),t.myState.folders.length?e("div",{staticClass:"curate-content"},[e("div",{staticClass:"folder-table"},t._l(t.myState.folders,function(a,i){return e("div",{key:a,staticClass:"folder",class:{fade:t.myState.isLoading,upfolder:i==0},attrs:{draggable:""},on:{dragstart:function(o){return t.dragStart(o,`${t.myState.subfolder}/${a}`)},dragend:t.dragEnd,click:function(o){return t.clickedOnFolder({folder:a,i})}}},[e("i",{staticClass:"fa",class:i==0?"fa-arrow-up":"fa-folder-open"}),e("p",[t._v(t._s(t.cleanName(a)))])])}),0),t.myState.folders.length==1?e("p",{staticStyle:{"font-size":"0.9rem",opacity:"0.7",margin:"0.5rem 0","text-align":"right"}},[t._v("No subfolders.")]):t._e()]):t._e()]):e("div",{staticClass:"curated-sections"},[t.isChrome?e("div",{staticClass:"is-chrome"},[e("h3",[t._v("Local Folders")]),t.localFileHandles.length?t._e():e("p",[t._v("Chrome & Edge can browse folders directly:")]),t._l(t.localFileHandles,function(a){return e("div",{key:a.key,staticClass:"project-root local",attrs:{draggable:""},on:{click:function(i){return t.clickedBrowseChromeLocalFolder(a)},dragstart:function(i){return t.dragStart(i,a.slug)},dragend:t.dragEnd}},[e("h5",{staticClass:"remove-local",staticStyle:{flex:"1"}},[t._v(t._s(a.handle.name))]),e("p",[t._v("Local folder")])])}),e("p",{staticClass:"config-sources"},[e("a",{on:{click:t.showChromeDirectory}},[t._v("Add local folder...")])])],2):t._e(),e("h3",{staticStyle:{"margin-top":"1rem"}},[t._v("Data Sources")]),t._l(t.allRoots,function(a){return e("div",{key:a.slug,staticClass:"project-root",attrs:{draggable:""},on:{click:function(i){return t.clickedOnFolder({root:a.slug})},dragstart:function(i){return t.dragStart(i,a.slug)},dragend:t.dragEnd}},[e("h5",[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.description))])])})],2)])])},Ve=[function(){var s=this,t=s._self._c;return s._self._setupProxy,t("div",{staticClass:"hint-clicks",staticStyle:{"margin-bottom":"1rem",opacity:"1"}},[t("p",[t("b",[s._v("Drag a folder ")]),s._v("from here to the main window area to open side‑by‑side.")])])}];var Ge=_(He,Je,Ve,!1,null,"204f8f04",null,null);const qe=Ge.exports,Ke=`
Add any URL-based data provider.
See SimWrapper documentation for details.
`,Ze=k({name:"AddDataSource",props:{},data:()=>({labelField:"",urlField:"",noteField:"",notes:"",mdParser:new G}),mounted(){this.notes=this.mdParser.render(Ke)},watch:{labelField(){this.fixField()}},computed:{isValidURL(){return!(!this.labelField||!this.urlField||!this.urlField.startsWith("http"))}},methods:{addURL(){this.fixField(),console.log("Adding",this.labelField,this.urlField);const s="projectShortcuts";try{let t=localStorage.getItem(s)||"{}",e=JSON.parse(t);e[this.labelField]={name:`${this.labelField}`,slug:`${this.labelField}`,description:this.noteField,baseURL:this.urlField},console.log("NEW ROOTS",e),localStorage.setItem(s,JSON.stringify(e)),g.commit("setURLShortcuts",e)}catch(t){console.error(""+t)}this.$emit("close")},fixField(){this.labelField=this.labelField.toLowerCase().replaceAll(/[^a-z\-0-9@]*/g,"")}}});var Ye=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"add-data-panel"},[t._m(0),e("div",{staticClass:"add"},[e("div",{staticClass:"markdown",domProps:{innerHTML:t._s(t.notes)}}),e("div",{staticClass:"flex-row"},[t._m(1),e("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"e.g. server1",maxlength:"32"},model:{value:t.labelField,callback:function(a){t.labelField=a},expression:"labelField"}})],1),e("div",{staticClass:"flex-row"},[t._m(2),e("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"http://localhost:8001",maxlength:"512"},model:{value:t.urlField,callback:function(a){t.urlField=a},expression:"urlField"}})],1),e("div",{staticClass:"flex-row"},[t._m(3),e("b-input",{staticClass:"flex5",attrs:{size:"is-small",placeholder:"optional",maxlength:"255"},model:{value:t.noteField,callback:function(a){t.noteField=a},expression:"noteField"}})],1),e("div",{staticClass:"flex-row gap"},[e("p",{staticClass:"flex1"},[t._v(" ")]),e("b-button",{attrs:{size:"is-small",type:"is-primary",outlined:"",inverted:""},on:{click:function(a){return t.$emit("close")}}},[t._v("Cancel")]),e("b-button",{staticClass:"is-warning",attrs:{size:"is-small",disabled:!t.isValidURL,type:t.isValidURL?"":"is-outlined"},on:{click:t.addURL}},[t._v("Add Data URL")])],1)])])},Qe=[function(){var s=this,t=s._self._c;return s._self._setupProxy,t("div",{staticClass:"xtitle"},[t("i",{staticClass:"fa fa-plus"}),s._v(" Add Data Source")])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",{staticClass:"flex1"},[t("b",[s._v("Label")])])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",{staticClass:"flex1"},[t("b",[s._v("URL")])])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",{staticClass:"flex1"},[t("b",[s._v("Note")])])}];var Xe=_(Ze,Ye,Qe,!1,null,"330c94d1",null,null);const Rt=Xe.exports,Tt="/assets/SW_logo_white-f31b052f.png",ts="/",es=[".nodashboards","nodashboards","nodashboards.txt"],ss={messages:{en:{Maps:"Maps & Dashboards",Images:"Images",Analysis:"Analysis",Files:"Files",Folders:"Folders",Topsheet:"Table",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{Maps:"Karten",Images:"Bilder",Analysis:"Ergebnisse",Files:"Dateien",Folders:"Ordner",Topsheet:"Tabelle"}}},as={"":"#118860","aggregate-od":"#E98B52","vehicle-anim":"#330033","x-y-t":"#583270",carriers:"#c97A2C",events:"#4400ff",hexagons:"#900564",map:"#c94264",network:"#894654",sankey:"#D8A672",summary:"#2EA95B",transit:"#3B6FE4"};Object.assign({AddDataSource:Rt,FileSystemProjects:mt,TopsheetsFinder:ut,ErrorPanel:ht},X);const is=k({name:"SystemPanel",i18n:ss,components:{AddDataSource:Rt},data:()=>({globalState:g.state,root:"",subfolder:"/",activeSection:"Files",allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},allRoots:[],mdRenderer:new G({html:!0,linkify:!0,typographer:!0}),showAddDataSource:!1,summaryYamlFilename:"viz-summary.yml",logo:Tt,myState:{errorStatus:"",folders:[],files:[],isLoading:!1,readme:"",svnProject:null,svnRoot:void 0,subfolder:"",vizes:[],summary:!1}}),mounted(){this.updateShortcuts(),this.getRootAndRoute(this.$route.params.pathMatch),this.updateFavorites()},watch:{"globalState.svnProjects"(){this.updateShortcuts()},"globalState.colorScheme"(){},subfolder(){},"globalState.authAttempts"(){this.authenticationChanged()},"myState.files"(){this.filesChanged()}},computed:{hasDashboards(){return!!Object.keys(this.allConfigFiles.dashboards).length},isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((s,t)=>parseInt(s.key.substring(2))<parseInt(t.key.substring(2))?-1:1)},hasErrors(){return this.globalState.statusErrors.length>0}},methods:{updateRoute(){if(!this.root)return;const s=this.getFileSystem(this.root);this.myState.svnProject=s,this.myState.subfolder=this.subfolder||"",this.myState.readme="",this.myState.svnProject&&(this.myState.svnRoot=new V(this.myState.svnProject,g))},updateLanguage(){this.$store.commit("setLocale",this.$store.state.locale=="en"?"de":"en"),this.$root.$i18n.locale=this.$store.state.locale},authenticationChanged(){console.log("AUTH CHANGED - Reload"),this.updateRoute()},async filesChanged(){this.myState.vizes=[],this.myState.files.length!==0&&(this.showReadme(),this.myState.summary=this.myState.files.indexOf(this.summaryYamlFilename)!==-1,this.myState.summary||this.buildShowEverythingView(),await this.$nextTick(),dt(".medium-zoom",{background:"#444450"}))},updateShortcuts(){const s=this.globalState.svnProjects.filter(t=>!t.hidden&&!t.slug.startsWith("fs"));this.allRoots=s},async updateFavorites(){try{const s=localStorage.getItem("favoriteLocations")||"[]",t=JSON.parse(s);this.$store.commit("setFavorites",t)}catch{}},clickedDeleteFavorite(s){this.$store.commit("removeFavorite",s)},clickedOnFavorite(s){const t={component:"TabbedDashboardView",props:{root:s.root,xsubfolder:s.subfolder}};this.$emit("navigate",t)},cleanName(s){return decodeURIComponent(s)},getFileSystem(s){const t=g.state.svnProjects.filter(e=>e.slug===s);if(t.length===0)throw console.log("no such project"),Error;return t[0]},getRootAndRoute(s){if(!s)return;if(s==="/"){this.root="";return}if(s.startsWith("split/")){console.log("SPLIT"),s.substring(6);return}let t=s,e="";const a=s.indexOf("/");a>-1&&(t=s.substring(0,a),e=s.substring(a+1)),this.root=t,this.subfolder=e},updateTitle(s,t){this.myState.vizes[s].title=t},getTabColor(s){return{backgroundColor:as[s]||"#8778BB"}},async showReadme(){this.myState.readme="";const s="readme.md";if(this.myState.files.map(t=>t.toLocaleLowerCase()).indexOf(s)>-1){if(!this.myState.svnRoot)return;const t=await this.myState.svnRoot.getFileText(this.myState.subfolder+"/"+s);this.myState.readme=this.mdRenderer.render(t)}},buildShowEverythingView(){for(const s of this.globalState.visualizationTypes.values()){const t=j(this.myState.files,s.filePatterns);for(const e of t)this.myState.vizes.push({component:s.kebabName,config:e,title:".."})}},clickedOnFolder(s){const t={component:"TabbedDashboardView",props:{root:s.root,xsubfolder:""}};this.$emit("navigate",t)},dragEnd(){this.$emit("isDragging",!1)},dragStart(s,t){var i;this.$emit("isDragging",!0);const e=Object.assign({},t,{root:this.root,subfolder:this.myState.subfolder,xsubfolder:this.myState.subfolder});e.yamlConfig=e.config,delete e.config;const a=JSON.stringify(e);(i=s.dataTransfer)==null||i.setData("bundle",a)},clickedLogo(){this.$router.push("/")},async findAllConfigsAndDashboards(){if(!this.myState.svnRoot)return{dashboards:{},configs:{},vizes:{},topsheets:{}};try{const{files:s}=await this.myState.svnRoot.getDirectory(this.subfolder);let t=!0;es.forEach(a=>{s.indexOf(a)>-1&&(t=!1)});const e=await this.myState.svnRoot.findAllYamlConfigs(this.subfolder);return t||(e.dashboards={}),e}catch{return{dashboards:{},configs:{},vizes:{},topsheets:{}}}},async clickedBrowseChromeLocalFolder(s){try{const t=await s.handle.requestPermission({mode:"read"});if(console.log(s.handle,t),t!=="granted")return;ct.find(i=>i.slug==s.key)||H(s.handle,s.key);const a={root:s.key};this.clickedOnFolder(a)}catch(t){console.error(""+t)}},async showChromeDirectory(){try{const t=await window.showDirectoryPicker(),e=H(t,null);this.$router.push(`${ts}${e}/`)}catch{}},async clickedLocalDelete(s){const e=this.$store.state.localFileHandles.filter(a=>a.key!==s.key);await $t("fs",e),this.$store.commit("setLocalFileSystem",e)},async clickedDataSourceDelete(s){console.log({project:s}),this.$store.commit("removeURLShortcut",s.slug)}}});var os=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[e("div",{staticClass:"top-panel"},[e("div",{staticClass:"simwrapper-logo",on:{click:function(a){return t.clickedOnFolder({root:""})}}},[e("img",{attrs:{src:t.logo}})])]),e("div",{staticClass:"middle-panel"},[t.isChrome?e("div",{staticClass:"is-chrome"},[e("h3",[t._v("Local Files")]),e("div",{staticClass:"items"},[t._l(t.localFileHandles,function(a){return e("div",{key:a.key,staticClass:"project-root local",on:{click:function(i){return t.clickedBrowseChromeLocalFolder(a)}}},[e("p",{staticClass:"root",staticStyle:{flex:"1"}},[t._v(t._s(a.handle.name)),e("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),t.clickedLocalDelete(a)}}})])])}),e("div",{staticClass:"project-root open-folder",on:{click:t.showChromeDirectory}},[e("p",{staticClass:"root"},[t._v("Open folder...")]),e("p",{staticClass:"description"},[t._v("This browser can access local folders")])])],2)]):t._e(),e("h3",[t._v("Data Sources")]),t.showAddDataSource?t._e():e("div",{staticClass:"items"},[t._l(t.allRoots,function(a){return e("div",{key:a.slug,staticClass:"project-root",on:{click:function(i){return t.clickedOnFolder({root:a.slug})}}},[e("p",{staticClass:"root"},[t._v(t._s(a.name)),e("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),t.clickedDataSourceDelete(a)}}})]),e("p",{staticClass:"description"},[t._v(t._s(a.description))])])}),e("p",{staticClass:"config-sources"},[e("a",{on:{click:function(a){t.showAddDataSource=!0}}},[e("i",{staticClass:"fa fa-plus"}),t._v(" Add data source...")])])],2),t.showAddDataSource?e("div",{staticClass:"items"},[e("add-data-source",{on:{close:function(a){t.showAddDataSource=!1}}})],1):t._e(),e("h3",[t._v("PINNED")]),e("div",{staticClass:"items"},t._l(t.globalState.favoriteLocations,function(a){return e("div",{key:a.fullPath,staticClass:"project-root",on:{click:function(i){return t.clickedOnFavorite(a)}}},[e("p",{staticClass:"root"},[t._v(t._s(a.label)),e("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),t.clickedDeleteFavorite(a)}}})]),e("p",{staticClass:"description"},[t._v(t._s(a.hint||`${a.root}${a.subfolder}`))])])}),0)])])},rs=[];var ns=_(is,os,rs,!1,null,"fb784618",null,null);const ls=ns.exports;/**
 * filesize
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.1.0
 */const cs="array",ds="bit",_t="bits",us="byte",St="bytes",M="",hs="exponent",ms="function",Ct="iec",fs="Invalid number",gs="Invalid rounding method",at="jedec",ps="object",wt=".",vs="round",bs="s",ys="si",_s="kbit",Ss="kB",Cs=" ",ws="string",ks="0",it={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function jt(s,{bits:t=!1,pad:e=!1,base:a=-1,round:i=2,locale:o=M,localeOptions:r={},separator:l=M,spacer:h=Cs,symbols:S={},standard:m=M,output:w=ws,fullform:$=!1,fullforms:P=[],exponent:F=-1,roundingMethod:q=vs,precision:I=0}={}){let v=F,E=Number(s),d=[],R=0,L=M;m===ys?(a=10,m=at):m===Ct||m===at?a=2:a===2?m=Ct:(a=10,m=at);const A=a===10?1e3:1024,p=$===!0,n=E<0,z=Math[q];if(typeof s!="bigint"&&isNaN(s))throw new TypeError(fs);if(typeof z!==ms)throw new TypeError(gs);if(n&&(E=-E),(v===-1||isNaN(v))&&(v=Math.floor(Math.log(E)/Math.log(A)),v<0&&(v=0)),v>8&&(I>0&&(I+=8-v),v=8),w===hs)return v;if(E===0)d[0]=0,L=d[1]=it.symbol[m][t?_t:St][v];else{R=E/(a===2?Math.pow(2,v*10):Math.pow(1e3,v)),t&&(R=R*8,R>=A&&v<8&&(R=R/A,v++));const y=Math.pow(10,v>0?i:0);d[0]=z(R*y)/y,d[0]===A&&v<8&&F===-1&&(d[0]=1,v++),L=d[1]=a===10&&v===1?t?_s:Ss:it.symbol[m][t?_t:St][v]}if(n&&(d[0]=-d[0]),I>0&&(d[0]=d[0].toPrecision(I)),d[1]=S[d[1]]||d[1],o===!0?d[0]=d[0].toLocaleString():o.length>0?d[0]=d[0].toLocaleString(o,r):l.length>0&&(d[0]=d[0].toString().replace(wt,l)),e&&Number.isInteger(d[0])===!1&&i>0){const y=l||wt,x=d[0].toString().split(y),c=x[1]||M,u=c.length,b=i-u;d[0]=`${x[0]}${y}${c.padEnd(u+b,ks)}`}return p&&(d[1]=P[v]?P[v]:it.fullform[m][v]+(t?ds:us)+(d[0]===1?M:bs)),w===cs?d:w===ps?{value:d[0],symbol:d[1],exponent:v,unit:L}:d.join(h)}const xs={props:{isUploading:{type:Boolean,required:!1}},data(){return{isDragging:!1,showMessage:!1}},methods:{onChange(){const s=this.$refs.file;let t=Array.from(s.files);this.$emit("files",t)},dragover(s){s.preventDefault(),this.isDragging=!0},dragleave(){this.isDragging=!1},drop(s){s.preventDefault();const t=this.$refs.file;t.files=s.dataTransfer.files,this.onChange(),this.isDragging=!1},remove(s){},uploadFiles(){}}};var $s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"dropzone-container",style:t.isDragging&&"border-color: yellow;",on:{dragover:t.dragover,dragleave:t.dragleave,drop:t.drop}},[e("input",{ref:"file",staticClass:"hidden-input hidden-input",attrs:{type:"file",multiple:"",name:"file",id:"fileInput",accept:"*"},on:{change:t.onChange}}),e("label",{staticClass:"file-label",attrs:{for:"fileInput"}},[t.isUploading?e("div",{staticClass:"uploading"},[e("p",[t._v("Files are uploading! Don't navigate away from this page.")])]):t.isDragging?e("div",[t._v("Release file here to add")]):e("div",[t._v("Drag files here"),t._m(0)])])])])},Fs=[function(){var s=this,t=s._self._c;return t("p",[s._v("or"),t("b",[s._v(" click ")]),s._v("to select files to upload")])}];var Ds=_(xs,$s,Fs,!1,null,"836dd054",null,null);const Lt=Ds.exports,Ps=k({name:"EditableField",components:{},props:{value:String},data:()=>({editing:!1,id:`ref-${Math.random()}`}),mounted(){},computed:{},methods:{activateEditor(){this.editing=!0,this.$nextTick(()=>{this.$refs[this.id].focus()})},lostFocus(s){this.editing=!1,this.$emit("input",s.target.value)}}});var Rs=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"editable-field"},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],on:{click:t.activateEditor}},[t._v(t._s(t.value||" -     "))]),t.editing?e("span",{staticClass:"editor"},[e("input",{ref:t.id,staticClass:"finger form-control",attrs:{type:"text"},domProps:{value:t.value},on:{blur:function(a){return t.lostFocus(a)},keydown:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.editing=!1}}})]):t._e()])},Ts=[];var js=_(Ps,Rs,Ts,!1,null,"66bd846d",null,null);const Ls=js.exports;const Es={messages:{en:{},de:{}}},Ns=k({name:"SimRunDetails",i18n:Es,components:{DropFile:Lt,EditableField:Ls,VueGoodTable:Ft},props:{runId:{type:String,required:!0},server:{type:Object,required:!0}},data:()=>({globalState:g.state,editableFields:new Set(["project","script","cRAM","cProcessors","cEmail"]),files:{},isLoading:!0,isUploadingRightNow:new Set,isShowingRunTemplate:!1,job:{},jobScript:"",jobProject:"",showDropZone:!0,statusMessage:""}),mounted(){this.$store.commit("setShowLeftBar",!0),this.setupPage()},watch:{},computed:{},methods:{async setupPage(){await this.getJobDetails(),await this.getFileList()},getFileSize(s){return s.isUploading?"....":jt(s.size_of||0,{round:2,standard:"si"})},getFormat(s){const[t,e]=s,a={padding:"1px 3px"};if(t=="status")switch(a.color="white",e){case"Draft":a.backgroundColor="blue";break;case"Error":case"Cancelled":a.backgroundColor="red";break;case"Submitted":case"Preparing":case"Queued":a.backgroundColor="#68f";break;case"Running":a.backgroundColor="blueviolet";break;case"Complete":a.backgroundColor="green";break;default:a.backgroundColor="orange";break}return a},async getJobDetails(){const s=`${this.server.url}/jobs/?id=${this.runId}`;let t={},e=await fetch(s,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(F=>F.json());e.length==1?(t=e[0],"status"in t&&(t.status=nt[t.status])):console.error("JOB NOT FOUND");const{status:a,project:i,folder:o,start:r,script:l,qsub_id:h,owner:S,id:m,cRAM:w,cProcessors:$,cEmail:P}=t;this.job={status:a,project:i,script:l,cRAM:w,cProcessors:$,cEmail:P,folder:o,start:r,qsub_id:h,owner:S,run_id:m}},jobColumns(){return[]},async handleFieldChanged(s){const t={};t[s]=this.job[s];const e=`${this.server.url}/jobs/${this.runId}`;await fetch(e,{method:"PUT",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(a=>a.json())},async clickedLaunch(){console.log("3-2-1 LAUNCH!"),this.statusMessage="Adding to queue...",await fetch(`${this.server.url}/jobs/${this.runId}`,{method:"PUT",body:JSON.stringify({status:1}),headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(s=>s.json()),this.$router.push(`../${this.server.serverNickname}`)},async clickedRunAgain(){console.log("click!",this.job);const{project:s,script:t,cRAM:e,cEmail:a,cProcessors:i,...o}=this.job,r=`${this.server.url}/jobs/`,l=await fetch(r,{method:"POST",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify({project:s,script:t,cRAM:e,cEmail:a,cProcessors:i})}).then(h=>h.json());console.log("NEW JOB:",l);for(const h of Object.values(this.files)){const S={...h};delete S.id,S.job_id=l;const m=`${this.server.url}/files/`,w=await fetch(m,{method:"POST",headers:{Authorization:this.server.key,"Content-Type":"application/json"},body:JSON.stringify(S)}).then($=>$.json());console.log("NEW FILE:",w)}this.$router.push(`${l}`)},async buildSummaryPage(){const s=`${this.server.url}/jobs/`;(await fetch(s,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(a=>a.json())).map(a=>(a.status=nt[a.status],a)).sort((a,i)=>a.id>i.id?-1:1),this.isLoading=!1},async getFileList(){const s=`${this.server.url}/files/?job_id=${this.runId}`,t=await fetch(s,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(e=>e.json());for(const e of t)this.files[e.name]=e;this.sortFiles()},sortFiles(){const s=Object.keys(this.files);s.sort((e,a)=>e.toLocaleLowerCase()<a.toLocaleLowerCase()?-1:1);const t={};for(const e of s)t[e]=this.files[e];this.files=t},clickedNewRun(){this.isShowingRunTemplate=!this.isShowingRunTemplate},async getExistingFileFromServerOrNull(s){const t=await s.arrayBuffer(),e=await crypto.subtle.digest("SHA-1",t),i=Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""),o=await fetch(`${this.server.url}/files/?hash=${i}`,{headers:{"Content-Type":"application/json",Authorization:this.server.key}}).then(r=>r.json());return o.length?(console.log("EXISTS!",i),{hash:o[0].hash,size_of:o[0].size_of}):null},async handleFilesAdded(s){console.log("New FILES",s);const t=Math.random();this.isUploadingRightNow.add(t);for(const e of s){this.files[e.name]={isUploading:!0,name:e.name,job_id:this.runId,size_of:e.size},this.sortFiles(),await this.$nextTick();const a=await this.getExistingFileFromServerOrNull(e);if(a){const i=await fetch(`${this.server.url}/files/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.server.key},body:JSON.stringify({name:e.name,job_id:this.runId,...a})}).then(o=>o.json());console.log("Referenced existing file",i)}else{const i=new FormData;i.append("file",e),i.append("job_id",this.runId);const o=await fetch(`${this.server.url}/files/`,{method:"POST",headers:{Authorization:this.server.key},body:i}),r=await o.json();console.log("UPLOADED:",o,r)}this.files[e.name].isUploading=!1}this.showDropZone=!1,await this.$nextTick(),this.showDropZone=!0,this.isUploadingRightNow.delete(t)},cleanName(s){return decodeURIComponent(s)},async submitRun(){if(console.log("SUBMIT!"),console.log(this.files),!this.files.length||!this.jobScript)return;this.statusMessage="Creating job...";const s={"Content-Type":"application/json",Authorization:this.server.key};let t=this.cleanName(this.jobProject);t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1));const e={script:this.jobScript,project:t},a=await fetch(`${this.server.url}/jobs/`,{method:"POST",body:JSON.stringify(e),headers:s}).then(o=>o.json());console.log({job_id:a}),this.statusMessage="Uploading files...",this.statusMessage="Adding to queue...";const i=await fetch(`${this.server.url}/jobs/${a}`,{method:"PUT",body:JSON.stringify({status:1}),headers:s}).then(o=>o.json());console.log({result3:i}),this.statusMessage="",this.isLoading=!0,this.isShowingRunTemplate=!1,this.buildSummaryPage()}}});var As=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"xpanel"},[e("h2",{staticStyle:{"margin-top":"1rem"}},[t._v("Run "+t._s(t.runId)),t.job.status&&t.job.status!=="Draft"?e("b-button",{staticClass:"button-run-again floatright",attrs:{type:"is-warning"},on:{click:t.clickedRunAgain}},[t._v("Run again...")]):t._e(),t.job.status=="Draft"?e("b-button",{staticClass:"button-run-again floatright",attrs:{type:"is-success"},on:{click:t.clickedLaunch}},[t._v("Launch Run")]):t._e()],1),e("table",{staticClass:"detail-table"},t._l(Object.entries(this.job),function(a){return e("tr",{key:a[0],staticClass:"job-row"},[e("td",{staticClass:"job-param"},[t._v(t._s(a[0]))]),t.job.status&&t.job.status!=="Draft"?e("td",{staticClass:"job-param-value"},[e("b",{style:t.getFormat(a)},[t._v(t._s(a[1]))])]):t.job.status=="Draft"&&!t.editableFields.has(a[0])?e("td",{staticClass:"job-param-value"},[e("b",{style:t.getFormat(a)},[t._v(t._s(a[1]))])]):e("td",{staticClass:"job-param-value"},[e("b",[e("editable-field",{staticStyle:{backgroundColor:"#ffffff88","margin-bottom":"1px"},attrs:{label:a[1]},on:{input:function(i){return t.handleFieldChanged(a[0])}},model:{value:t.job[a[0]],callback:function(i){t.$set(t.job,a[0],i)},expression:"job[kv[0]]"}})],1)])])}),0),e("div",{staticClass:"files-table"},[e("h3",[t._v("Files")]),e("div",{staticClass:"flex-row"},[e("table",{staticClass:"detail-table flex1"},t._l(Object.values(t.files),function(a){return e("tr",{key:a.name,staticClass:"job-row"},[e("td",{staticClass:"file-param",staticStyle:{"text-align":"right"}},[t._v(t._s(t.getFileSize(a)))]),e("td",{staticClass:"file-param-value"},[e("b",{class:{loading:a.isUploading}},[t._v(t._s(a.name))])])])}),0),t.showDropZone&&t.job.status=="Draft"?e("drop-file",{staticClass:"dropfile flex1",attrs:{isUploading:!!t.isUploadingRightNow.size},on:{files:t.handleFilesAdded}}):t._e()],1)])])},zs=[];var Os=_(Ns,As,zs,!1,null,"0ec26edb",null,null);const Is=Os.exports,Bs={messages:{en:{},de:{}}},nt=["Draft","Submitted","Preparing","Queued","Running","Complete","Cancelled","Error"],Ws=k({name:"SimRunner",i18n:Bs,components:{DropFile:Lt,SimRunDetails:Is,VueGoodTable:Ft},data:()=>({globalState:g.state,servers:{},server:{},isLoading:!0,isShowingRunTemplate:!1,jobs:[],jobScript:"",jobProject:"",files:[],statusMessage:"",runId:"",clusterEmail:"",clusterProcessors:2,clusterRAM:"4g"}),mounted(){this.$store.commit("setShowLeftBar",!0);const s=localStorage.getItem("simrunner-servers")||"{}";this.servers=JSON.parse(s);const t=this.$route.params.pathMatch.substring(5).split("/"),e=t[0];e&&(this.server=this.servers[e],this.server||console.error("NO SERVER:"+e),this.runId=t[1]||"",this.buildSummaryPage())},watch:{},computed:{isDark(){return this.$store.state.isDarkMode}},methods:{jobColumns(){return this.jobs.length?Object.keys(this.jobs[0]).map(t=>({label:t,field:t})):[]},getFileSize(s){return s.isUploading?"....":jt(s.size_of||s.size||0,{round:2,standard:"si"})},async buildSummaryPage(){const s=`${this.server.url}/jobs/`,e=(await fetch(s,{headers:{Authorization:this.server.key,"Content-Type":"application/json"}}).then(a=>a.json())).map(a=>(a.status=nt[a.status],a));e.sort((a,i)=>a.id>i.id?-1:1),this.jobs=e,this.isLoading=!1},rowClicked(s){this.$router.push(`${this.server.serverNickname}/${s.row.id}`);const t=this.$route.params.pathMatch.substring(5).split("/");t.length>2&&(this.runId=t[1]||"")},cleanName(s){return decodeURIComponent(s)},clickedNewRun(){this.isShowingRunTemplate=!this.isShowingRunTemplate},filesUpdated(s){console.log("GOT YOU",s),this.files=this.files.concat(s)},async submitRun(){if(console.log(this.files),!this.files.length||!this.jobScript)return;this.statusMessage="Creating job...";const s={"Content-Type":"application/json",Authorization:this.server.key};let t=this.cleanName(this.jobProject);t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1));const e={script:this.jobScript,project:t,cEmail:this.clusterEmail,cProcessors:this.clusterProcessors,cRAM:this.clusterRAM},a=await fetch(`${this.server.url}/jobs/`,{method:"POST",body:JSON.stringify(e),headers:s}).then(o=>o.json());console.log({job_id:a}),this.statusMessage="Uploading files...";for(const o of this.files){this.statusMessage="Uploading files... "+o.name;const r=new FormData;r.append("file",o),r.append("job_id",a),await(await fetch(`${this.server.url}/files/`,{method:"POST",headers:{Authorization:this.server.key},body:r})).json()}this.statusMessage="Adding to queue...";const i=await fetch(`${this.server.url}/jobs/${a}`,{method:"PUT",body:JSON.stringify({status:1}),headers:s}).then(o=>o.json());console.log({result3:i}),this.statusMessage="",this.isLoading=!0,this.isShowingRunTemplate=!1,this.buildSummaryPage()}}});var Ms=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"mpanel"},[e("div",{staticClass:"scrolly"},[e("div",{staticClass:"middle-panel"},[e("h4",[t._v(t._s(t.server.serverNickname)+" • Run Launcher")]),t.server.serverNickname?t._e():e("div",{staticClass:"hint"},[t._m(0),e("p",[t._v("You can connect to any SimWrapper cloud server resources you have access to.")])]),t.server.serverNickname&&!t.runId?e("div",{staticClass:"new-run"},[t.statusMessage?e("p",[e("b",[t._v(t._s(t.statusMessage))])]):t._e(),t.statusMessage?t._e():e("b-button",{attrs:{type:"is-warning"},on:{click:t.clickedNewRun}},[t._v("Create new run  "),t.isShowingRunTemplate?e("i",{staticClass:"fa fa-arrow-down"}):e("i",{staticClass:"fa fa-arrow-right"})]),t.isShowingRunTemplate?e("div",{staticClass:"new-run-template"},[e("b-button",{staticClass:"float-right",staticStyle:{marginBottom:"0.5rem"},attrs:{type:"is-success"},on:{click:t.submitRun}},[e("b",[t._v("Launch Run")])]),e("b",[t._v("Command / script")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"run-model.sh",maxlength:"255"},model:{value:t.jobScript,callback:function(a){t.jobScript=a},expression:"jobScript"}}),e("b",[t._v("Project folder")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"/project",maxlength:"255"},model:{value:t.jobProject,callback:function(a){t.jobProject=a},expression:"jobProject"}}),e("b",[t._v("TU Compute cluster settings")]),e("div",{staticClass:"flex-row"},[e("div",{staticClass:"flex-col flex1"},[e("p",[t._v("Email")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"me@tu-berlin.de",maxlength:"255"},model:{value:t.clusterEmail,callback:function(a){t.clusterEmail=a},expression:"clusterEmail"}})],1),e("div",{staticClass:"flex-col flex1"},[e("p",[t._v("Number of processors")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"4",maxlength:"20"},model:{value:t.clusterProcessors,callback:function(a){t.clusterProcessors=a},expression:"clusterProcessors"}})],1),e("div",{staticClass:"flex-col flex1"},[e("p",[t._v("Memory per processor")]),e("b-input",{staticClass:"b-input",attrs:{size:"is-small",placeholder:"16g",maxlength:"20"},model:{value:t.clusterRAM,callback:function(a){t.clusterRAM=a},expression:"clusterRAM"}})],1)]),e("b",[t._v("Files")]),e("div",{staticClass:"flex-row"},[e("table",{staticClass:"detail-table flex1"},t._l(t.files,function(a){return e("tr",{key:a.name,staticClass:"job-row"},[e("td",{staticClass:"file-param",staticStyle:{"text-align":"right"}},[t._v(t._s(t.getFileSize(a)))]),e("td",{staticClass:"file-param-value"},[e("b",{class:{loading:a.isUploading}},[t._v(t._s(a.name))])])])}),0),e("drop-file",{on:{files:t.filesUpdated}})],1)],1):t._e()],1):t._e(),t.runId?e("div",{staticClass:"flex-column"},[e("sim-run-details",{attrs:{runId:t.runId,server:t.server}})],1):t._e(),t.server.serverNickname&&!t.runId?e("div",{staticClass:"flex-column"},[e("h3",{staticStyle:{"margin-top":"1rem"}},[t._v("List of runs")]),t.jobs.length?e("div",{staticClass:"connect-here"},[e("vue-good-table",{staticClass:"vue-good-table",class:{darktable:t.isDark},attrs:{columns:t.jobColumns(),rows:t.jobs,styleClass:"vgt-table striped condensed"},on:{"on-row-click":t.rowClicked}})],1):t._e()]):t._e()])])])},Us=[function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",[t("b",[s._v("Select a server resource on the left.")])])}];var Hs=_(Ws,Ms,Us,!1,null,"8381f6d3",null,null);const Js=Hs.exports,Vs={},Gs={data(){return{frontmatter:Vs}}};var qs=function(){var t=this;return t._self._c,t._m(0)},Ks=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"markdown-body"},[t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://simwrapper.github.io/docs"}},[s._v("Documentation and users guide")]),s._v(" including examples and getting started")])]),t("li",[t("p",[t("a",{attrs:{href:"https://github.com/simwrapper/simwrapper"}},[s._v("Source code")]),s._v(" available on Github")])])])])}],Zs=_(Gs,qs,Ks,!1,null,null,null,null);const Ys=Zs.exports,Qs="/assets/berlin-a47b2528.jpg",Xs={messages:{en:{"more-info":"Documentation:",tagLine:"the simulation browser and data visualizer from TU&nbsp;Berlin.",privacy:`SimWrapper is a client-side app, which means there is no upstream server collecting or storing data.

SimWrapper does not collect, handle or process any data about you while you use the site. SimWrapper does not contain any tracking devices or analytics software. No user cookies are stored or transmitted.`},de:{"more-info":"Für weitere Informationen:",tagLine:"Der Modellergebnis-Browser der TU Berlin."}}},kt="/",ta=[{url:"https://tu.berlin",image:"tu-logo.png",name:"TU Berlin"},{url:"https://vsp.berlin/en/",image:"vsp-logo-300dpi.png",name:"VSP TU-Berlin"},{url:"https://matsim.org/",image:"matsim-logo-blue.png",name:"MATSim"},{url:"https://bmbf.de",image:"bmbf-logo.png",name:"German Federal BMBF"},{url:"https://metrocouncil.org/",image:"metcouncil.png",name:"Met Council"},{url:"https://www.sfcta.org/",image:"sfcta.png",name:"SFCTA"},{url:"http://www.sandag.org/",image:"sandag.jpg",name:"SANDAG"},{url:"https://mtc.ca.gov/",image:"mtc.png",name:"MTC"},{url:"https://www.mwcog.org/",image:"mwcog.png",name:"MWCOG"},{url:"https://www.oregon.gov/ODOT",image:"oregondot.png",name:"Oregon DOT"},{url:"https://www.transportation.ohio.gov/",image:"ohiodot.png",name:"Ohio DOT"},{url:"https://www.psrc.org/",image:"psrc.png",name:"Puget Sound Regional Council"},{url:"https://atlantaregional.org/",image:"arc.png",name:"ARC"},{url:"http://semcog.org/",image:"semcog.jpg",name:"SEMCOG"}],ea=k({name:"SplashPage",i18n:Xs,components:{FileSystemProjects:mt,InfoBottom:Ys},data:()=>({state:g.state,allRoots:[],images:{logo:Tt,berlin:Qs}}),computed:{allLogos(){return ta.map(s=>({url:s.url,image:`${kt}images/logos/${s.image}`}))},exampleRoots(){return this.allRoots.filter(s=>s.example)},mainRoots(){return this.allRoots.filter(s=>!s.example)},isChrome(){return!!window.showDirectoryPicker},localFileHandles(){return this.$store.state.localFileHandles.concat().sort((s,t)=>parseInt(s.key.substring(2))<parseInt(t.key.substring(2))?-1:1)}},methods:{onNavigate(s){console.log("ZZLDIJFSD",s),this.$emit("navigate",s)},showDocumentation(){console.log("here"),window.location.href="https://simwrapper.github.io/docs"},updateShortcuts(){const s=this.state.svnProjects.filter(t=>!t.hidden&&!t.slug.startsWith("fs"));this.allRoots=s},configureSources(){this.$emit("activate",{name:"Settings",class:"SettingsPanel"})},clickedOnFolder(s){const{folder:t,root:e,i:a}=s;this.$emit("navigate",{component:"TabbedDashboardView",props:{root:e,xsubfolder:""}})},async clickedBrowseChromeLocalFolder(s){try{const t=await s.handle.requestPermission({mode:"read"});if(console.log(s.handle,t),t!=="granted")return;ct.find(i=>i.slug==s.key)||H(s.handle,s.key);const a={root:s.key};this.clickedOnFolder(a)}catch(t){console.error(""+t)}},async showChromeDirectory(){try{const t=await window.showDirectoryPicker(),e=H(t,null);this.$router.push(`${kt}${e}/`)}catch{}},async clickedDelete(s){const e=this.$store.state.localFileHandles.filter(a=>a.key!==s.key);await $t("fs",e),this.$store.commit("setLocalFileSystem",e)},openDataStrip(){this.$store.commit("setShowLeftStrip",!0),this.$store.commit("setShowLeftBar",!0)}},mounted(){if(!this.state.breadcrumbs.length){const s=[{label:"SimWrapper",url:"/"}];g.commit("setBreadCrumbs",s)}this.updateShortcuts()}}),sa="/assets/vsp-2023-logo-473dadf2.png";var aa=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"splash-page"},[e("div",{staticClass:"centered"},[e("div",{staticClass:"splash-scroll-area white-text"},[e("div",{staticClass:"diagonal top-logo-area middle-area"},[e("div",{staticClass:"content"},[e("div",{staticClass:"top-banner flex-row"},[e("div",{staticClass:"flex1"},[e("img",{staticClass:"simwrapper-logo",attrs:{src:t.images.logo}})])]),e("div",{staticClass:"tagline"},[t._v("The transport simulation data visualizer from TU Berlin.")])])]),e("div",{staticClass:"diagonal data-area"},[e("div",{staticClass:"content"},[e("h2",{staticClass:"section-head"},[t._v("Explore Data Sources")]),e("p",[t._v("Configure more data sources from the "),e("a",{on:{click:function(a){return t.openDataStrip()}}},[t._v("data")]),t._v(" tab on the left-side strip.")]),e("div",{staticClass:"roots"},t._l(t.mainRoots,function(a){return e("div",{key:a.slug,staticClass:"project-root",on:{click:function(i){return t.clickedOnFolder({root:a.slug})}}},[e("h5",[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.description))])])}),0),t.isChrome?e("div",{staticClass:"section-head is-chrome"},[e("h2",[t._v("Local Folders")]),t.localFileHandles.length?t._e():e("p",[t._v("This Chromium-based browser can access local folders that you authorize on a per-folder basis. To explore files on your local filesystem right now:")]),e("div",{staticClass:"roots"},t._l(t.localFileHandles,function(a){return e("div",{key:a.key,staticClass:"project-root local mb1",on:{click:function(i){return t.clickedBrowseChromeLocalFolder(a)}}},[e("h5",{staticClass:"remove-local",staticStyle:{flex:"1"}},[t._v(t._s(a.handle.name)),e("i",{staticClass:"fa fa-times",on:{click:function(i){return i.stopPropagation(),t.clickedDelete(a)}}})]),e("p",[t._v("Local folder")])])}),0),e("b-button",{staticClass:"config-sources",attrs:{type:"is-success"},on:{click:t.showChromeDirectory}},[t._v("Open local folder...")])],1):t._e()])]),e("div",{staticClass:"diagonal newbie-area white-text"},[e("div",{staticClass:"content"},[e("h2",{staticClass:"section-head mb1"},[t._v("What is SimWrapper?")]),e("img",{staticClass:"screenshot",attrs:{src:t.images.berlin}}),t._m(0),e("p",[t._v("Explore simulation results directly, or create interactive project dashboards with Simwrapper. It provides many statistical views and chart types, just like other visualization frameworks. But SimWrapper also knows a lot about transportation, and has good defaults for producing visualizations of network link volumes, agent movements through time, aggregate area maps, scenario comparison, and a lot more.")]),e("p",[t._v("You don't need to be a coder to use SimWrapper -- you point it at your files and write some small text configuration files to tell SimWrapper what to do. SimWrapper does the rest!")]),e("p",[t._v("If you do know JavaScript, the open-source code and plugin architecture of SimWrapper allows you to fork the project and create your own visualizations, too. But you don't need to know JavaScript if SimWrapper already does what you need.")]),t._m(1)])]),e("div",{staticClass:"diagonal data-area white-text"},[e("div",{staticClass:"content"},[e("h2",{staticClass:"section-head mb1"},[t._v("Getting started with SimWrapper")]),e("h4",{staticClass:"mb1"},[t._v("Tutorials and Documentation")]),e("p",[t._v("SimWrapper is not like other websites. Please read the docs! The main SimWrapper documentation has everything you need to get started.")]),e("b-button",{staticClass:"config-sources",attrs:{type:"is-warning"},on:{click:t.showDocumentation}},[t._v("Go to Documentation...")]),e("h4",{staticClass:"pt1"},[t._v("Example dashboards")]),e("p",[t._v("Explore these example dashboards to get a feeling for what SimWrapper can do:")]),e("div",{staticClass:"roots"},t._l(t.exampleRoots,function(a){return e("div",{key:a.slug,staticClass:"project-root example-root",on:{click:function(i){return t.clickedOnFolder({root:a.slug})}}},[e("h5",[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.description))])])}),0),t.isChrome?e("div",{staticClass:"chrome-section"},[e("h4",{staticClass:"pt1"},[t._v("Local files on this computer")]),t.isChrome?e("p",[t._v("This is a Chromium-based browser. You can start exploring files on your own computer right now ("),e("a",{attrs:{href:"https://simwrapper.github.io/docs/#how-simwrapper-works"}},[t._v("see docs ")]),t._v("for file management details):")]):t._e(),e("b-button",{staticClass:"config-sources",attrs:{type:"is-success"},on:{click:t.showChromeDirectory}},[t._v("Open local folder...")])],1):t._e()],1)]),e("div",{staticClass:"diagonal sponsors-area dark-text"},[e("div",{staticClass:"content"},[e("h2",{staticClass:"section-head"},[t._v("Funding partners")]),e("div",{staticClass:"links-and-logos"},[e("div",{staticClass:"logos"},t._l(t.allLogos,function(a){return e("a",{attrs:{href:a.url,title:a.name,target:"_blank"}},[e("img",{staticClass:"img-logo",attrs:{src:a.image}})])}),0)]),e("p",[t._v("Funded by TU Berlin, the German Bundesministerium für Bildung und Forschung, and the ActivitySim Consortium member agencies above.")])])]),t._m(2)])])])},ia=[function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",[s._v("SimWrapper is a unique, web-based data visualization tool for researchers building disaggregate transportation simulations with software such as "),t("a",{attrs:{href:"https://matsim.org"}},[s._v("MATSim")]),s._v(" and "),t("a",{attrs:{href:"https://activitysim.github.io"}},[s._v("ActivitySim.")])])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("p",[s._v("SimWrapper is a"),t("b",[s._v(" 100% client-side ")]),s._v("browser application. There is no back-end database, no tracking cookies, and no data is transferred from your browser to any server; everything on your computer stays on your local computer.")])},function(){var s=this,t=s._self._c;return s._self._setupProxy,t("div",{staticClass:"diagonal footer-area white-text"},[t("div",{staticClass:"content"},[t("div",{staticClass:"flex-row"},[t("div",{staticClass:"legal flex1"},[t("h4",{staticClass:"section-head"},[s._v("SimWrapper, © 2024 Technische Universität Berlin")]),t("p",[s._v("SimWrapper is open source and available on "),t("a",{attrs:{href:"https://github.com/simwrapper/simwrapper"}},[s._v("GitHub.")])]),t("p",[t("a",{attrs:{href:"https://vsp.berlin/en/",target:"_blank"}},[s._v("VSP TU Berlin")]),t("a",{attrs:{href:"https://vsp.berlin/impressum/",target:"_blank"}},[s._v("Impressum")]),t("a",{attrs:{href:"https://www.vsp.tu-berlin.de/menue/service/privacy/parameter/en/",target:"_blank"}},[s._v("Privacy")])])]),t("div",{staticClass:"badges"},[t("a",{attrs:{href:"https://vsp.berlin/",target:"_blank"}},[t("img",{staticClass:"vsp-logo",attrs:{src:sa}})])])])])])}];var oa=_(ea,aa,ia,!1,null,"73a49e15",null,null);const ra=oa.exports,na=[".nodashboards","nodashboards","nodashboards.txt"],xt=new G({html:!0,linkify:!0,typographer:!0}),la=k({name:"TabbedDashboardView",components:{BreadCrumbs:Dt,DashBoard:qt,FolderBrowser:Pt},props:{root:{type:String,required:!0},xsubfolder:{type:String,required:!0},isMultipanel:{type:Boolean,required:!1}},data:()=>({activeTab:"",allConfigFiles:{dashboards:{},topsheets:{},vizes:{},configs:{}},crumbs:[],customCSS:"",dashboards:[],dashboardDataManager:null,dashboardTabWithDelay:"",finalFolder:"",folderReadme:"",footer:"",globalState:g.state,header:"",isShowingBreadcrumbs:!1,isZoomed:!1,loadErrorMessage:"",pageHeader:"",showFooter:!1,styleElement:null,leftNavItems:null,topNavItems:null}),computed:{fileApi(){return new V(this.fileSystem,g)},fileSystem(){const s=this.$store.state.svnProjects.filter(t=>t.slug===this.root);if(s.length===0)throw console.log("no such project"),Error;return s[0]},wiide(){return this.$store.state.isFullWidth},dashWidthCalculator(){return this.$store.state.dashboardWidth&&this.$store.state.isFullWidth?{maxWidth:this.$store.state.dashboardWidth}:{}},isFavorite(){let s=this.root;return this.xsubfolder&&(s+=`/${this.xsubfolder}`),this.globalState.favoriteLocations.findIndex(e=>s==e.fullPath)>-1}},watch:{root(){this.updateRoute()},xsubfolder(){this.updateRoute()},"globalState.colorScheme"(){const s=Object.values(this.allConfigFiles.configs);if(!s.length)return;const e=`theme-${s[s.length-1]}`;localStorage.setItem(e,this.globalState.colorScheme)}},methods:{clearStyles(){this.styleElement&&(document.getElementsByTagName("head")[0].removeChild(this.styleElement),this.styleElement=null)},getPageHeader(){return this.xsubfolder?this.xsubfolder.substring(1+this.xsubfolder.lastIndexOf("/")):this.fileSystem.name||this.root},onNavigate(s){this.$emit("navigate",s),this.setTitle()},clickedFavorite(){let s=`${this.root}/${this.xsubfolder}`;s=s.substring(0,s.lastIndexOf("/"));const t={root:this.root,subfolder:this.xsubfolder,label:this.finalFolder,fullPath:`${this.root}/${this.xsubfolder}`,hint:s};this.$store.commit(this.isFavorite?"removeFavorite":"addFavorite",t),this.isFavorite&&this.$store.commit("setShowLeftBar",!0)},async getFolderReadme(){try{this.folderReadme="";const{files:s}=await this.fileApi.getDirectory(this.xsubfolder),t=s.filter(i=>i.toLocaleLowerCase()==="readme.md");if(!t.length)return;const e=await this.fileApi.getFileText(`${this.xsubfolder}/${t[0]}`),a=xt.render(e);this.folderReadme=a}catch{this.folderReadme=""}},async findConfigsAndDashboards(){if(this.loadErrorMessage="",!this.fileApi)return[];await this.fileApi.getChromePermission(this.fileSystem.handle),this.getFolderReadme();try{this.allConfigFiles=await this.fileApi.findAllYamlConfigs(this.xsubfolder);const{files:s}=await this.fileApi.getDirectory(this.xsubfolder);let t=!0;if(na.forEach(e=>{s.indexOf(e)>-1&&(t=!1)}),t)for(const e of Object.values(this.allConfigFiles.dashboards))rt.set(this.dashboards,e,{header:{tab:"..."}}),await this.initDashboard(e)||delete this.dashboards[e];if(await this.setupProjectConfig(),this.globalState.isShowingFilesTab&&rt.set(this.dashboards,"FILE__BROWSER",{header:{tab:"Files"}}),this.$route.query.tab)try{const e=parseInt(""+this.$route.query.tab)-1,a=Object.keys(this.dashboards)[e];this.activeTab=a||Object.keys(this.dashboards)[0]}catch{this.activeTab=Object.keys(this.dashboards)[0]}else this.activeTab=Object.keys(this.dashboards)[0];this.dashboardTabWithDelay=this.activeTab}catch(s){console.warn({eeee:s}),this.fileSystem.handle?this.loadErrorMessage=`Click to grant access to folder "${this.fileSystem.handle.name}"`:this.loadErrorMessage=this.fileSystem.baseURL+"/"+this.xsubfolder+": Could not load"}},async setupProjectConfig(){const s=Object.values(this.allConfigFiles.configs);if(!s.length){this.isShowingBreadcrumbs=!0;return}let t="";for(const e of s)try{let a="";const i=await this.fileApi.getFileText(e),o=Q.parse(i);if(!e.startsWith("http")){const l=e.indexOf("simwrapper-config.y");a=e.substring(0,l);const h=a.split("/");t=h.slice(0,h.length-2).join("/")}o.hideLeftBar===!0&&(this.$store.commit("setShowLeftBar",!1),this.$store.commit("setShowLeftStrip",!1)),o.hideLeftBar===!1&&(this.$store.commit("setShowLeftBar",!0),this.$store.commit("setShowLeftStrip",!0)),o.theme&&this.setProjectTheme(o.theme,e),this.$store.commit("setFullWidth",!!o.fullWidth),this.$store.commit("setDashboardWidth",""),o.width!==void 0&&(this.$store.commit("setDashboardWidth",""+o.width),this.$store.commit("setFullWidth",!0)),(o.hideFilesSection||o.hideFiles)&&this.$store.commit("setShowFilesTab",!1),this.isShowingBreadcrumbs=!o.hideBreadcrumbs,o.topNavBar&&(this.topNavItems={left:[],right:[],fileSystem:this.fileSystem,subfolder:this.xsubfolder,style:o.topNavBar.style},o.topNavBar.logo&&(this.topNavItems.logo=o.topNavBar.logo),o.topNavBar.left&&(this.topNavItems.left=this.topNavItems.left.concat(o.topNavBar.left)),o.topNavBar.right&&(this.topNavItems.right=this.topNavItems.right.concat(o.topNavBar.right))),this.$store.commit("setTopNavItems",this.topNavItems),o.leftNavBar&&(this.leftNavItems={top:[],middle:[],bottom:[]},o.leftNavBar.top&&(this.leftNavItems.top=this.leftNavItems.top.concat(o.leftNavBar.top)),o.leftNavBar.middle&&(this.leftNavItems.middle=this.leftNavItems.middle.concat(o.leftNavBar.middle)),o.leftNavBar.bottom&&(this.leftNavItems.bottom=this.leftNavItems.bottom.concat(o.leftNavBar.bottom)),this.$store.commit("setShowLeftBar",!0),this.$store.commit("setShowLeftStrip",!1),this.$store.commit("setLeftNavItems",this.leftNavItems),this.$emit("activate",{name:"Project",class:"LeftProjectPanel",onlyIfVisible:!1,navRoot:this.root,navSubfolder:this.xsubfolder}));const r=`${a}${o.css}`;try{o.css&&(this.customCSS=await this.fileApi.getFileText(r),this.styleElement=document.createElement("style"),this.styleElement.appendChild(document.createTextNode(this.customCSS)),document.getElementsByTagName("head")[0].appendChild(this.styleElement))}catch(l){console.error(`Error reading ${r}: `+l)}this.header=await this.buildPanel("header",o,a),this.footer=await this.buildPanel("footer",o,a)}catch(a){const i=`Error reading ${e}: `+a;this.$emit("error",i),console.error(i)}t&&this.$emit("projectFolder",t)},setProjectTheme(s,t){const e=`theme-${t}`,a=localStorage.getItem(e);if(console.log(e,a),a){this.$store.commit("setTheme",a);return}this.$store.commit("setTheme",s),localStorage.setItem(e,s)},async buildPanel(s,t,e){let a="";return this.$store.state.locale==="de"?a=t[s+"_de"]||t[s]||t[s+"_en"]||"":a=t[s+"_en"]||t[s]||t[s+"_de"]||"",a?(a.indexOf(`
`)==-1&&a.endsWith(".md")&&(a=await this.fileApi.getFileText(`${e}${a}`)),xt.render(a)):""},async initDashboard(s){var t;try{const e=await this.fileApi.getFileText(s),a=Q.parse(e);if((t=a.header)!=null&&t.triggerPattern){const{files:o,dirs:r}=await this.fileApi.getDirectory(this.xsubfolder),l=[...o,...r];if(j.match(l,a.header.triggerPattern).length===0)return!1}const i=s.substring(0,s.lastIndexOf("."));return a.header||(a.header={title:s,tab:i}),a.header.tab||(a.header.tab=a.header.title||i),this.dashboards[s]=a,!0}catch(e){return this.$emit("error",{type:Jt.ERROR,msg:""+e}),!1}},updateRoute(){this.clearStyles(),this.dashboardDataManager&&this.dashboardDataManager.clearCache(),this.dashboardDataManager=new Kt(this.root,this.xsubfolder),this.header="",this.footer="",this.dashboards=[],this.pageHeader=this.getPageHeader(),this.findConfigsAndDashboards()},updateCrumbs(s){this.finalFolder=s.finalFolder||"",this.crumbs=s.crumbs},async switchLeftTab(s,t){s!==this.activeTab&&(this.activeTab="",this.dashboardTabWithDelay="",this.showFooter=!1,await this.$nextTick(),this.activeTab=s,setTimeout(()=>{this.dashboardTabWithDelay=s,t?this.$router.replace({query:{tab:`${t+1}`}}):this.$router.replace({query:{}})},125))},handleZoom(s){this.isZoomed=!!s,this.$emit("zoom",this.isZoomed)},handleLayoutComplete(){this.showFooter=!0},getFileSystem(s){const t=this.$store.state.svnProjects.filter(e=>e.slug===s);return t.length===0?(console.warn("no such project"),this.loadErrorMessage=`Can't locate "${s}": please check running services and browser version.`,null):t[0]},goUpOneFolder(){let s=this.xsubfolder;this.xsubfolder.endsWith("/")&&(s=this.xsubfolder.slice(0,-1)),s=s.substring(0,s.lastIndexOf("/"));const t={root:this.fileSystem.slug,xsubfolder:s};!s&&!this.xsubfolder?this.onNavigate({component:"SplashPage",props:{}}):this.onNavigate({component:"TabbedDashboardView",props:t})},async authorizeAfterError(){try{const s=this.fileSystem.handle;s&&await s.requestPermission({mode:"read"})==="granted"&&this.updateRoute()}catch{}},setTitle(){const s=`${this.fileSystem.name}/${this.xsubfolder}`;let t=s.substring(1+s.lastIndexOf("/"));t||(t=this.fileSystem.name),this.$emit("title",t)}},mounted(){this.updateRoute(),this.setTitle()},beforeDestroy(){this.dashboardDataManager&&this.dashboardDataManager.clearCache(),this.clearStyles()}});var ca=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"tabbed-folder-view"},[e("p",{directives:[{name:"show",rawName:"v-show",value:t.loadErrorMessage,expression:"loadErrorMessage"}],staticClass:"load-error",on:{click:t.authorizeAfterError}},[e("b",[t._v(t._s(t.loadErrorMessage))])]),t.isShowingBreadcrumbs&&!t.isMultipanel&&!t.isZoomed?e("div",{staticClass:"tabholder",style:t.dashWidthCalculator},[e("div",{staticClass:"tabholdercontainer white-text"},[t.header?e("div",{staticClass:"project-header",domProps:{innerHTML:t._s(t.header)}}):e("div",{staticClass:"project-path"},[e("div",{staticClass:"nav-title"},[e("p",{staticClass:"title-text"},[t._v(t._s(t.finalFolder))]),e("p",{staticClass:"favorite-icon",class:{"is-favorite":t.isFavorite},attrs:{title:"Favorite"},on:{click:t.clickedFavorite}},[e("i",{staticClass:"fa fa-star"})])]),e("bread-crumbs",{staticClass:"breadcrumbs",attrs:{root:t.root,subfolder:t.xsubfolder},on:{navigate:t.onNavigate,crumbs:t.updateCrumbs}})],1)])]):t._e(),e("div",{staticClass:"dashboard-finder",class:{isMultipanel:t.isMultipanel,isZoomed:t.isZoomed}},[e("ul",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"dashboard-right-sections"},t._l(Object.keys(t.dashboards),function(a,i){return e("li",{key:a,staticClass:"tab-list",class:{"is-active":a===t.activeTab,"is-not-active":a!==t.activeTab},style:{opacity:a===t.activeTab?1:.75},on:{click:function(o){return t.switchLeftTab(a,i)}}},[t.dashboards[a].header?e("a",{on:{click:function(o){return t.switchLeftTab(a,i)}}},[t._v(t._s(t.dashboards[a].header.tab))]):t._e()])}),0),t.dashboardTabWithDelay&&t.dashboardTabWithDelay!=="FILE__BROWSER"&&t.dashboards[t.dashboardTabWithDelay]&&t.dashboards[t.dashboardTabWithDelay].header.tab!=="..."?e("div",{staticClass:"dashboard-content",class:{"is-breadcrumbs-hidden":!t.isShowingBreadcrumbs&&!t.isZoomed}},[e("dash-board",{attrs:{root:t.root,xsubfolder:t.xsubfolder,config:t.dashboards[t.dashboardTabWithDelay],datamanager:t.dashboardDataManager,zoomed:t.isZoomed,allConfigFiles:t.allConfigFiles},on:{zoom:t.handleZoom,layoutComplete:t.handleLayoutComplete}})],1):t._e(),t.dashboardTabWithDelay&&t.dashboardTabWithDelay==="FILE__BROWSER"?e("folder-browser",{staticClass:"dashboard-folder-browser",attrs:{root:t.root,xsubfolder:t.xsubfolder,allConfigFiles:t.allConfigFiles},on:{navigate:t.onNavigate,up:function(a){return t.goUpOneFolder()}}}):t._e()],1),e("footer",{directives:[{name:"show",rawName:"v-show",value:t.showFooter&&!t.isZoomed,expression:"showFooter && !isZoomed"}],staticClass:"footer-holder",class:{wiide:t.wiide},style:t.dashWidthCalculator},[e("div",{staticClass:"tabholdercontainer",class:{wiide:t.wiide}},[t.footer?e("div",{staticClass:"project-footer",class:{wiide:t.wiide},domProps:{innerHTML:t._s(t.footer)}}):t._e()])])])},da=[];var ua=_(la,ca,da,!1,null,"5548c8c6",null,null);const ha=ua.exports;var lt={exports:{}},tt={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null};Object.defineProperty(tt,"__esModule",{value:!0});tt.isDarkColor=void 0;var ma=ft;tt.isDarkColor=function(t,e){if(e&&e.override){var a=Object.keys(e.override).find(function(m){return m.toLowerCase()===t.toLowerCase()});if(a!==void 0)return e.override[a]}var i=(0,ma.hexToRgb)(t),o=i.r,r=i.g,l=i.b,h=[o/255,r/255,l/255].map(function(m){return m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)}),S=.2126*h[0]+.7152*h[1]+.0722*h[2];return S<=.179};(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var e=tt;t.default=e.isDarkColor,s.exports=t.default})(lt,lt.exports);var fa=lt.exports;const ga=Vt(fa),pa=k({name:"SiteNavBar",components:{},props:{currentFolder:{type:String,required:!0},projectFolder:{type:String,required:!0}},data:()=>({selectedGroup:-1,isDark:!1}),computed:{navbar(){const s=this.$store.state.topNavItems;return s||{left:[],right:[],baseURL:""}}},methods:{hasLabel(s){return s.text||s.text_de||s.text_en},getLabel(s){let t="";return this.$store.state.locale==="de"?t=s.text_de||s.text||s.text_en||"item":t=s.text_en||s.text||s.text_de||"item",t},getUrl(s){return s.startsWith("http")?s:`${this.navbar.baseURL}${s}`},getStyle(s){const t={};return s.style&&Object.assign(t,s.style),t},getNavbarStyle(s){const t={};return s.style&&Object.assign(t,s.style),["black","blue","brown","green","red","purple"].includes(t.backgroundColor)&&(this.isDark=!0),t.backgroundColor&&t.backgroundColor.startsWith("#")&&(this.isDark=ga(t.backgroundColor)),"useDarkText"in t&&(this.isDark=!t.useDarkText),t},navigate(s,t){if(t!==void 0&&(this.selectedGroup=t),s.startsWith("http"))window.location.href=s;else{const e=s.startsWith("/")?s:`${this.projectFolder}/${s}`,a={root:this.$store.state.topNavItems.fileSystem.slug||"",xsubfolder:e,thumbnail:!1};this.$emit("navigate",{component:"TabbedDashboardView",props:a})}}}});var va=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("b-navbar",{style:t.getNavbarStyle(t.navbar),attrs:{id:"site-nav-bar",type:t.isDark?"is-black":"is-white"},scopedSlots:t._u([t.navbar.logo?{key:"brand",fn:function(){return[e("b-navbar-item",{style:t.getStyle(t.navbar.logo),on:{click:function(a){return t.navigate(t.navbar.logo.url)}}},[e("img",{style:t.getStyle(t.navbar.logo),attrs:{src:t.navbar.logo.image}})])]},proxy:!0}:null,{key:"start",fn:function(){return t._l(t.navbar.left,function(a,i){return e(a.dropdown?"BNavbarDropdown":"BNavbarItem",{key:`${i}`,tag:"component",style:t.getStyle(a),attrs:{hoverable:"",label:a.dropdown?t.getLabel(a):void 0},on:{click:function(o){return t.navigate(a.url)}}},[t._v(t._s(a.dropdown?void 0:t.getLabel(a))),t._l(a.dropdown,function(o){return e("b-navbar-item",{key:`child-${i}`,on:{click:function(r){return t.navigate(o.url)}}},[t._v(t._s(t.getLabel(o)))])})],2)})},proxy:!0},{key:"end",fn:function(){return t._l(t.navbar.right,function(a,i){return e(a.dropdown?"BNavbarDropdown":"BNavbarItem",{key:`${i}`,tag:"component",style:t.getStyle(a),attrs:{hoverable:"",label:a.dropdown?t.getLabel(a):void 0},on:{click:function(o){return t.navigate(a.url)}}},[t._v(t._s(a.dropdown?void 0:t.getLabel(a))),t._l(a.dropdown,function(o,r){return e("b-navbar-item",{key:`child-${r}`,on:{click:function(l){return t.navigate(o.url)}}},[t._v(t._s(t.getLabel(o)))])})],2)})},proxy:!0}],null,!0)})},ba=[];var ya=_(pa,va,ba,!1,null,"6163ef72",null,null);const _a=ya.exports,Sa={messages:{en:{translate:"Note: German translations are incomplete, but steadily improving",theme:"Theme",light:"Light",dark:"Dark",language:"Language",dataSources:"Data Sources",addDataSources:"Add Data Source"},de:{translate:"Die Übersetzungen sind unvollständig, werden aber immer besser...",theme:"Thema",light:"Hell",dark:"Dunkel",language:"Sprache",dataSources:"Datenquellen"}}},Ca=k({name:"SettingsPanel",i18n:Sa,data:()=>({state:g.state,theme:"",shortcuts:[]}),mounted(){this.theme=this.state.isDarkMode?"dark":"light"},watch:{"state.isDarkMode"(){console.log("ooop!",this.state.isDarkMode),this.theme=this.state.isDarkMode?"dark":"light"}},computed:{isLight(){return this.theme=="light"?{backgroundColor:"#ffdd57",color:"#222",borderColor:"#aaa"}:{backgroundColor:"unset",color:"#888",borderColor:"#aaa"}},isDark(){return this.theme=="dark"?{backgroundColor:"#7957d5",color:"white",borderColor:"#aaa"}:{backgroundColor:"unset",color:"#888",borderColor:"#aaa"}},isEN(){return this.state.locale=="en"?{backgroundColor:"#ffdd57",color:"#222",borderColor:"#aaa"}:{backgroundColor:"unset",color:"#888",borderColor:"#aaa"}},isDE(){return this.state.locale=="de"?{backgroundColor:"#ffdd57",color:"#222",borderColor:"#aaa"}:{backgroundColor:"unset",color:"#888",borderColor:"#aaa"}}},methods:{setTheme(s){this.theme=s,console.log(this.theme),g.commit("setTheme",s)},setLanguage(s){this.$store.commit("setLocale",s),this.$root.$i18n.locale=s}}});var wa=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"panel"},[e("div",{staticClass:"close",on:{click:function(a){return a.stopPropagation(),t.$emit("close")}}},[e("i",{staticClass:"fa fa-times"})]),e("div",{staticClass:"option"},[e("h5",[t._v(t._s(t.$t("theme")))]),e("b-button",{staticClass:"button is-small is-white",style:t.isLight,attrs:{outlined:""},on:{click:function(a){return t.setTheme("light")}}},[t._v(t._s(t.$t("light")))]),e("b-button",{staticClass:"button is-small is-gray",style:t.isDark,attrs:{outlined:""},on:{click:function(a){return t.setTheme("dark")}}},[t._v(t._s(t.$t("dark")))])],1),e("div",{staticClass:"option"},[e("h5",[t._v(t._s(t.$t("language")))]),e("b-button",{staticClass:"button is-small is-white",style:t.isEN,attrs:{outlined:""},on:{click:function(a){return t.setLanguage("en")}}},[t._v("EN")]),e("b-button",{staticClass:"button is-small is-gray",style:t.isDE,attrs:{outlined:""},on:{click:function(a){return t.setLanguage("de")}}},[t._v("DE")])],1)])},ka=[];var xa=_(Ca,wa,ka,!1,null,"4c0fdb60",null,null);const $a=xa.exports,Fa="/assets/settings-6e19bc2b.svg",Da="/assets/readme-bff70382.svg",Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAC6CAYAAABhsVlQAAAACXBIWXMAAAsSAAALEgHS3X78AAAL5ElEQVR4nO1d4XXbOAwm8/o/2eByE9QbNJ3gchM0maDJBskG7gRJJ6g7QZ0NnAnO3cCegPfoQK4iUjIpASBI8XsPf6REovmJJAACoDbGqApcaK0vlVJWrk48eK2U2hljNs4d7DZVoqcDiL0GYq2cj3joi1JqZcUYs3XuTkQlegK01jdKKSufkB/9qpRaAuk75+4IVKIjobW+UErdAcF/Eb9uD4QvpxJeiY6A1voaOp6a4C4s4Q/GmKVzJxCV6ADAKF4RTNGxsFP6zRjl7cy5UvEOMIq3Aki2+Gg1ddANolCJHoDW2q7FP0Zq0VSwbXnSWj9H/ZY6dfsBHfnFe1MOvhtjgkZ3HdEeZEKyxZfQkV2J7kBrvcyE5AZBZFeiWwAl56tzQz4s2Q9DraxrNEBrvQDfsyTFKxb/GmNWvv+pRAO01hswX3KGdaxc+rxodep+I/mhAJIVzEbe9ZpsRGut7S6OnQ4vnJtKrY0xa+dqAsDO038S2oKIz07/WqKxBPZg7Rdlpw4TIPZvrzDbECvQhpC25iTrbj9gddbFxA5bw9riPJuY5EtPW0qRdwNo8tQNvuBnBG3VKhJ3xhjvGkMBJseI/V3dTYhLhh2wF2PMnwgX35ceMSJuCL7+pe9dBKP5ImKJiZUdfPwL37tbs8mSsA2mPUs6DUhMciMPvnciE03V/lXMMgQf3NLzHNRB47w4sHEL4i/RyrXv3YhErzzvnCo3vncFtueaoE+3U4neeB6KLfZHX/jej0S0GJI7A8j37ClymF2iHSbgD+ZwLpxDbBY6wMbHxDcMJRIiR+6dG9Nw1Tw89qvbMozmRkhGtdUBPO+aPD0itm/tec9YeY4e0eD45wyMO4e1CxsLxOcN7hoJeKbV7qOn7uhYJQRQEO1zy47BnsLuB/flq3NjHA6xbrFEY46EUGCvpwox0M+7JYgE1A8olugUkZCS94cpN2bQ8rHskpvFNiWBlowF9BypFjAT7y7qfrRQ+IIHpqASLRSQHYKGLIh2NtHl4JKwJZiK7y6W6BfnCj32Cd4ZCkrdAY1o63GLJZo8M98DitGM9cFS2PgNUH0WsUSzBQW0QGGrYik652MS3k4BrAys/YTDRx1FNDjdfzs36LAnIhpzZpLuAj2YgGOUMYof1ofJmf49wFwO/oI0HhRABiemY+rto/btntT96PL2o52XRTSoRpi4MiXC5EZchImpMWNDUk7MGHFn1ShQPDl+cDWuu8Z1R4+OmqkhS95lajg/HqHjau5VenFyr2o25UyyKWefCA/bgZsE1QCp8NMY4/jgZ000kLwuJAle1YoHHhRIsgKHjUOymivRhZL82FeoRs1x6i6U5JMVBOc4opdzI1nNjeiMSj+GotYC7WLOJKu5EF0YydaEuo0h2eKDc6UwFEZyrcDvQ0Ek21F8b4xZjD0jq9gRXQjJaKfkOLs5JQiUxKDeRdrBezCrEzSygaAOtJi54hwmEGf95NzAxR62VzeqnmTHjxQk+1DPpiSEFJKlogitu5J8GtkTXUkOQ9ZEV5LDke0aDTFpv5wb+Og9kCQnZDmiobAdR+fflkCyypFoxmOLbjmTCaiRFdGV5PHIhuhK8jTkUlCukjwR4omuJONANNHgM+Yg+bFkkhWVHQ02biOnUkRfoaDKpp2TxRiWGxV7lSvQiIY8adth/zg349BUIlpUkvEwiWgYdXdA8NColYjZkKymhBJBmaSHTM9bnhXJagzRoAU/Z5ztMDuSVazWDbtFOectzZJkFbNGFxBV6U0QnwuCiC6A5FfYU6YoNzkJ4CtYDJRt3kBhuGn74b7Q0MKKudgOIis1ObJAzgLitWMOi9tNKe7jXKgkkxJ8hRQHvo0tR+lcaDWKsgTkrEiGykwUtUfXQ9UJTxJNVGV2riRTHBfcll3I6HYuGL4yzXMgmXNWfPa1oZdoprwlSiEt/yyU5JNkdxtHWfGWS9CP+c2E5Ea8JbC7DcQ8VzmlTK6GP4FkjqL1p8SZ1d45TLTWu0w3Kbp4tUnjzlUGaK03AlzETgXBo68b/NglkGzxETZfWKG1fhCyD3DePeTmOKK11iuEoAEfmkCCded01ianmOKdinsDA/bmt8IGy9/HXOuWEkaxVixPmTpAOIUzgVUpE2qtHLXwppHXnj+aKnEuOhpNNchrhER0jN+aS3ZN+5o1GvswzejQWfj7e+fGNLAcMA76gMRQqnOI5TsSjam4fBsbOmuMsVP9T+fGeHApZFJPrFfNQanYRO8RjjS8c66MB+X5zm1IJvrAbUM0lqa4mrq5D1oi1qjmGtFcH9QYHMy9M2R7EyuXGOtgFS5TR3QMnTX9znpOsRkLrPIPWZeREIgFau4VRSG0ChygEg2BbhUCcYZ4DL5CVH6SbEgUjM0ZclklrLhpLHNl71yhwSvTe0bBWkLN1I3VIdfg3B8NmP6xNjq4lDrJusnhI2yIxuoQZ3tsBJZIbVGMBIg4Z7MHB26xibb4Cnvb0YAMTcxtS64RLZnoN99G3b2ax+5V3Y+eyX50jTBBQhYRJoRTZ0phm7ZbfSgpinbZbluNAkWG+ChQAKZpkxRT7fkJuGF01PTBPUe6M/WUkKnRyCbF9C1gGTydqSFYexwru5mRHZZ71WpkztmUXQlKKy2A7F6Sh4jOPT/aJ6nIlpsfnXDqoZal77cykC2z4kGrgbnXMPHJ4BRHTLi8GiaFk520KkKKqkRzqTPmwyvkESfdS+aqMzanyoE+FHF4WQiCgwNhg+BWgNcHE9bdu27yk0pGdL3uAqr79qGeqdGGneZgw+C+sNH9pLUuxtffxei4bsh8tIrEo1Lqt/MHOPjN/EF9BV2kPPhU8ZEmwzWSU8AxI0Aj5QzVEVcodqqIPSXH80yuU3Pa7UpufmEhq2OFgexnwvCjLooxv7I6hNRupkMV/e/OTRoUY35leX402PTY9U76YMn+MTZWXQqyPfoftP5b5wYdnqBgXJbI9uj/BoyHlDbI8qSd7IlWf8hendDuMfECGrm4w1j6UATRKp35JfLkHR+yXaO7gA6/Qq5TNgT7QW1TFJcdg2KIVmnNL8l1xg4oiugGCcyvX9LNryKJVtX8clCMMtaHan69oXiiVRqyxZlfsyBaVfOr3DW6i5b59eLcpIEo82s2RKs/5tfVHM2vWRHdAJSlR+cGDUSYX1QRJjyHX08EdP4T4yvvwezjR85pJkjtvmJO/k+S++VcGNlRSRLHkD9STrJX3MGHzoWIzkmeCopM9gVzAQDWSNNRyhjEUG2JgvQ+gabKqrwkML82rDa2j/0hkVSugXB0U6cKb3zvJf1Nvot9Iq0ACzHZVMXhkiQHOBf6RGJJJQaysX/zDgq9Oe8SQbTUw6+ZyMYqNpOsFJaJqHggsuwhF5B2vz73pRtx4MOpdwg8/BrzSMMgWA9eK9J0TF/cxpIM/vFFz7lkvTlqvfAN89a0JbFkZJI1zoy3tYP1C0hIfI7o82CvonOh82LRxcYTEh5qfgW1FT6gKSbd+tQAcC50GiD6+IDEZC89bXvX+b7/8zwHU9nrdSE7F1oNkFwmMokG7umjPvMryFYe+P8p4q2O6FxoNUJyld/k0/fAiNwlJLkRRy9wGtBqCMWGBZawuxCHpOVnCLKVmfwS72a9XjtaiO3cC2OM7ruXAhBscRESTMHUt+/8DkO7V+IPv3YuJoStdRJI8g1T3563fQ5DI9p/Qw6SeprGQmu9ZUzvPY7qoRFdgQzwrnGRrGBUH+qvVKJ5kSISNHuicywJ1RcVS4lDTPnQGl21bmSk0ntsXw2NaPGHX1eEwe6EDREt/vDrinDkSvTKuVIxiN41WvHbfKHYG2NEOUtCIXWNVkIPJc15NHPFjLdxqHV+iuhngVX2sy3TmEi3OCzBg0SDQ1zSqP6Wef3sFNX9DzPg4BrdYO5RoJiQ7uuWefh1nuBcepbHPvNtjPtkjpkahIEKHFmb7yJdnEYMyZxyr4iJZo8wcRohjOziSGbqR2cGdBoQ2EgRh19Xsr0SFwUa0MiiKh4kJDttXHdEQ7OvYSKA7LSZGpGNzbIqkTDCyXKvZl1nTDJQsymVUv8DgBKSn0Kc/bgAAAAASUVORK5CYII=",Ra="https://simwrapper.github.io/docs",Ta=k({name:"LeftIconPanel",components:{SettingsPanel:$a},props:{activeSection:{type:String,required:!0}},data:()=>({state:g.state,isShowingSettings:!1,isDarkMode:!1,topSections:[{name:"Data",class:"LeftSystemPanel",icon:Pa},{name:"Split",class:"LeftSplitFolderPanel",fontAwesomeIcon:"fa-columns"},{hidden:!0,name:"Runs",class:"LeftRunnerPanel",fontAwesomeIcon:"fa-network-wired"}],bottomSections:[{name:"Documentation",link:Ra,icon:Da},{name:"Settings",class:"SettingsPanel",icon:Fa}]}),watch:{"state.isDarkMode"(){this.isDarkMode=this.state.isDarkMode}},computed:{isDark(){return this.state.isDarkMode},issueColor(){return this.state.statusErrors.length?"invert(60%) sepia(100%) hue-rotate(310deg) saturate(8.5)":this.state.statusWarnings.length?"invert(75%) sepia(100%) hue-rotate(15deg) saturate(5.5)":"invert(100%)"}},methods:{select(s){if(s.name=="Settings"){this.toggleSettings();return}s.name!==this.activeSection?(this.$store.commit("setShowLeftBar",!0),this.$emit("activate",s)):this.$store.commit("setShowLeftBar",!this.$store.state.isShowingLeftBar)},toggleSettings(){this.isShowingSettings=!this.isShowingSettings}}});var ja=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"icon-panel"},[e("div",{staticClass:"top"},t._l(t.topSections,function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:!a.hidden,expression:"!section.hidden"}],key:a.name,staticClass:"item",class:{"is-active":a.name===t.activeSection,"is-dark":t.isDarkMode},on:{click:function(i){return t.select(a)}}},[e("div",{staticClass:"sideways"},[e("p",[t._v(t._s(a.name))])]),a.icon?e("img",{staticClass:"svg-icon",style:{filter:a.colorize?t.issueColor:"invert(100%)"},attrs:{src:a.icon,draggable:!1}}):t._e(),a.fontAwesomeIcon?e("i",{staticClass:"fa-icon fas",class:a.fontAwesomeIcon}):t._e()])}),0),e("div",{staticClass:"bottom"},t._l(t.bottomSections,function(a){return e("div",{key:a.name,staticClass:"item",on:{click:function(i){return t.select(a)}}},[e("div",{staticClass:"sideways"},[e("p",[t._v(t._s(a.name))])]),a.icon?e("img",{staticClass:"svg-icon",style:{filter:a.colorize?t.issueColor:"invert(100%)"},attrs:{src:a.icon,draggable:!1}}):t._e()])}),0),t.isShowingSettings?e("settings-panel",{staticClass:"settings-popup",on:{close:function(a){return t.toggleSettings()}}}):t._e()],1)},La=[];var Ea=_(Ta,ja,La,!1,null,"183a7c3e",null,null);const Na=Ea.exports,Aa={messages:{en:{close:"Close panel",back:"Go back"},de:{close:"Schließen",back:"Zurück"}}},U="/",ot=250,za=k({name:"LayoutManager",i18n:Aa,components:Object.assign({BreadCrumbs:Dt,ErrorPanel:ht,FolderBrowser:Pt,LeftIconPanel:Na,LeftProjectPanel:De,LeftRunnerPanel:Ee,LeftSplitFolderPanel:qe,LeftSystemPanel:ls,TopNavBar:_a,SimRunner:Js,SplashPage:ra,TabbedDashboardView:ha},X),data:()=>({activeLeftSection:{name:"Data",class:"LeftSystemPanel"},authHandles:[],dragX:-1,dragY:-1,dragQuadrant:null,dragStartWidth:0,firstPanelProjectFolder:"",firstPanelSubfolder:"",fullScreenPanel:{x:-1,y:-1},isDraggingDivider:0,isDragHappening:!1,isEmbedded:!1,isShowingActiveSection:!0,leftSectionWidth:ot,navRoot:"",panels:[],panelsWithScrollbars:["TabbedDashboardView","FolderBrowser","calc-table"],zoomed:!1}),computed:{isMultipanel(){return this.panels.length>1?!0:this.panels[0].length>1},showLeftBar(){return this.$store.state.isShowingLeftBar},activeSectionStyle(){return this.activeLeftSection?{width:`${this.leftSectionWidth}px`}:{display:"none"}}},watch:{"$store.state.statusErrors"(){},$route(s,t){s.path===U?this.panels=[[{component:"SplashPage",key:Math.random(),props:{}}]]:(this.buildLayoutFromURL(),g.commit("resize"))}},methods:{setActiveLeftSection(s){if(!(s.onlyIfVisible&&!this.isShowingActiveSection)&&!(this.isShowingActiveSection&&s.name===this.activeLeftSection.name)){if(s.link){window.open(s.link,"_blank");return}s.navRoot&&(this.navRoot=s.navRoot),this.isShowingActiveSection=!0,this.activeLeftSection=s,localStorage.setItem("activeLeftSection",JSON.stringify(s)),this.leftSectionWidth<48&&(this.leftSectionWidth=ot)}},setProjectFolder(s){this.firstPanelProjectFolder=s},buildSingleSiteLayout(){let s=this.$route.params.pathMatch;if(s.startsWith("/")&&(s=s.slice(1)),s.startsWith("split/")){const w=s.substring(6);try{const $=atob(w),P=JSON.parse($);this.panels=P}catch($){console.error("PARSING SPLIT"+$),this.$router.replace("/")}return}let t="SITE",e=s;e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,-1));const a=s.substring(1+s.lastIndexOf("/")),i=a.toLocaleLowerCase();for(const w of g.state.visualizationTypes.values())if(j.isMatch(i,w.filePatterns)){if(this.panels.length===1&&this.panels[0].length===1)this.panels=[[this.panels[0][0]]];else{let $=Math.random(),P=e.substring(0,e.lastIndexOf("/"));P.startsWith("/")&&(P=P.slice(1)),this.panels=[[{key:$,component:w.kebabName,title:"",description:"",props:{root:t,subfolder:P,yamlConfig:a,thumbnail:!1}}]]}return}let o=Math.random();this.panels.length===1&&this.panels[0].length===1&&(o=this.panels[0][0].key);const r=this.$store.state.svnProjects.filter(w=>w.slug===t);if(!r.length)throw Error("no such project");const l=r[0],h=e.startsWith("/")?e.slice(1):e,m=h.substring(1+h.lastIndexOf("/"))||l.name;this.panels=[[{key:o,title:m,component:"TabbedDashboardView",props:{root:t,xsubfolder:h}}]]},buildLayoutFromURL(){return this.buildSingleSiteLayout()},handleDragStartStop(s){this.isDragHappening=s},buildDragHighlightStyle(s,t){if(s==-1){const i=this.dragQuadrant=="rowTop"?"1":"0",o=this.isDragHappening?"auto":"none";return{top:0,opacity:i,pointerEvents:o,backgroundColor:"#ffcc4480"}}if(s==-2){const i=this.dragQuadrant=="rowBottom"?"1":"0",o=this.isDragHappening?"auto":"none";return{bottom:0,opacity:i,pointerEvents:o,backgroundColor:"#ffcc4480"}}if(s!==this.dragX||t!==this.dragY||!this.dragQuadrant)return{};const a={opacity:1,backgroundColor:this.dragQuadrant.quadrant=="center"?"#079f6f80":"#4444dd90"};return Object.entries(this.dragQuadrant).forEach(i=>a[i[0]]=`${i[1]}px`),a},stillDragging(s){const{event:t,x:e,y:a,row:i}=s;if(i){this.dragQuadrant=i;return}this.dragX=e,this.dragY=a;const o=this.$refs[`dragContainer${e}-${a}`],l=this.$refs.tileTable.offsetLeft,h=o[0],S=(t.clientX-h.offsetLeft-l)/h.offsetWidth;(t.clientY-h.offsetTop)/h.offsetHeight;let m=8;if(S<.3)this.dragQuadrant={quadrant:"left",width:h.offsetWidth/2-m*2,height:h.offsetHeight-m*2,marginLeft:m,marginTop:m};else if(S>.7)this.dragQuadrant={quadrant:"right",width:h.offsetWidth/2-m*2,height:h.offsetHeight-m*2,marginLeft:h.offsetWidth/2+m,marginTop:m};else{m*=5;const w=(h.offsetWidth-m*2)*.95,$=(h.offsetHeight-m*2)*.95;this.dragQuadrant={quadrant:"center",width:w,height:$,marginLeft:(h.offsetWidth-w)/2,marginTop:(h.offsetHeight-$)/2}}},dragEnd(){this.dragQuadrant=null,this.dragX=-1,this.dragY=-1},onDrop(s){var o;if(!this.dragQuadrant)return;const{event:t,x:e,y:a,row:i}=s;try{const r=(o=t.dataTransfer)==null?void 0:o.getData("bundle"),l=JSON.parse(r),S={component:l.component||"TabbedDashboardView",props:l};this.onSplit({x:e,y:a,row:i,quadrant:this.dragQuadrant.quadrant,viz:S})}catch{}this.dragEnd()},splitMainPanel(s){let t=0,e=0;const a={component:"SplashPage",props:{},key:Math.random()};s.root&&(a.component="TabbedDashboardView",a.props.root=s.root,a.props.xsubfolder=s.xsubfolder||""),this.panels[e].splice(t,0,a),this.updateURL(),g.commit("resize")},async onSplit(s){const{x:t,y:e,row:a,quadrant:i,viz:o}=s,r={component:o.component,props:o.props,title:"",description:"",key:Math.random()};if(a)switch(a){case"rowTop":this.panels.unshift([r]);break;case"rowBottom":this.panels.push([r]);break;default:console.warn("HUH?",a);break}else switch(i){case"center":this.panels[e][t]=r;break;case"left":this.panels[e].splice(t,0,r);break;case"right":this.panels[e].splice(t+1,0,r);break;default:console.warn("TOP AND BOTTOM to be added later");return}this.updateURL(),g.commit("resize")},onNavigate(s,t,e){s.component==="SplashPage"?this.panels[e][t]={component:"SplashPage",props:{},key:Math.random()}:this.panels[e][t]=Object.assign({key:Math.random()},s),this.updateURL(),this.buildLayoutFromURL()},onClose(s,t){this.panels[t][s].component=null,this.panels[t].splice(s,1),this.panels[t].length||(this.panels.length>1?this.panels.splice(t,1):this.panels[0].push({component:"SplashPage",key:Math.random(),props:{}})),this.updateURL(),g.commit("resize")},onBack(s,t){const e=this.panels[t][s];if(e.component=="SplashPage")return;if(e.component!=="TabbedDashboardView"){e.component="TabbedDashboardView",e.props.xsubfolder=this.panels[t][s].props.subfolder,delete e.props.yamlConfig,this.updateURL();return}let a=""+e.props.xsubfolder;if(!a||a==="/"){e.component="SplashPage",e.props={},this.updateURL();return}a=a.replaceAll("//","/"),a.endsWith("/")&&(a=a.slice(0,-1));let o=a.split("/").slice(0,-1).join("/");e.props.xsubfolder=o,delete e.props.yamlConfig,this.updateURL()},getShowHeader(s){return this.panels.length>1||this.panels[0].length>1?!0:!["SplashPage","TabbedDashboardView","SimRunner"].includes(s.component)},updateURL(){var i,o;if(this.firstPanelSubfolder=((o=(i=this.panels[0][0])==null?void 0:i.props)==null?void 0:o.xsubfolder)||"",this.panels.length>1||this.panels[0].length>1){const r=btoa(JSON.stringify(this.panels));this.$router.push(`${U}split/${r}`);return}const s=this.panels[0][0].props;if(s.serverNickname){this.$router.replace(`${U}runs/${s.serverNickname}`);return}const t=s.root||"",e=s.xsubfolder||s.subfolder||"",a=s.yamlConfig||"";if(a.indexOf("/")>-1){const r=a.substring(a.lastIndexOf("/"));this.$router.replace(`${U}${t}/${e}/${r}`)}else if(a)this.$router.push(`${U}${t}/${e}/${a}`);else{let r=`${U}${t}/${e}`;s.config&&(r+=`/${s.config}`),this.$router.push(r)}},cleanProps(s){const{title:t,...e}=s;return e},dividerDragStart(s){this.isDraggingDivider=s.clientX,this.dragStartWidth=this.leftSectionWidth},dividerDragEnd(s){this.isDraggingDivider=0},dividerDragging(s){if(!this.isDraggingDivider)return;const t=s.clientX-this.isDraggingDivider;this.leftSectionWidth=Math.max(0,this.dragStartWidth+t),localStorage.setItem("leftPanelWidth",`${this.leftSectionWidth}`)},setCardTitles(s,t){typeof t=="string"?(rt.set(s,"title",t),s.description=""):(s.title=t.title,s.description=t.description||"")},async handleToggleInfoClicked(s){console.log("CARD INFO?",s)},async toggleZoom(s,t,e){console.log("ZOOM",s),this.fullScreenPanel.x>-1?this.fullScreenPanel={x:-1,y:-1}:this.fullScreenPanel={x:t,y:e}},updateDimensions(s){},getTileStyle(s){return{overflow:this.panelsWithScrollbars.includes(s.component)?"auto":"hidden"}},restoreLeftPanel(){this.$store.commit("setShowLeftBar",!0),this.$store.commit("setManualLeftPanelHidden",!1)},getContainerStyle(s,t,e){const a=t===this.panels[e].length-1?"6px":"0";let i={padding:this.isMultipanel?`6px ${a} 6px 6px`:"0px 0px"};return this.fullScreenPanel.x==-1||(this.fullScreenPanel.x!==t?i.display="none":i={position:"absolute",top:0,bottom:0,left:0,right:0,margin:"6px 6px"}),i}},mounted(){var t,e;"embed"in this.$route.query&&(this.isEmbedded=!0);const s=localStorage.getItem("leftPanelWidth");this.leftSectionWidth=s==null?ot:parseInt(s),this.leftSectionWidth<0&&(this.leftSectionWidth=2),this.activeLeftSection={name:"Data",class:"LeftSystemPanel"},this.buildLayoutFromURL(),this.firstPanelSubfolder=((e=(t=this.panels[0][0])==null?void 0:t.props)==null?void 0:e.xsubfolder)||""}});var Oa=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{attrs:{id:"layout-manager"}},[t.$store.state.topNavItems?e("top-nav-bar",{attrs:{projectFolder:t.firstPanelProjectFolder,currentFolder:t.firstPanelSubfolder},on:{navigate:function(a){return t.onNavigate(a,0,0)}}}):t._e(),e("div",{style:{userSelect:t.isDraggingDivider?"none":"unset"},attrs:{id:"split-screen"},on:{mousemove:t.dividerDragging,mouseup:t.dividerDragEnd}},[t.$store.state.isShowingLeftStrip?e("left-icon-panel",{staticClass:"left-icon-panel",attrs:{activeSection:t.activeLeftSection.name},on:{activate:t.setActiveLeftSection}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftBar,expression:"showLeftBar"}],staticClass:"left-panel"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowingActiveSection,expression:"isShowingActiveSection"}],staticClass:"left-panel-active-section",style:t.activeSectionStyle},[e(t.activeLeftSection.class,{tag:"component",staticClass:"left-component",attrs:{currentFolder:t.firstPanelSubfolder,projectFolder:t.firstPanelProjectFolder,navRoot:t.navRoot},on:{navigate:function(a){return t.onNavigate(a,0,0)},activate:t.setActiveLeftSection,isDragging:t.handleDragStartStop,split:t.splitMainPanel}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.activeLeftSection,expression:"activeLeftSection"}],staticClass:"left-panel-divider",on:{mousedown:t.dividerDragStart,mouseup:t.dividerDragEnd,mousemove:function(a){return a.stopPropagation(),t.dividerDragging.apply(null,arguments)}}})]),e("div",{ref:"tileTable",staticClass:"table-of-tiles"},[t.authHandles.length?e("div",{staticClass:"authorization-strip"},t._l(t.authHandles,function(a){return e("div",{staticClass:"auth-row"},[e("p",{staticClass:"flex1"},[t._v(t._s(""+a))])])}),0):t._e(),e("div",{staticClass:"row-drop-target",style:t.buildDragHighlightStyle(-1,-1),on:{drop:function(a){return t.onDrop({event:a,row:"rowTop"})},dragover:[function(a){return t.stillDragging({event:a,row:"rowTop"})},function(a){a.preventDefault()}],dragenter:function(a){a.preventDefault()},dragleave:t.dragEnd}}),t._l(t.panels,function(a,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreenPanel.y==-1||t.fullScreenPanel.y==i,expression:"fullScreenPanel.y == -1 || fullScreenPanel.y == y"}],key:i,staticClass:"tile-row"},t._l(a,function(o,r){return e("div",{key:o.key,ref:`dragContainer${r}-${i}`,refInFor:!0,staticClass:"drag-container",style:t.getContainerStyle(o,r,i),on:{drop:function(l){return t.onDrop({event:l,x:r,y:i})},dragover:[function(l){l.preventDefault()},function(l){return t.stillDragging({event:l,x:r,y:i})}],dragenter:function(l){l.preventDefault()},dragleave:t.dragEnd}},[t.getShowHeader(o)?e("div",{staticClass:"tile-header flex-row"},[o.component!=="SplashPage"?e("div",{staticClass:"tile-buttons"},[e("div",{staticClass:"nav-button is-small is-white",on:{click:function(l){return t.onBack(r,i)}}},[e("i",{staticClass:"fa fa-arrow-left"})])]):t._e(),e("div",{staticClass:"tile-labels",class:{"is-singlepanel":!t.isMultipanel}},[o.title?e("h3",{style:{textAlign:"left"}},[t._v(t._s(o.title))]):t._e(),o.description?e("p",[t._v(t._s(o.description))]):t._e()]),e("div",{staticClass:"flex-row"},[e("div",{staticClass:"tile-buttons"},[o.info?e("div",{staticClass:"nav-button is-small is-white",on:{click:function(l){return t.handleToggleInfoClicked(o)}}},[e("i",{staticClass:"fa fa-info-circle"})]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.panels.length>1||t.panels[0].length>1,expression:"panels.length > 1 || panels[0].length > 1"}],staticClass:"nav-button is-small is-white",attrs:{title:t.fullScreenPanel.x>-1?"Restore":"Enlarge"},on:{click:function(l){return t.toggleZoom(o,r,i)}}},[e("i",{staticClass:"fa fa-expand"})]),t.isMultipanel?e("div",{staticClass:"nav-button is-small is-white",attrs:{title:"Close"},on:{click:function(l){return t.onClose(r,i)}}},[e("i",{staticClass:"fa fa-times-circle"})]):t._e()])])]):t._e(),t.getShowHeader(o)?e("div",{staticClass:"breadcrumb-row"},[e("bread-crumbs",{staticClass:"bread-crumbs",attrs:{root:o.props.root||"",subfolder:o.props.xsubfolder||""},on:{navigate:function(l){return t.onNavigate(l,r,i)}}})],1):t._e(),e(o.component,t._b({tag:"component",staticClass:"map-tile",style:t.getTileStyle(o),attrs:{isMultipanel:t.isMultipanel},on:{navigate:function(l){return t.onNavigate(l,r,i)},title:function(l){return t.setCardTitles(o,l)},activate:t.setActiveLeftSection,projectFolder:t.setProjectFolder}},"component",t.cleanProps(o.props),!1)),t.isDragHappening?e("div",{staticClass:"drag-highlight",style:t.buildDragHighlightStyle(r,i)}):t._e()],1)}),0)}),t.isDragHappening?e("div",{staticClass:"row-drop-target",style:t.buildDragHighlightStyle(-2,-2),on:{drop:function(a){return t.onDrop({event:a,row:"rowBottom"})},dragover:[function(a){return t.stillDragging({event:a,row:"rowBottom"})},function(a){a.preventDefault()}],dragenter:function(a){a.preventDefault()},dragleave:t.dragEnd}}):t._e()],2)],1)],1)},Ia=[];var Ba=_(za,Oa,Ia,!1,null,"945b795f",null,null);const ei=Ba.exports;export{ei as default};
//# sourceMappingURL=LayoutManager-9d17d6ec.js.map
