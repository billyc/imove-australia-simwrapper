{"version":3,"file":"LegendBox-f2f61fd8.js","sources":["../../src/components/viz-configurator/LegendBox.vue"],"sourcesContent":["<template lang=\"pug\">\n.legend-box(v-if=\"sections.length\")\n  .legend-section(v-for=\"section,i in sections\" :key=\"section.section\")\n    p(:style=\"{marginBottom: '0.25rem', marginTop: i ? '1rem':''}\"): b {{ sectionTitle(section) }}\n    .section-row(v-for=\"row,i of getRowsInSection(section)\" :key=\"i\")\n      .row-value(:style=\"getRowStyle(row)\")\n      .row-label(:style=\"getLabelStyle(row)\") {{ getRowLabel(row) }}\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport type { PropType } from 'vue'\nimport LegendStore, { LegendSection } from '@/js/LegendStore'\n\nexport default defineComponent({\n  name: 'LegendBox',\n  props: {\n    legendStore: { type: Object as PropType<LegendStore>, required: true },\n  },\n  data: () => {\n    return {}\n  },\n  beforeDestroy() {\n    this.legendStore.clear()\n  },\n  computed: {\n    sections(): any {\n      return this.legendStore.state.sections\n    },\n  },\n  methods: {\n    sectionTitle(section: LegendSection) {\n      let title = section.column\n\n      if (section.normalColumn) title += ` / ${section.normalColumn}`\n\n      if (section.relative) {\n        title += ' (% Diff)'\n      } else if (section.diff) {\n        title += ' (Diff)'\n      }\n\n      return title\n    },\n\n    getRowsInSection(section: LegendSection) {\n      if (!section) return\n\n      const z = section.values.filter((f: any) => !Number.isNaN(f.label))\n      return z\n    },\n\n    getRowLabel(row: { label: string; value: any }) {\n      return row.label // || row.value // no label -> it's a line width\n    },\n\n    getRowStyle(row: { label: string; value: any }) {\n      if (Array.isArray(row.value)) {\n        // it's a 3-color\n        const backgroundColor = `rgb(${row.value[0]},${row.value[1]},${row.value[2]})`\n        const style = {\n          backgroundColor,\n          width: '1rem',\n          height: '1rem',\n          border: '1px solid #88888844',\n          // lineHeight: '14px',\n        }\n        return style\n      } else {\n        const style = {\n          backgroundColor: '#779',\n          width: '2rem',\n          height: `${row.value / 2}px`,\n          margin: 'auto 0 4px 0',\n        }\n        return style\n      }\n      return {}\n    },\n\n    getLabelStyle(row: { label: string; value: any }) {\n      if (Array.isArray(row.value)) {\n        // colors\n        return {\n          marginLeft: '4px',\n        }\n      } else {\n        // widths\n        return {\n          display: 'flex',\n          flexDirection: 'column-reverse',\n          marginLeft: '4px',\n          marginBottom: '-2px',\n        }\n      }\n    },\n  },\n})\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles.scss';\n\n.legend-box {\n  font-size: 0.85rem;\n  padding: 0.5rem 0.75rem;\n  height: 100%;\n  min-height: 100%;\n  // border: var(--borderThin);\n}\n\n.section-row {\n  display: flex;\n  flex-direction: row;\n}\n\nb {\n  font-size: 1rem;\n  line-height: 1rem;\n}\n</style>\n"],"names":["_sfc_main","defineComponent","section","title","f","row"],"mappings":"+CAcA,MAAAA,EAAAC,EAAA,CACA,KAAA,YACA,MAAA,CACA,YAAA,CAAA,KAAA,OAAA,SAAA,EAAA,CACA,EACA,KAAA,KACA,IAEA,eAAA,CACA,KAAA,YAAA,OACA,EACA,SAAA,CACA,UAAA,CACA,OAAA,KAAA,YAAA,MAAA,QACA,CACA,EACA,QAAA,CACA,aAAAC,EAAA,CACA,IAAAC,EAAAD,EAAA,OAEA,OAAAA,EAAA,eAAAC,GAAA,MAAAD,EAAA,YAAA,IAEAA,EAAA,SACAC,GAAA,YACAD,EAAA,OACAC,GAAA,WAGAA,CACA,EAEA,iBAAAD,EAAA,CACA,OAAAA,EAEAA,EAAA,OAAA,OAAAE,GAAA,CAAA,OAAA,MAAAA,EAAA,KAAA,CAAA,EAFA,MAIA,EAEA,YAAAC,EAAA,CACA,OAAAA,EAAA,KACA,EAEA,YAAAA,EAAA,CACA,OAAA,MAAA,QAAAA,EAAA,KAAA,EAGA,CACA,gBAFA,OAAAA,EAAA,MAAA,CAAA,CAAA,IAAAA,EAAA,MAAA,CAAA,CAAA,IAAAA,EAAA,MAAA,CAAA,CAAA,IAGA,MAAA,OACA,OAAA,OACA,OAAA,qBAAA,EAKA,CACA,gBAAA,OACA,MAAA,OACA,OAAA,GAAAA,EAAA,MAAA,CAAA,KACA,OAAA,cAAA,CAKA,EAEA,cAAAA,EAAA,CACA,OAAA,MAAA,QAAAA,EAAA,KAAA,EAEA,CACA,WAAA,KAAA,EAIA,CACA,QAAA,OACA,cAAA,iBACA,WAAA,MACA,aAAA,MAAA,CAGA,CACA,CACA,CAAA"}