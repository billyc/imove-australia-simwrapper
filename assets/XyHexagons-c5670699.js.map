{"version":3,"file":"XyHexagons-c5670699.js","sources":["../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/color-utils.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/prop-utils.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/aggregation-layer.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/scale-utils.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/bin-sorter.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/utils/cpu-aggregator.js","../../node_modules/d3-hexbin/src/hexbin.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-aggregator.js","../../node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-layer.js","../../src/plugins/xy-hexagons/XyHexLayer.tsx","../../src/plugins/xy-hexagons/XyHexagons.vue"],"sourcesContent":["export const AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nexport function getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\nexport function getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\nexport function getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\nexport function getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\nexport function getValueFunc(aggregation, accessor, context) {\n  const op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return pts => getMin(pts, accessor);\n\n    case AGGREGATION_OPERATION.SUM:\n      return pts => getSum(pts, accessor);\n\n    case AGGREGATION_OPERATION.MEAN:\n      return pts => getMean(pts, accessor);\n\n    case AGGREGATION_OPERATION.MAX:\n      return pts => getMax(pts, accessor);\n\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor, context = {}) {\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n\n  return pt => {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nexport function wrapGetValueFunc(getValue, context = {}) {\n  return pts => {\n    context.indices = pts.map(pt => pt.index);\n    return getValue(pts.map(pt => pt.source), context);\n  };\n}\n//# sourceMappingURL=aggregation-operation-utils.js.map","export const defaultColorRange = [[255, 255, 178], [254, 217, 118], [254, 178, 76], [253, 141, 60], [240, 59, 32], [189, 0, 38]];\nexport function colorRangeToFlatArray(colorRange, normalize = false, ArrayType = Float32Array) {\n  let flatArray;\n\n  if (Number.isFinite(colorRange[0])) {\n    flatArray = new ArrayType(colorRange);\n  } else {\n    flatArray = new ArrayType(colorRange.length * 4);\n    let index = 0;\n\n    for (let i = 0; i < colorRange.length; i++) {\n      const color = colorRange[i];\n      flatArray[index++] = color[0];\n      flatArray[index++] = color[1];\n      flatArray[index++] = color[2];\n      flatArray[index++] = Number.isFinite(color[3]) ? color[3] : 255;\n    }\n  }\n\n  if (normalize) {\n    for (let i = 0; i < flatArray.length; i++) {\n      flatArray[i] /= 255;\n    }\n  }\n\n  return flatArray;\n}\n//# sourceMappingURL=color-utils.js.map","export function filterProps(props, filterKeys) {\n  const filteredProps = {};\n\n  for (const key in props) {\n    if (!filterKeys.includes(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n//# sourceMappingURL=prop-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { CompositeLayer, AttributeManager, _compareProps as compareProps } from '@deck.gl/core';\nimport { cssToDeviceRatio } from '@luma.gl/core';\nimport { filterProps } from './utils/prop-utils';\nexport default class AggregationLayer extends CompositeLayer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n  }\n\n  initializeAggregationLayer(dimensions) {\n    super.initializeState(this.context);\n    this.setState({\n      ignoreProps: filterProps(this.constructor._propTypes, dimensions.data.props),\n      dimensions\n    });\n  }\n\n  updateState(opts) {\n    super.updateState(opts);\n    const {\n      changeFlags\n    } = opts;\n\n    if (changeFlags.extensionsChanged) {\n      const shaders = this.getShaders({});\n\n      if (shaders && shaders.defines) {\n        shaders.defines.NON_INSTANCED_MODEL = 1;\n      }\n\n      this.updateShaders(shaders);\n    }\n\n    this._updateAttributes();\n  }\n\n  updateAttributes(changedAttributes) {\n    this.setState({\n      changedAttributes\n    });\n  }\n\n  getAttributes() {\n    return this.getAttributeManager().getShaderAttributes();\n  }\n\n  getModuleSettings() {\n    const {\n      viewport,\n      mousePosition,\n      gl\n    } = this.context;\n    const moduleSettings = Object.assign(Object.create(this.props), {\n      viewport,\n      mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(gl)\n    });\n    return moduleSettings;\n  }\n\n  updateShaders(shaders) {}\n\n  isAggregationDirty(updateOpts, params = {}) {\n    const {\n      props,\n      oldProps,\n      changeFlags\n    } = updateOpts;\n    const {\n      compareAll = false,\n      dimension\n    } = params;\n    const {\n      ignoreProps\n    } = this.state;\n    const {\n      props: dataProps,\n      accessors = []\n    } = dimension;\n    const {\n      updateTriggersChanged\n    } = changeFlags;\n\n    if (changeFlags.dataChanged) {\n      return true;\n    }\n\n    if (updateTriggersChanged) {\n      if (updateTriggersChanged.all) {\n        return true;\n      }\n\n      for (const accessor of accessors) {\n        if (updateTriggersChanged[accessor]) {\n          return true;\n        }\n      }\n    }\n\n    if (compareAll) {\n      if (changeFlags.extensionsChanged) {\n        return true;\n      }\n\n      return compareProps({\n        oldProps,\n        newProps: props,\n        ignoreProps,\n        propTypes: this.constructor._propTypes\n      });\n    }\n\n    for (const name of dataProps) {\n      if (props[name] !== oldProps[name]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  isAttributeChanged(name) {\n    const {\n      changedAttributes\n    } = this.state;\n\n    if (!name) {\n      return !isObjectEmpty(changedAttributes);\n    }\n\n    return changedAttributes && changedAttributes[name] !== undefined;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats\n    });\n  }\n\n}\n\n_defineProperty(AggregationLayer, \"layerName\", 'AggregationLayer');\n\nfunction isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=aggregation-layer.js.map","import { log } from '@deck.gl/core';\nexport function getScale(domain, range, scaleFunction) {\n  const scale = scaleFunction;\n\n  scale.domain = () => domain;\n\n  scale.range = () => range;\n\n  return scale;\n}\nexport function getQuantizeScale(domain, range) {\n  const scaleFunction = value => quantizeScale(domain, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getLinearScale(domain, range) {\n  const scaleFunction = value => linearScale(domain, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getQuantileScale(domain, range) {\n  const sortedDomain = domain.sort(ascending);\n  let i = 0;\n  const n = Math.max(1, range.length);\n  const thresholds = new Array(n - 1);\n\n  while (++i < n) {\n    thresholds[i - 1] = threshold(sortedDomain, i / n);\n  }\n\n  const scaleFunction = value => thresholdsScale(thresholds, range, value);\n\n  scaleFunction.thresholds = () => thresholds;\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction ascending(a, b) {\n  return a - b;\n}\n\nfunction threshold(domain, fraction) {\n  const domainLength = domain.length;\n\n  if (fraction <= 0 || domainLength < 2) {\n    return domain[0];\n  }\n\n  if (fraction >= 1) {\n    return domain[domainLength - 1];\n  }\n\n  const domainFraction = (domainLength - 1) * fraction;\n  const lowIndex = Math.floor(domainFraction);\n  const low = domain[lowIndex];\n  const high = domain[lowIndex + 1];\n  return low + (high - low) * (domainFraction - lowIndex);\n}\n\nfunction bisectRight(a, x) {\n  let lo = 0;\n  let hi = a.length;\n\n  while (lo < hi) {\n    const mid = lo + hi >>> 1;\n\n    if (ascending(a[mid], x) > 0) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  return lo;\n}\n\nfunction thresholdsScale(thresholds, range, value) {\n  return range[bisectRight(thresholds, value)];\n}\n\nfunction ordinalScale(domain, domainMap, range, value) {\n  const key = \"\".concat(value);\n  let d = domainMap.get(key);\n\n  if (d === undefined) {\n    d = domain.push(value);\n    domainMap.set(key, d);\n  }\n\n  return range[(d - 1) % range.length];\n}\n\nexport function getOrdinalScale(domain, range) {\n  const domainMap = new Map();\n  const uniqueDomain = [];\n\n  for (const d of domain) {\n    const key = \"\".concat(d);\n\n    if (!domainMap.has(key)) {\n      domainMap.set(key, uniqueDomain.push(d));\n    }\n  }\n\n  const scaleFunction = value => ordinalScale(uniqueDomain, domainMap, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function quantizeScale(domain, range, value) {\n  const domainRange = domain[1] - domain[0];\n\n  if (domainRange <= 0) {\n    log.warn('quantizeScale: invalid domain, returning range[0]')();\n    return range[0];\n  }\n\n  const step = domainRange / range.length;\n  const idx = Math.floor((value - domain[0]) / step);\n  const clampIdx = Math.max(Math.min(idx, range.length - 1), 0);\n  return range[clampIdx];\n}\nexport function linearScale(domain, range, value) {\n  return (value - domain[0]) / (domain[1] - domain[0]) * (range[1] - range[0]) + range[0];\n}\n\nfunction notNullOrUndefined(d) {\n  return d !== undefined && d !== null;\n}\n\nexport function unique(values) {\n  const results = [];\n  values.forEach(v => {\n    if (!results.includes(v) && notNullOrUndefined(v)) {\n      results.push(v);\n    }\n  });\n  return results;\n}\n\nfunction getTruthyValues(data, valueAccessor) {\n  const values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(notNullOrUndefined);\n}\n\nexport function getLinearDomain(data, valueAccessor) {\n  const sorted = getTruthyValues(data, valueAccessor).sort();\n  return sorted.length ? [sorted[0], sorted[sorted.length - 1]] : [0, 0];\n}\nexport function getQuantileDomain(data, valueAccessor) {\n  return getTruthyValues(data, valueAccessor);\n}\nexport function getOrdinalDomain(data, valueAccessor) {\n  return unique(getTruthyValues(data, valueAccessor));\n}\nexport function getScaleDomain(scaleType, data, valueAccessor) {\n  switch (scaleType) {\n    case 'quantize':\n    case 'linear':\n      return getLinearDomain(data, valueAccessor);\n\n    case 'quantile':\n      return getQuantileDomain(data, valueAccessor);\n\n    case 'ordinal':\n      return getOrdinalDomain(data, valueAccessor);\n\n    default:\n      return getLinearDomain(data, valueAccessor);\n  }\n}\nexport function clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\nexport function getScaleFunctionByScaleType(scaleType) {\n  switch (scaleType) {\n    case 'quantize':\n      return getQuantizeScale;\n\n    case 'linear':\n      return getLinearScale;\n\n    case 'quantile':\n      return getQuantileScale;\n\n    case 'ordinal':\n      return getOrdinalScale;\n\n    default:\n      return getQuantizeScale;\n  }\n}\n//# sourceMappingURL=scale-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nconst defaultGetValue = points => points.length;\n\nimport { clamp, getQuantileDomain, getOrdinalDomain } from './scale-utils';\nconst MAX_32_BIT_FLOAT = 3.402823466e38;\n\nconst defaultGetPoints = bin => bin.points;\n\nconst defaultGetIndex = bin => bin.index;\n\nconst ascending = (a, b) => a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n\nconst defaultProps = {\n  getValue: defaultGetValue,\n  getPoints: defaultGetPoints,\n  getIndex: defaultGetIndex,\n  filterData: null\n};\nexport default class BinSorter {\n  constructor(bins = [], props = defaultProps) {\n    _defineProperty(this, \"maxCount\", void 0);\n\n    _defineProperty(this, \"maxValue\", void 0);\n\n    _defineProperty(this, \"minValue\", void 0);\n\n    _defineProperty(this, \"totalCount\", void 0);\n\n    _defineProperty(this, \"aggregatedBins\", void 0);\n\n    _defineProperty(this, \"sortedBins\", void 0);\n\n    _defineProperty(this, \"binMap\", void 0);\n\n    this.aggregatedBins = this.getAggregatedBins(bins, props);\n\n    this._updateMinMaxValues();\n\n    this.binMap = this.getBinMap();\n  }\n\n  getAggregatedBins(bins, props) {\n    const {\n      getValue = defaultGetValue,\n      getPoints = defaultGetPoints,\n      getIndex = defaultGetIndex,\n      filterData\n    } = props;\n    const hasFilter = typeof filterData === 'function';\n    const binCount = bins.length;\n    const aggregatedBins = [];\n    let index = 0;\n\n    for (let binIndex = 0; binIndex < binCount; binIndex++) {\n      const bin = bins[binIndex];\n      const points = getPoints(bin);\n      const i = getIndex(bin);\n      const filteredPoints = hasFilter ? points.filter(filterData) : points;\n      bin.filteredPoints = hasFilter ? filteredPoints : null;\n      const value = filteredPoints.length ? getValue(filteredPoints) : null;\n\n      if (value !== null && value !== undefined) {\n        aggregatedBins[index] = {\n          i: Number.isFinite(i) ? i : binIndex,\n          value,\n          counts: filteredPoints.length\n        };\n        index++;\n      }\n    }\n\n    return aggregatedBins;\n  }\n\n  _percentileToIndex(percentileRange) {\n    const len = this.sortedBins.length;\n\n    if (len < 2) {\n      return [0, 0];\n    }\n\n    const [lower, upper] = percentileRange.map(n => clamp(n, 0, 100));\n    const lowerIdx = Math.ceil(lower / 100 * (len - 1));\n    const upperIdx = Math.floor(upper / 100 * (len - 1));\n    return [lowerIdx, upperIdx];\n  }\n\n  getBinMap() {\n    const binMap = {};\n\n    for (const bin of this.aggregatedBins) {\n      binMap[bin.i] = bin;\n    }\n\n    return binMap;\n  }\n\n  _updateMinMaxValues() {\n    let maxCount = 0;\n    let maxValue = 0;\n    let minValue = MAX_32_BIT_FLOAT;\n    let totalCount = 0;\n\n    for (const x of this.aggregatedBins) {\n      maxCount = maxCount > x.counts ? maxCount : x.counts;\n      maxValue = maxValue > x.value ? maxValue : x.value;\n      minValue = minValue < x.value ? minValue : x.value;\n      totalCount += x.counts;\n    }\n\n    this.maxCount = maxCount;\n    this.maxValue = maxValue;\n    this.minValue = minValue;\n    this.totalCount = totalCount;\n  }\n\n  getValueRange(percentileRange) {\n    if (!this.sortedBins) {\n      this.sortedBins = this.aggregatedBins.sort((a, b) => ascending(a.value, b.value));\n    }\n\n    if (!this.sortedBins.length) {\n      return [];\n    }\n\n    let lowerIdx = 0;\n    let upperIdx = this.sortedBins.length - 1;\n\n    if (Array.isArray(percentileRange)) {\n      const idxRange = this._percentileToIndex(percentileRange);\n\n      lowerIdx = idxRange[0];\n      upperIdx = idxRange[1];\n    }\n\n    return [this.sortedBins[lowerIdx].value, this.sortedBins[upperIdx].value];\n  }\n\n  getValueDomainByScale(scale, [lower = 0, upper = 100] = []) {\n    if (!this.sortedBins) {\n      this.sortedBins = this.aggregatedBins.sort((a, b) => ascending(a.value, b.value));\n    }\n\n    if (!this.sortedBins.length) {\n      return [];\n    }\n\n    const indexEdge = this._percentileToIndex([lower, upper]);\n\n    return this._getScaleDomain(scale, indexEdge);\n  }\n\n  _getScaleDomain(scaleType, [lowerIdx, upperIdx]) {\n    const bins = this.sortedBins;\n\n    switch (scaleType) {\n      case 'quantize':\n      case 'linear':\n        return [bins[lowerIdx].value, bins[upperIdx].value];\n\n      case 'quantile':\n        return getQuantileDomain(bins.slice(lowerIdx, upperIdx + 1), d => d.value);\n\n      case 'ordinal':\n        return getOrdinalDomain(bins, d => d.value);\n\n      default:\n        return [bins[lowerIdx].value, bins[upperIdx].value];\n    }\n  }\n\n}\n//# sourceMappingURL=bin-sorter.js.map","import BinSorter from './bin-sorter';\nimport { getScaleFunctionByScaleType } from './scale-utils';\nimport { getValueFunc, wrapGetValueFunc } from './aggregation-operation-utils';\n\nfunction nop() {}\n\nconst dimensionSteps = ['getBins', 'getDomain', 'getScaleFunc'];\nconst defaultDimensions = [{\n  key: 'fillColor',\n  accessor: 'getFillColor',\n  pickingInfo: 'colorValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getColorValue',\n        updateTrigger: 'getColorValue'\n      },\n      weight: {\n        prop: 'getColorWeight',\n        updateTrigger: 'getColorWeight'\n      },\n      aggregation: {\n        prop: 'colorAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'lowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'upperPercentile'\n      },\n      scaleType: {\n        prop: 'colorScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'colorDomain'\n      },\n      range: {\n        prop: 'colorRange'\n      }\n    },\n    onSet: {\n      props: 'onSetColorDomain'\n    }\n  },\n  nullValue: [0, 0, 0, 0]\n}, {\n  key: 'elevation',\n  accessor: 'getElevation',\n  pickingInfo: 'elevationValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getElevationValue',\n        updateTrigger: 'getElevationValue'\n      },\n      weight: {\n        prop: 'getElevationWeight',\n        updateTrigger: 'getElevationWeight'\n      },\n      aggregation: {\n        prop: 'elevationAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'elevationLowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'elevationUpperPercentile'\n      },\n      scaleType: {\n        prop: 'elevationScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'elevationDomain'\n      },\n      range: {\n        prop: 'elevationRange'\n      }\n    },\n    onSet: {\n      props: 'onSetElevationDomain'\n    }\n  },\n  nullValue: -1\n}];\n\nconst defaultGetCellSize = props => props.cellSize;\n\nexport default class CPUAggregator {\n  constructor(opts) {\n    this.state = {\n      layerData: {},\n      dimensions: {}\n    };\n    this.changeFlags = {};\n    this.dimensionUpdaters = {};\n    this._getCellSize = opts.getCellSize || defaultGetCellSize;\n    this._getAggregator = opts.getAggregator;\n\n    this._addDimension(opts.dimensions || defaultDimensions);\n  }\n\n  static defaultDimensions() {\n    return defaultDimensions;\n  }\n\n  updateState(opts, aggregationParams) {\n    const {\n      oldProps,\n      props,\n      changeFlags\n    } = opts;\n    this.updateGetValueFuncs(oldProps, props, changeFlags);\n    const reprojectNeeded = this.needsReProjectPoints(oldProps, props, changeFlags);\n    let aggregationDirty = false;\n\n    if (changeFlags.dataChanged || reprojectNeeded) {\n      this.getAggregatedData(props, aggregationParams);\n      aggregationDirty = true;\n    } else {\n      const dimensionChanges = this.getDimensionChanges(oldProps, props, changeFlags) || [];\n      dimensionChanges.forEach(f => typeof f === 'function' && f());\n      aggregationDirty = true;\n    }\n\n    this.setState({\n      aggregationDirty\n    });\n    return this.state;\n  }\n\n  setState(updateObject) {\n    this.state = { ...this.state,\n      ...updateObject\n    };\n  }\n\n  setDimensionState(key, updateObject) {\n    this.setState({\n      dimensions: { ...this.state.dimensions,\n        [key]: { ...this.state.dimensions[key],\n          ...updateObject\n        }\n      }\n    });\n  }\n\n  normalizeResult(result = {}) {\n    if (result.hexagons) {\n      return {\n        data: result.hexagons,\n        ...result\n      };\n    } else if (result.layerData) {\n      return {\n        data: result.layerData,\n        ...result\n      };\n    }\n\n    return result;\n  }\n\n  getAggregatedData(props, aggregationParams) {\n    const aggregator = this._getAggregator(props);\n\n    const result = aggregator(props, aggregationParams);\n    this.setState({\n      layerData: this.normalizeResult(result)\n    });\n    this.changeFlags = {\n      layerData: true\n    };\n    this.getSortedBins(props);\n  }\n\n  updateGetValueFuncs(oldProps, props, changeFlags) {\n    for (const key in this.dimensionUpdaters) {\n      const {\n        value,\n        weight,\n        aggregation\n      } = this.dimensionUpdaters[key].getBins.triggers;\n      let getValue = props[value.prop];\n      const getValueChanged = this.needUpdateDimensionStep(this.dimensionUpdaters[key].getBins, oldProps, props, changeFlags);\n\n      if (getValueChanged) {\n        if (getValue) {\n          getValue = wrapGetValueFunc(getValue, {\n            data: props.data\n          });\n        } else {\n          getValue = getValueFunc(props[aggregation.prop], props[weight.prop], {\n            data: props.data\n          });\n        }\n      }\n\n      if (getValue) {\n        this.setDimensionState(key, {\n          getValue\n        });\n      }\n    }\n  }\n\n  needsReProjectPoints(oldProps, props, changeFlags) {\n    return this._getCellSize(oldProps) !== this._getCellSize(props) || this._getAggregator(oldProps) !== this._getAggregator(props) || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPosition);\n  }\n\n  addDimension(dimensions) {\n    this._addDimension(dimensions);\n  }\n\n  _addDimension(dimensions = []) {\n    dimensions.forEach(dimension => {\n      const {\n        key\n      } = dimension;\n      this.dimensionUpdaters[key] = this.getDimensionUpdaters(dimension);\n      this.state.dimensions[key] = {\n        getValue: null,\n        domain: null,\n        sortedBins: null,\n        scaleFunc: nop\n      };\n    });\n  }\n\n  getDimensionUpdaters({\n    key,\n    accessor,\n    pickingInfo,\n    getBins,\n    getDomain,\n    getScaleFunc,\n    nullValue\n  }) {\n    return {\n      key,\n      accessor,\n      pickingInfo,\n      getBins: {\n        updater: this.getDimensionSortedBins,\n        ...getBins\n      },\n      getDomain: {\n        updater: this.getDimensionValueDomain,\n        ...getDomain\n      },\n      getScaleFunc: {\n        updater: this.getDimensionScale,\n        ...getScaleFunc\n      },\n      attributeAccessor: this.getSubLayerDimensionAttribute(key, nullValue)\n    };\n  }\n\n  needUpdateDimensionStep(dimensionStep, oldProps, props, changeFlags) {\n    return Object.values(dimensionStep.triggers).some(item => {\n      if (item.updateTrigger) {\n        return changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged[item.updateTrigger]);\n      }\n\n      return oldProps[item.prop] !== props[item.prop];\n    });\n  }\n\n  getDimensionChanges(oldProps, props, changeFlags) {\n    const updaters = [];\n\n    for (const key in this.dimensionUpdaters) {\n      const needUpdate = dimensionSteps.find(step => this.needUpdateDimensionStep(this.dimensionUpdaters[key][step], oldProps, props, changeFlags));\n\n      if (needUpdate) {\n        updaters.push(this.dimensionUpdaters[key][needUpdate].updater.bind(this, props, this.dimensionUpdaters[key]));\n      }\n    }\n\n    return updaters.length ? updaters : null;\n  }\n\n  getUpdateTriggers(props) {\n    const _updateTriggers = props.updateTriggers || {};\n\n    const updateTriggers = {};\n\n    for (const key in this.dimensionUpdaters) {\n      const {\n        accessor\n      } = this.dimensionUpdaters[key];\n      updateTriggers[accessor] = {};\n      dimensionSteps.forEach(step => {\n        Object.values(this.dimensionUpdaters[key][step].triggers).forEach(({\n          prop,\n          updateTrigger\n        }) => {\n          if (updateTrigger) {\n            const fromProp = _updateTriggers[updateTrigger];\n\n            if (typeof fromProp === 'object' && !Array.isArray(fromProp)) {\n              Object.assign(updateTriggers[accessor], fromProp);\n            } else if (fromProp !== undefined) {\n              updateTriggers[accessor][prop] = fromProp;\n            }\n          } else {\n            updateTriggers[accessor][prop] = props[prop];\n          }\n        });\n      });\n    }\n\n    return updateTriggers;\n  }\n\n  getSortedBins(props) {\n    for (const key in this.dimensionUpdaters) {\n      this.getDimensionSortedBins(props, this.dimensionUpdaters[key]);\n    }\n  }\n\n  getDimensionSortedBins(props, dimensionUpdater) {\n    const {\n      key\n    } = dimensionUpdater;\n    const {\n      getValue\n    } = this.state.dimensions[key];\n    const sortedBins = new BinSorter(this.state.layerData.data || [], {\n      getValue,\n      filterData: props._filterData\n    });\n    this.setDimensionState(key, {\n      sortedBins\n    });\n    this.getDimensionValueDomain(props, dimensionUpdater);\n  }\n\n  getDimensionValueDomain(props, dimensionUpdater) {\n    const {\n      getDomain,\n      key\n    } = dimensionUpdater;\n    const {\n      triggers: {\n        lowerPercentile,\n        upperPercentile,\n        scaleType\n      }\n    } = getDomain;\n    const valueDomain = this.state.dimensions[key].sortedBins.getValueDomainByScale(props[scaleType.prop], [props[lowerPercentile.prop], props[upperPercentile.prop]]);\n    this.setDimensionState(key, {\n      valueDomain\n    });\n    this.getDimensionScale(props, dimensionUpdater);\n  }\n\n  getDimensionScale(props, dimensionUpdater) {\n    const {\n      key,\n      getScaleFunc,\n      getDomain\n    } = dimensionUpdater;\n    const {\n      domain,\n      range\n    } = getScaleFunc.triggers;\n    const {\n      scaleType\n    } = getDomain.triggers;\n    const {\n      onSet\n    } = getScaleFunc;\n    const dimensionRange = props[range.prop];\n    const dimensionDomain = props[domain.prop] || this.state.dimensions[key].valueDomain;\n    const getScaleFunction = getScaleFunctionByScaleType(scaleType && props[scaleType.prop]);\n    const scaleFunc = getScaleFunction(dimensionDomain, dimensionRange);\n\n    if (typeof onSet === 'object' && typeof props[onSet.props] === 'function') {\n      props[onSet.props](scaleFunc.domain());\n    }\n\n    this.setDimensionState(key, {\n      scaleFunc\n    });\n  }\n\n  getSubLayerDimensionAttribute(key, nullValue) {\n    return cell => {\n      const {\n        sortedBins,\n        scaleFunc\n      } = this.state.dimensions[key];\n      const bin = sortedBins.binMap[cell.index];\n\n      if (bin && bin.counts === 0) {\n        return nullValue;\n      }\n\n      const cv = bin && bin.value;\n      const domain = scaleFunc.domain();\n      const isValueInDomain = cv >= domain[0] && cv <= domain[domain.length - 1];\n      return isValueInDomain ? scaleFunc(cv) : nullValue;\n    };\n  }\n\n  getSubLayerAccessors(props) {\n    const accessors = {};\n\n    for (const key in this.dimensionUpdaters) {\n      const {\n        accessor\n      } = this.dimensionUpdaters[key];\n      accessors[accessor] = this.getSubLayerDimensionAttribute(props, key);\n    }\n\n    return accessors;\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    const isPicked = info.picked && info.index > -1;\n    let object = null;\n\n    if (isPicked) {\n      const cell = this.state.layerData.data[info.index];\n      const binInfo = {};\n\n      for (const key in this.dimensionUpdaters) {\n        const {\n          pickingInfo\n        } = this.dimensionUpdaters[key];\n        const {\n          sortedBins\n        } = this.state.dimensions[key];\n        const value = sortedBins.binMap[cell.index] && sortedBins.binMap[cell.index].value;\n        binInfo[pickingInfo] = value;\n      }\n\n      object = Object.assign(binInfo, cell, {\n        points: cell.filteredPoints || cell.points\n      });\n    }\n\n    info.picked = Boolean(object);\n    info.object = object;\n    return info;\n  }\n\n  getAccessor(dimensionKey) {\n    if (!this.dimensionUpdaters.hasOwnProperty(dimensionKey)) {\n      return nop;\n    }\n\n    return this.dimensionUpdaters[dimensionKey].attributeAccessor;\n  }\n\n}\n//# sourceMappingURL=cpu-aggregator.js.map","var thirdPi = Math.PI / 3,\n    angles = [0, thirdPi, 2 * thirdPi, 3 * thirdPi, 4 * thirdPi, 5 * thirdPi];\n\nfunction pointX(d) {\n  return d[0];\n}\n\nfunction pointY(d) {\n  return d[1];\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      x = pointX,\n      y = pointY,\n      r,\n      dx,\n      dy;\n\n  function hexbin(points) {\n    var binsById = {}, bins = [], i, n = points.length;\n\n    for (i = 0; i < n; ++i) {\n      if (isNaN(px = +x.call(null, point = points[i], i, points))\n          || isNaN(py = +y.call(null, point, i, points))) continue;\n\n      var point,\n          px,\n          py,\n          pj = Math.round(py = py / dy),\n          pi = Math.round(px = px / dx - (pj & 1) / 2),\n          py1 = py - pj;\n\n      if (Math.abs(py1) * 3 > 1) {\n        var px1 = px - pi,\n            pi2 = pi + (px < pi ? -1 : 1) / 2,\n            pj2 = pj + (py < pj ? -1 : 1),\n            px2 = px - pi2,\n            py2 = py - pj2;\n        if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n      }\n\n      var id = pi + \"-\" + pj, bin = binsById[id];\n      if (bin) bin.push(point);\n      else {\n        bins.push(bin = binsById[id] = [point]);\n        bin.x = (pi + (pj & 1) / 2) * dx;\n        bin.y = pj * dy;\n      }\n    }\n\n    return bins;\n  }\n\n  function hexagon(radius) {\n    var x0 = 0, y0 = 0;\n    return angles.map(function(angle) {\n      var x1 = Math.sin(angle) * radius,\n          y1 = -Math.cos(angle) * radius,\n          dx = x1 - x0,\n          dy = y1 - y0;\n      x0 = x1, y0 = y1;\n      return [dx, dy];\n    });\n  }\n\n  hexbin.hexagon = function(radius) {\n    return \"m\" + hexagon(radius == null ? r : +radius).join(\"l\") + \"z\";\n  };\n\n  hexbin.centers = function() {\n    var centers = [],\n        j = Math.round(y0 / dy),\n        i = Math.round(x0 / dx);\n    for (var y = j * dy; y < y1 + r; y += dy, ++j) {\n      for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {\n        centers.push([x, y]);\n      }\n    }\n    return centers;\n  };\n\n  hexbin.mesh = function() {\n    var fragment = hexagon(r).slice(0, 4).join(\"l\");\n    return hexbin.centers().map(function(p) { return \"M\" + p + \"m\" + fragment; }).join(\"\");\n  };\n\n  hexbin.x = function(_) {\n    return arguments.length ? (x = _, hexbin) : x;\n  };\n\n  hexbin.y = function(_) {\n    return arguments.length ? (y = _, hexbin) : y;\n  };\n\n  hexbin.radius = function(_) {\n    return arguments.length ? (r = +_, dx = r * 2 * Math.sin(thirdPi), dy = r * 1.5, hexbin) : r;\n  };\n\n  hexbin.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], hexbin) : [x1 - x0, y1 - y0];\n  };\n\n  hexbin.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], hexbin) : [[x0, y0], [x1, y1]];\n  };\n\n  return hexbin.radius(1);\n}\n","import { hexbin } from 'd3-hexbin';\nimport { createIterable, log } from '@deck.gl/core';\nexport function pointToHexbin(props, aggregationParams) {\n  const {\n    data,\n    radius\n  } = props;\n  const {\n    viewport,\n    attributes\n  } = aggregationParams;\n  const centerLngLat = data.length ? getPointsCenter(data, aggregationParams) : null;\n  const radiusCommon = getRadiusInCommon(radius, viewport, centerLngLat);\n  const screenPoints = [];\n  const {\n    iterable,\n    objectInfo\n  } = createIterable(data);\n  const positions = attributes.positions.value;\n  const {\n    size\n  } = attributes.positions.getAccessor();\n\n  for (const object of iterable) {\n    objectInfo.index++;\n    const posIndex = objectInfo.index * size;\n    const position = [positions[posIndex], positions[posIndex + 1]];\n    const arrayIsFinite = Number.isFinite(position[0]) && Number.isFinite(position[1]);\n\n    if (arrayIsFinite) {\n      screenPoints.push({\n        screenCoord: viewport.projectFlat(position),\n        source: object,\n        index: objectInfo.index\n      });\n    } else {\n      log.warn('HexagonLayer: invalid position')();\n    }\n  }\n\n  const newHexbin = hexbin().radius(radiusCommon).x(d => d.screenCoord[0]).y(d => d.screenCoord[1]);\n  const hexagonBins = newHexbin(screenPoints);\n  return {\n    hexagons: hexagonBins.map((hex, index) => ({\n      position: viewport.unprojectFlat([hex.x, hex.y]),\n      points: hex,\n      index\n    })),\n    radiusCommon\n  };\n}\nexport function getPointsCenter(data, aggregationParams) {\n  const {\n    attributes\n  } = aggregationParams;\n  const positions = attributes.positions.value;\n  const {\n    size\n  } = attributes.positions.getAccessor();\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  let i;\n\n  for (i = 0; i < size * data.length; i += size) {\n    const x = positions[i];\n    const y = positions[i + 1];\n    const arrayIsFinite = Number.isFinite(x) && Number.isFinite(y);\n\n    if (arrayIsFinite) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [minX, minY, maxX, maxY].every(Number.isFinite) ? [(minX + maxX) / 2, (minY + maxY) / 2] : null;\n}\nexport function getRadiusInCommon(radius, viewport, center) {\n  const {\n    unitsPerMeter\n  } = viewport.getDistanceScales(center);\n  return radius * unitsPerMeter[0];\n}\n//# sourceMappingURL=hexagon-aggregator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { log } from '@deck.gl/core';\nimport { ColumnLayer } from '@deck.gl/layers';\nimport { defaultColorRange } from '../utils/color-utils';\nimport { pointToHexbin } from './hexagon-aggregator';\nimport CPUAggregator from '../utils/cpu-aggregator';\nimport AggregationLayer from '../aggregation-layer';\n\nfunction nop() {}\n\nconst defaultProps = {\n  colorDomain: null,\n  colorRange: defaultColorRange,\n  getColorValue: {\n    type: 'accessor',\n    value: null\n  },\n  getColorWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  colorAggregation: 'SUM',\n  lowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  upperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  colorScaleType: 'quantize',\n  onSetColorDomain: nop,\n  elevationDomain: null,\n  elevationRange: [0, 1000],\n  getElevationValue: {\n    type: 'accessor',\n    value: null\n  },\n  getElevationWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  elevationAggregation: 'SUM',\n  elevationLowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  elevationUpperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  elevationScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  elevationScaleType: 'linear',\n  onSetElevationDomain: nop,\n  radius: {\n    type: 'number',\n    value: 1000,\n    min: 1\n  },\n  coverage: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  extruded: false,\n  hexagonAggregator: pointToHexbin,\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  material: true,\n  _filterData: {\n    type: 'function',\n    value: null,\n    optional: true\n  }\n};\nexport default class HexagonLayer extends AggregationLayer {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", void 0);\n  }\n\n  initializeState() {\n    const cpuAggregator = new CPUAggregator({\n      getAggregator: props => props.hexagonAggregator,\n      getCellSize: props => props.radius\n    });\n    this.state = {\n      cpuAggregator,\n      aggregatorState: cpuAggregator.state,\n      vertices: null\n    };\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {\n        size: 3,\n        type: 5130,\n        accessor: 'getPosition'\n      }\n    });\n  }\n\n  updateState(opts) {\n    super.updateState(opts);\n\n    if (opts.changeFlags.propsOrDataChanged) {\n      const aggregatorState = this.state.cpuAggregator.updateState(opts, {\n        viewport: this.context.viewport,\n        attributes: this.getAttributes()\n      });\n\n      if (this.state.aggregatorState.layerData !== aggregatorState.layerData) {\n        const {\n          hexagonVertices\n        } = aggregatorState.layerData || {};\n        this.setState({\n          vertices: hexagonVertices && this.convertLatLngToMeterOffset(hexagonVertices)\n        });\n      }\n\n      this.setState({\n        aggregatorState\n      });\n    }\n  }\n\n  convertLatLngToMeterOffset(hexagonVertices) {\n    const {\n      viewport\n    } = this.context;\n\n    if (Array.isArray(hexagonVertices) && hexagonVertices.length === 6) {\n      const vertex0 = hexagonVertices[0];\n      const vertex3 = hexagonVertices[3];\n      const centroid = [(vertex0[0] + vertex3[0]) / 2, (vertex0[1] + vertex3[1]) / 2];\n      const centroidFlat = viewport.projectFlat(centroid);\n      const {\n        metersPerUnit\n      } = viewport.getDistanceScales(centroid);\n      const vertices = hexagonVertices.map(vt => {\n        const vtFlat = viewport.projectFlat(vt);\n        return [(vtFlat[0] - centroidFlat[0]) * metersPerUnit[0], (vtFlat[1] - centroidFlat[1]) * metersPerUnit[1]];\n      });\n      return vertices;\n    }\n\n    log.error('HexagonLayer: hexagonVertices needs to be an array of 6 points')();\n    return null;\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    return this.state.cpuAggregator.getPickingInfo({\n      info\n    });\n  }\n\n  _onGetSublayerColor(cell) {\n    return this.state.cpuAggregator.getAccessor('fillColor')(cell);\n  }\n\n  _onGetSublayerElevation(cell) {\n    return this.state.cpuAggregator.getAccessor('elevation')(cell);\n  }\n\n  _getSublayerUpdateTriggers() {\n    return this.state.cpuAggregator.getUpdateTriggers(this.props);\n  }\n\n  renderLayers() {\n    const {\n      elevationScale,\n      extruded,\n      coverage,\n      material,\n      transitions\n    } = this.props;\n    const {\n      aggregatorState,\n      vertices\n    } = this.state;\n    const SubLayerClass = this.getSubLayerClass('hexagon-cell', ColumnLayer);\n\n    const updateTriggers = this._getSublayerUpdateTriggers();\n\n    const geometry = vertices ? {\n      vertices,\n      radius: 1\n    } : {\n      radius: aggregatorState.layerData.radiusCommon || 1,\n      radiusUnits: 'common',\n      angle: 90\n    };\n    return new SubLayerClass({ ...geometry,\n      diskResolution: 6,\n      elevationScale,\n      extruded,\n      coverage,\n      material,\n      getFillColor: this._onGetSublayerColor.bind(this),\n      getElevation: this._onGetSublayerElevation.bind(this),\n      transitions: transitions && {\n        getFillColor: transitions.getColorValue || transitions.getColorWeight,\n        getElevation: transitions.getElevationValue || transitions.getElevationWeight\n      }\n    }, this.getSubLayerProps({\n      id: 'hexagon-cell',\n      updateTriggers\n    }), {\n      data: aggregatorState.layerData.data\n    });\n  }\n\n}\n\n_defineProperty(HexagonLayer, \"layerName\", 'HexagonLayer');\n\n_defineProperty(HexagonLayer, \"defaultProps\", defaultProps);\n//# sourceMappingURL=hexagon-layer.js.map","import React, { useState, useMemo, useEffect } from 'react'\nimport DeckGL from '@deck.gl/react'\nimport { StaticMap, InteractiveMap } from 'react-map-gl'\nimport { ArcLayer } from '@deck.gl/layers'\nimport { HexagonLayer } from '@deck.gl/aggregation-layers'\nimport colormap from 'colormap'\n\nimport globalStore from '@/store'\nimport { MAPBOX_TOKEN, REACT_VIEW_HANDLES } from '@/Globals'\n\nconst material = {\n  ambient: 0.64,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [51, 51, 51],\n}\n\n// LAYER --------------------------------------------------------\nexport default function Layer({\n  viewId = 0,\n  colorRamp = 'chlorophyll',\n  coverage = 0.65,\n  dark = false,\n  data = { raw: new Float32Array(0), length: 0 },\n  extrude = true,\n  highlights = [],\n  mapIsIndependent = false,\n  maxHeight = 200,\n  metric = 'Count',\n  radius = 100,\n  selectedHexStats = { rows: 0, numHexagons: 0, selectedHexagonIds: [] },\n  upperPercentile = 100,\n  onClick = {} as any,\n}) {\n  // manage SimWrapper centralized viewState - for linked maps\n  const [viewState, setViewState] = useState(globalStore.state.viewState)\n\n  REACT_VIEW_HANDLES[viewId] = (view: any) => {\n    if (view) {\n      setViewState(view)\n    } else {\n      setViewState(globalStore.state.viewState)\n    }\n  }\n\n  function handleViewState(view: any) {\n    if (!view.latitude) return\n\n    if (!view.center) view.center = [0, 0]\n    view.center[0] = view.longitude\n    view.center[1] = view.latitude\n    setViewState(view)\n\n    if (!mapIsIndependent) globalStore.commit('setMapCamera', view)\n  }\n\n  const colors = colormap({\n    colormap: colorRamp,\n    nshades: 10,\n    format: 'rba',\n    alpha: 1,\n  }).map((c: number[]) => [c[0], c[1], c[2]])\n\n  function getTooltip({ object }: any) {\n    if (!object || !object.position || !object.position.length) {\n      return null\n    }\n\n    const lat = object.position[1]\n    const lng = object.position[0]\n    const count = object.points.length\n\n    return {\n      html: `\\\n        <b>${highlights.length ? 'Count' : metric}: ${count} </b><br/>\n        ${Number.isFinite(lat) ? lat.toFixed(4) : ''} / ${\n        Number.isFinite(lng) ? lng.toFixed(4) : ''\n      }\n      `,\n      style: dark\n        ? { color: '#ccc', backgroundColor: '#2a3c4f' }\n        : { color: '#223', backgroundColor: 'white' },\n    }\n  }\n\n  function handleClick(target: any, event: any) {\n    onClick(target, event)\n  }\n\n  // is data filtered or not?\n  let rows = null\n  if (highlights.length) {\n    rows = highlights.map(row => row[1])\n  } else if (!data.length) {\n    rows = null\n  } else {\n    rows = {\n      length: data.length,\n      attributes: {\n        getPosition: { value: data.raw, size: 2 },\n      },\n    }\n  }\n\n  const layers = [\n    new ArcLayer({\n      id: 'arc-layer',\n      data: highlights,\n      getSourcePosition: (d: any) => d[0],\n      getTargetPosition: (d: any) => d[1],\n      pickable: false,\n      opacity: 0.4,\n      getHeight: 0,\n      getWidth: 1,\n      getSourceColor: dark ? [144, 96, 128] : [192, 192, 240],\n      getTargetColor: dark ? [144, 96, 128] : [192, 192, 240],\n    }),\n    new HexagonLayer({\n      id: 'hexlayer',\n      data: rows,\n      getPosition: highlights.length ? (d: any) => d : null,\n      colorRange: dark ? colors.slice(1) : colors.reverse().slice(1),\n      coverage,\n      autoHighlight: true,\n      elevationRange: [0, maxHeight],\n      elevationScale: data && data.length ? 50 : 0,\n      extruded: extrude,\n      selectedHexStats,\n      // hexagonAggregator: pointToHexbin,\n      pickable: true,\n      opacity: 0.7, // dark && highlights.length ? 0.6 : 0.8,\n      radius,\n      upperPercentile,\n      material,\n      transitions: {\n        elevationScale: { type: 'interpolation', duration: 1000 },\n        opacity: { type: 'interpolation', duration: 200 },\n      },\n    }),\n  ]\n\n  return (\n    <DeckGL\n      layers={layers}\n      controller={true}\n      useDevicePixels={false}\n      viewState={viewState}\n      getTooltip={getTooltip}\n      onClick={handleClick}\n      onViewStateChange={(e: any) => handleViewState(e.viewState)}\n    >\n      {\n        /*\n        // @ts-ignore */\n        <StaticMap\n          mapStyle={globalStore.getters.mapStyle}\n          preventStyleDiffing={true}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n        />\n      }\n    </DeckGL>\n  )\n}\n","<template lang=\"pug\">\n.xy-hexagons(:class=\"{'hide-thumbnail': !thumbnail}\" oncontextmenu=\"return false\" :id=\"`id-${id}`\")\n\n  xy-hex-deck-map.hex-layer(\n    v-if=\"!thumbnail && isLoaded\"\n    v-bind=\"mapProps\"\n  )\n\n  zoom-buttons(v-if=\"!thumbnail\")\n  //- drawing-tool.drawing-tool(v-if=\"!thumbnail\")\n\n  .left-side(v-if=\"isLoaded && !thumbnail && vizDetails.title\")\n    collapsible-panel(direction=\"left\" :locked=\"true\")\n      .panel-items(v-if=\"hexStats\" style=\"color: #c0f;\")\n        p.big(style=\"margin-top: 2rem;\") {{ $t('selection') }}:\n        h3(style=\"margin-top: -1rem;\") {{ $t('areas') }}: {{ hexStats.numHexagons }}, {{ $t('count') }}: {{ hexStats.rows }}\n        button.button(style=\"color: #c0f; border-color: #c0f\" @click=\"handleShowSelectionButton\") {{ $t('showDetails') }}\n\n  .control-panel(v-if=\"isLoaded && !thumbnail && !myState.statusMessage\")\n        //- :class=\"{'is-dashboard': config !== undefined }\"\n\n        .panel-item(v-for=\"group in Object.keys(aggregations)\" :key=\"group\")\n          p.ui-label {{ group }}\n          button.button.is-small.aggregation-button(\n            v-for=\"element,i in aggregations[group]\"\n            :key=\"i\"\n            :style=\"{'margin-bottom': '0.25rem', 'color': activeAggregation===`${group}~${i}` ? 'white' : buttonColors[i], 'border': `1px solid ${buttonColors[i]}`, 'border-right': `0.4rem solid ${buttonColors[i]}`,'border-radius': '4px', 'background-color': activeAggregation===`${group}~${i}` ? buttonColors[i] : $store.state.isDarkMode ? '#333':'white'}\"\n            @click=\"handleOrigDest(group,i)\") {{ element.title }}\n\n        .panel-item\n          p.ui-label {{ $t('maxHeight') }}: {{ vizDetails.maxHeight }}\n          b-slider.ui-slider(v-model=\"vizDetails.maxHeight\"\n            size=\"is-small\"\n            :min=\"0\" :max=\"250\" :step=\"5\"\n            :duration=\"0\" :dotSize=\"12\"\n            :tooltip=\"false\"\n          )\n\n          p.ui-label Hex Radius: {{ vizDetails.radius }}\n          b-slider.ui-slider(v-model=\"vizDetails.radius\"\n            size=\"is-small\"\n            :min=\"50\" :max=\"1000\" :step=\"5\"\n            :duration=\"0\" :dotSize=\"12\"\n            :tooltip=\"false\"\n          )\n\n  .message(v-if=\"!thumbnail && myState.statusMessage\")\n    p.status-message {{ myState.statusMessage }}\n\n</template>\n\n<script lang=\"ts\">\nconst i18n = {\n  messages: {\n    en: {\n      loading: 'Loading data...',\n      sorting: 'Sorting into bins...',\n      aggregate: 'Summary',\n      maxHeight: '3D Height',\n      showDetails: 'Show Details',\n      selection: 'Selection',\n      areas: 'Areas',\n      count: 'Count',\n    },\n    de: {\n      loading: 'Dateien laden...',\n      sorting: 'Sortieren...',\n      aggregate: 'Daten',\n      maxHeight: '3-D Höhe',\n      showDetails: 'Details anzeigen',\n      selection: 'Ausgewählt',\n      areas: 'Orte',\n      count: 'Anzahl',\n    },\n  },\n}\nimport Vue from 'vue'\nimport { defineComponent } from 'vue'\nimport type { PropType } from 'vue'\n\nimport { ToggleButton } from 'vue-js-toggle-button'\nimport YAML from 'yaml'\n\nimport util from '@/js/util'\nimport globalStore from '@/store'\nimport { REACT_VIEW_HANDLES } from '@/Globals'\n\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\n\nimport CSVParserWorker from './CsvGzipParser.worker.ts?worker'\nimport CollapsiblePanel from '@/components/CollapsiblePanel.vue'\nimport DrawingTool from '@/components/DrawingTool/DrawingTool.vue'\nimport ZoomButtons from '@/components/ZoomButtons.vue'\nimport XyHexDeckMap from './XyHexLayer'\n\nimport {\n  ColorScheme,\n  FileSystem,\n  LegendItem,\n  LegendItemType,\n  FileSystemConfig,\n  VisualizationPlugin,\n  Status,\n} from '@/Globals'\n\ninterface Aggregations {\n  [heading: string]: {\n    title: string\n    x: string\n    y: string\n  }[]\n}\n\ninterface VizDetail {\n  title: string\n  description?: string\n  file: string\n  projection: any\n  thumbnail?: string\n  elements?: string\n  aggregations: Aggregations\n  radius: number\n  maxHeight: number\n  center: any\n  zoom: number\n  mapIsIndependent?: boolean\n}\n\nconst MyComponent = defineComponent({\n  name: 'XyHexagonsPlugin',\n  i18n,\n  components: {\n    CollapsiblePanel,\n    DrawingTool,\n    XyHexDeckMap,\n    ToggleButton,\n    ZoomButtons,\n  },\n  props: {\n    root: { type: String, required: true },\n    subfolder: { type: String, required: true },\n    yamlConfig: String,\n    config: Object,\n    thumbnail: Boolean,\n  },\n  data: () => {\n    const colorRamps = ['bathymetry', 'par', 'chlorophyll', 'magma']\n    return {\n      id: `id-${Math.floor(1e12 * Math.random())}` as any,\n      standaloneYAMLconfig: {\n        title: '',\n        description: '',\n        file: '',\n        projection: '',\n        thumbnail: '',\n        aggregations: {},\n        radius: 250,\n        maxHeight: 0,\n        center: null as any,\n        zoom: 9,\n        mapIsIndependent: false,\n      },\n      YAMLrequirementsXY: { file: '', aggregations: {} },\n      colorRamps,\n      buttonColors: ['#5E8AAE', '#BF7230', '#269367', '#9C439C'],\n      aggregations: {} as Aggregations,\n      columnLookup: [] as number[],\n      gzipWorker: null as Worker | null,\n      colorRamp: colorRamps[0],\n      globalState: globalStore.state,\n      vizDetails: {\n        title: '',\n        description: '',\n        file: '',\n        projection: '',\n        thumbnail: '',\n        aggregations: {},\n        radius: 250,\n        maxHeight: 0,\n        center: null as any,\n        zoom: 9,\n      } as VizDetail,\n      myState: {\n        statusMessage: '',\n        subfolder: '',\n        yamlConfig: '',\n        thumbnail: false,\n      },\n      rowCache: {} as {\n        [id: string]: { raw: Float32Array; length: number; coordColumns: number[] }\n      },\n      requests: { raw: new Float32Array(0), length: 0 } as { raw: Float32Array; length: number },\n      highlightedTrips: [] as any[],\n      searchTerm: '',\n      searchEnabled: false,\n      isLoaded: false,\n      activeAggregation: '',\n      isHighlightingZone: false,\n      multiSelectedHexagons: {} as { [index: string]: any[] },\n      thumbnailUrl: \"url('assets/thumbnail.jpg') no-repeat;\",\n      hexStats: null as null | {\n        rows: number\n        numHexagons: number\n        selectedHexagonIds: any[]\n      },\n      resizer: null as ResizeObserver | null,\n    }\n  },\n  computed: {\n    fileApi(): HTTPFileSystem {\n      return new HTTPFileSystem(this.fileSystem, globalStore)\n    },\n    fileSystem(): FileSystemConfig {\n      const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\n        (a: FileSystemConfig) => a.slug === this.root\n      )\n      if (svnProject.length === 0) {\n        console.log('no such project')\n        throw Error\n      }\n      return svnProject[0]\n    },\n\n    urlThumbnail(): any {\n      return this.thumbnailUrl\n    },\n\n    buttonLabel(): string {\n      const [group, offset] = this.activeAggregation.split('~') as any[]\n      return this.aggregations[group][offset].title\n    },\n    extrudeTowers(): boolean {\n      return this.vizDetails.maxHeight > 0\n    },\n\n    mapProps(): any {\n      return {\n        viewId: this.id,\n        colorRamp: this.colorRamp,\n        coverage: 0.65,\n        dark: this.$store.state.isDarkMode,\n        data: this.requests,\n        extrude: this.extrudeTowers,\n        highlights: this.highlightedTrips,\n        mapIsIndependent: this.vizDetails.mapIsIndependent,\n        maxHeight: this.vizDetails.maxHeight,\n        metric: this.buttonLabel,\n        radius: this.vizDetails.radius,\n        selectedHexStats: this.hexStats,\n        upperPercentile: 100,\n        onClick: this.handleClick,\n      }\n    },\n    textColor(): any {\n      const lightmode = {\n        text: '#3498db',\n        bg: '#eeeef480',\n      }\n\n      const darkmode = {\n        text: 'white',\n        bg: '#181518aa',\n      }\n\n      return this.$store.state.colorScheme === ColorScheme.DarkMode ? darkmode : lightmode\n    },\n  },\n  watch: {\n    extrudeTowers() {\n      if (this.extrudeTowers && this.globalState.viewState.pitch == 0) {\n        // globalStore.commit(\n        //   'setMapCamera',\n        //   Object.assign({}, this.globalState.viewState, { pitch: 10 })\n        // )\n      }\n    },\n    '$store.state.viewState'() {\n      if (this.vizDetails.mapIsIndependent) return\n      if (REACT_VIEW_HANDLES[this.id]) REACT_VIEW_HANDLES[this.id]()\n    },\n  },\n  methods: {\n    handleClick(target: any, event: any) {\n      console.log({ target, event })\n      if (!target.layer) this.handleEmptyClick()\n      else this.handleHexClick(target, event)\n    },\n\n    handleEmptyClick() {\n      this.flipViewToShowInvertedData({})\n    },\n\n    handleHexClick(pickedObject: any, event: any) {\n      if (!event.srcEvent.shiftKey) {\n        this.multiSelectedHexagons = {}\n        this.hexStats = null\n        this.flipViewToShowInvertedData(pickedObject)\n        return\n      }\n\n      // SHIFT!!\n      const index = pickedObject?.object?.index\n      if (index !== undefined) {\n        if (index in this.multiSelectedHexagons) {\n          delete this.multiSelectedHexagons[index]\n        } else {\n          this.multiSelectedHexagons[index] = pickedObject.object.points\n        }\n        this.hexStats = this.selectedHexagonStatistics()\n      }\n    },\n\n    flipViewToShowInvertedData(pickedObject: any) {\n      if (this.isHighlightingZone) {\n        // force highlight off if user clicked on a second hex\n        this.isHighlightingZone = false\n      } else if (!pickedObject.object) {\n        // force highlight off if user clicked away\n        this.isHighlightingZone = false\n      } else {\n        this.isHighlightingZone = true\n      }\n\n      const parts = this.activeAggregation.split('~') // an unlikely unicode\n\n      let suffix = 0\n      let revSuffix = 0\n\n      // set up the hexagons\n      if (!this.isHighlightingZone) {\n        // reset the view\n        this.hexStats = null\n        this.multiSelectedHexagons = {}\n        this.handleOrigDest(parts[0], parseInt(parts[1]))\n      } else {\n        // select the anti-view\n        suffix = parseInt(parts[1])\n        revSuffix = suffix % 2 ? suffix - 1 : suffix + 1\n\n        const origKey = `${parts[0]}${suffix}`\n        const origArray = this.rowCache[origKey]\n\n        const key = `${parts[0]}${revSuffix}`\n        const inverseArray = this.rowCache[key]\n\n        const arcFilteredRows: any = []\n\n        for (const row of pickedObject.object.points) {\n          const zoffset = row.index * 2\n          const coords = [inverseArray.raw[zoffset], inverseArray.raw[zoffset + 1]]\n\n          arcFilteredRows.push([\n            // from\n            [origArray.raw[zoffset], origArray.raw[zoffset + 1]],\n            // to\n            coords,\n          ])\n          this.highlightedTrips = arcFilteredRows\n        }\n\n        if (this.hexStats) this.hexStats.selectedHexagonIds = []\n        this.multiSelectedHexagons = {}\n\n        this.colorRamp = this.colorRamps[revSuffix]\n      }\n\n      // set up the connecting arc-lines\n      if (!this.isHighlightingZone) {\n        this.highlightedTrips = []\n      } else {\n        // this.highlightedTrips = arcFilteredRows\n      }\n    },\n\n    async handleOrigDest(groupName: string, number: number) {\n      const cacheKey = groupName + number\n\n      this.hexStats = null\n      this.multiSelectedHexagons = {}\n\n      // const xytitle = this.aggregations[groupName][number]\n      // const x = this.columnLookup.indexOf(xytitle.x)\n      // const y = this.columnLookup.indexOf(xytitle.y)\n\n      this.highlightedTrips = []\n      this.activeAggregation = `${groupName}~${number}`\n\n      // get element offsets in data array\n      // const col = this.aggregations[item]\n      // this.whichCoords = { x, y }\n\n      // this.requests = this.rawRequests.map(r => [r[x], r[y]]).filter(z => z[0] && z[1])\n      // this.requests = this.rawRequests\n      this.requests = this.rowCache[cacheKey]\n      this.colorRamp = this.colorRamps[number]\n    },\n\n    async solveProjection() {\n      if (this.thumbnail) return\n\n      console.log('WHAT PROJECTION:')\n\n      try {\n        const text = await this.fileApi.getFileText(\n          this.myState.subfolder + '/' + this.myState.yamlConfig\n        )\n        this.vizDetails = YAML.parse(text)\n      } catch (e) {\n        console.error(e)\n      }\n    },\n\n    async getVizDetails() {\n      if (this.config) {\n        this.validateYAML()\n        this.vizDetails = Object.assign({}, this.config) as VizDetail\n        this.setRadiusAndHeight()\n        return\n      }\n\n      const hasYaml = new RegExp('.*(yml|yaml)$').test(this.myState.yamlConfig)\n\n      if (hasYaml) {\n        await this.loadStandaloneYAMLConfig()\n      } else {\n        this.loadOutputTripsConfig()\n      }\n    },\n\n    loadOutputTripsConfig() {\n      let projection = 'EPSG:31468' // 'EPSG:25832', // 'EPSG:31468', // TODO: fix\n      if (!this.myState.thumbnail) {\n        projection = prompt('Enter projection: e.g. \"EPSG:31468\"') || 'EPSG:31468'\n        if (!!parseInt(projection, 10)) projection = 'EPSG:' + projection\n      }\n\n      this.vizDetails = {\n        title: 'Output Trips',\n        description: this.myState.yamlConfig,\n        file: this.myState.yamlConfig,\n        projection,\n        aggregations: {\n          'Trip Summary': [\n            { title: 'Origins', x: 'start_x', y: 'start_y' },\n            { title: 'Destinations', x: 'end_x', y: 'end_y' },\n          ],\n        },\n        radius: this.vizDetails.radius,\n        maxHeight: this.vizDetails.maxHeight,\n        center: this.vizDetails.center,\n        zoom: this.vizDetails.zoom,\n      }\n      this.$emit('title', this.vizDetails.title)\n      // this.solveProjection()\n      return\n    },\n\n    setRadiusAndHeight() {\n      if (!this.vizDetails.radius) {\n        Vue.set(this.vizDetails, 'radius', 250)\n      }\n\n      if (!this.vizDetails.maxHeight) {\n        Vue.set(this.vizDetails, 'maxHeight', 0)\n      }\n    },\n\n    async loadStandaloneYAMLConfig() {\n      try {\n        // might be a project config:\n        const filename =\n          this.myState.yamlConfig.indexOf('/') > -1\n            ? this.myState.yamlConfig\n            : this.myState.subfolder + '/' + this.myState.yamlConfig\n\n        const text = await this.fileApi.getFileText(filename)\n        this.standaloneYAMLconfig = Object.assign({}, YAML.parse(text))\n        this.validateYAML()\n        this.setVizDetails()\n      } catch (err) {\n        const e = err as any\n        console.log('failed')\n\n        this.$emit('error', {\n          type: Status.ERROR,\n          msg: `File not found`,\n          desc: `Could not find: ${this.myState.subfolder}/${this.myState.yamlConfig}`,\n        })\n      }\n    },\n\n    validateYAML() {\n      const hasYaml = new RegExp('.*(yml|yaml)$').test(this.myState.yamlConfig)\n      let configuration = {} as any\n\n      if (hasYaml) {\n        console.log('has yaml')\n        configuration = this.standaloneYAMLconfig\n      } else {\n        console.log('no yaml')\n        configuration = this.config\n      }\n\n      for (const key in this.YAMLrequirementsXY) {\n        if (!(key in configuration)) {\n          this.$emit('error', {\n            type: Status.ERROR,\n            msg: `XYHexagon: ${this.yamlConfig}: missing required key: ${key}`,\n            desc: `XYHexagon requires ${Object.keys(this.YAMLrequirementsXY)}`,\n          })\n        }\n      }\n\n      if (configuration.radius == 0) {\n        this.$emit('error', {\n          type: Status.WARNING,\n          msg: `Radius set to zero`,\n          desc: 'Radius can not be zero, preset value used instead. ',\n        })\n      }\n\n      if (configuration.zoom < 5 || configuration.zoom > 20) {\n        this.$emit('error', {\n          type: Status.WARNING,\n          msg: `Zoom is out of the recommended range `,\n          desc: 'Zoom levels should be between 5 and 20. ',\n        })\n      }\n    },\n\n    setVizDetails() {\n      this.vizDetails = Object.assign({}, this.vizDetails, this.standaloneYAMLconfig)\n\n      this.setRadiusAndHeight()\n\n      const t = this.vizDetails.title ? this.vizDetails.title : 'Hex Aggregation'\n      this.$emit('title', t)\n    },\n\n    async buildThumbnail() {\n      if (this.thumbnail && this.vizDetails.thumbnail) {\n        try {\n          const blob = await this.fileApi.getFileBlob(\n            this.myState.subfolder + '/' + this.vizDetails.thumbnail\n          )\n          const buffer = await blob.arrayBuffer()\n          const base64 = util.arrayBufferToBase64(buffer)\n          if (base64)\n            this.thumbnailUrl = `center / cover no-repeat url(data:image/png;base64,${base64})`\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    },\n    handleShowSelectionButton() {\n      const arrays = Object.values(this.multiSelectedHexagons)\n      let points: any[] = []\n      arrays.map(a => (points = points.concat(a)))\n\n      const pickedObject = { object: { points } }\n      this.flipViewToShowInvertedData(pickedObject)\n    },\n\n    selectedHexagonStatistics(): {\n      rows: number\n      numHexagons: number\n      selectedHexagonIds: any[]\n    } | null {\n      const selectedHexes = Object.keys(this.multiSelectedHexagons).map(a => parseInt(a))\n      if (!selectedHexes.length) return null\n\n      const arrays = Object.values(this.multiSelectedHexagons)\n      const ll = arrays.reduce((a: number, v: any) => a + v.length, 0)\n\n      return { rows: ll, numHexagons: selectedHexes.length, selectedHexagonIds: selectedHexes }\n    },\n\n    async setMapCenter() {\n      const data = Object.values(this.rowCache)[0].raw\n\n      // If user gave us the center, use it\n      if (this.vizDetails.center) {\n        if (typeof this.vizDetails.center == 'string') {\n          this.vizDetails.center = this.vizDetails.center.split(',').map(Number)\n        }\n\n        const view = {\n          longitude: this.vizDetails.center[0],\n          latitude: this.vizDetails.center[1],\n          bearing: 0,\n          pitch: 20,\n          zoom: this.vizDetails.zoom || 10, // use 10 default if we don't have a zoom\n          jump: false, // move the map no matter what\n        }\n\n        // bounce our map\n        if (REACT_VIEW_HANDLES[this.id]) REACT_VIEW_HANDLES[this.id](view)\n\n        // Sets the map to the specified data\n        this.$store.commit('setMapCamera', Object.assign({}, view))\n\n        return\n      }\n\n      // user didn't give us the center, so calculate it\n      if (!data.length) return\n\n      let samples = 0\n      let longitude = 0\n      let latitude = 0\n\n      const numLinks = data.length / 2\n\n      const gap = 512\n      for (let i = 0; i < numLinks; i += gap) {\n        longitude += data[i * 2]\n        latitude += data[i * 2 + 1]\n        samples++\n      }\n\n      longitude = longitude / samples\n      latitude = latitude / samples\n\n      const currentView = this.$store.state.viewState\n\n      if (longitude && latitude) {\n        this.$store.commit('setMapCamera', {\n          longitude,\n          latitude,\n          bearing: currentView.bearing,\n          pitch: currentView.pitch,\n          zoom: this.vizDetails.zoom || currentView.zoom,\n          jump: false,\n        })\n      }\n    },\n\n    setupLogoMover() {\n      this.resizer = new ResizeObserver(this.moveLogo)\n      const deckmap = document.getElementById(`id-${this.id}`) as HTMLElement\n      this.resizer.observe(deckmap)\n    },\n\n    moveLogo() {\n      const deckmap = document.getElementById(`id-${this.id}`) as HTMLElement\n      const logo = deckmap?.querySelector('.mapboxgl-ctrl-bottom-left') as HTMLElement\n      if (logo) {\n        const right = deckmap.clientWidth > 640 ? '280px' : '36px'\n        logo.style.right = right\n      }\n    },\n\n    async parseCSVFile(filename: string) {\n      this.myState.statusMessage = 'Loading file...'\n\n      // get the raw unzipped arraybuffer\n      this.gzipWorker = new CSVParserWorker()\n\n      this.gzipWorker.onmessage = async (buffer: MessageEvent) => {\n        if (buffer.data.status) {\n          this.myState.statusMessage = buffer.data.status\n        } else if (buffer.data.error) {\n          this.myState.statusMessage = buffer.data.error\n          this.$emit('error', {\n            type: Status.ERROR,\n            msg: `Loading Error`,\n            desc: 'Error loading: ${this.myState.subfolder}/${this.vizDetails.file}',\n          })\n        } else {\n          const { rowCache, columnLookup } = buffer.data\n          if (this.gzipWorker) this.gzipWorker.terminate()\n          this.dataIsLoaded({ rowCache, columnLookup })\n        }\n      }\n\n      this.gzipWorker.postMessage({\n        filepath: filename,\n        fileSystem: this.fileSystem,\n        aggregations: this.vizDetails.aggregations,\n        projection: this.vizDetails.projection,\n      })\n    },\n\n    dataIsLoaded({ rowCache, columnLookup }: any) {\n      this.columnLookup = columnLookup\n      this.rowCache = rowCache\n\n      const agg = this.activeAggregation.replaceAll('~', '')\n      this.requests = this.rowCache[agg]\n\n      this.setMapCenter()\n      this.moveLogo()\n      this.myState.statusMessage = ''\n    },\n\n    async loadFiles() {\n      let dataArray: any = []\n      if (!this.fileApi) return { dataArray }\n\n      try {\n        let filename = `${this.myState.subfolder}/${this.vizDetails.file}`\n        await this.parseCSVFile(filename)\n      } catch (e) {\n        console.error(e)\n        this.myState.statusMessage = '' + e\n        this.$emit('error', {\n          type: Status.ERROR,\n          msg: `Loading/Parsing Error`,\n          desc: 'Error loading/parsing: ${this.myState.subfolder}/${this.vizDetails.file}',\n        })\n      }\n    },\n  },\n  async mounted() {\n    this.$store.commit('setFullScreen', !this.thumbnail)\n\n    this.myState.thumbnail = this.thumbnail\n    this.myState.yamlConfig = this.yamlConfig || ''\n    this.myState.subfolder = this.subfolder\n\n    await this.getVizDetails()\n\n    if (this.thumbnail) return\n\n    this.setupLogoMover()\n\n    this.myState.statusMessage = `${this.$i18n.t('loading')}`\n    this.aggregations = this.vizDetails.aggregations\n\n    // console.log('loading files')\n    await this.loadFiles()\n\n    // this.mapState.center = this.findCenter(this.rawRequests)\n\n    this.buildThumbnail()\n\n    this.isLoaded = true\n    this.handleOrigDest(Object.keys(this.aggregations)[0], 0) // show first data\n  },\n\n  beforeDestroy() {\n    // MUST erase the React view handle to prevent gigantic memory leak!\n    REACT_VIEW_HANDLES[this.id] = undefined\n    delete REACT_VIEW_HANDLES[this.id]\n\n    try {\n      if (this.gzipWorker) {\n        this.gzipWorker.terminate()\n      }\n    } catch (e) {\n      console.warn(e)\n    }\n\n    this.$store.commit('setFullScreen', false)\n  },\n})\n\nexport default MyComponent\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles.scss';\n\n.xy-hexagons {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  min-height: $thumbnailHeight;\n  background: url('assets/thumbnail.jpg') center / cover no-repeat;\n  z-index: -1;\n}\n\n.xy-hexagons.hide-thumbnail {\n  background: none;\n  z-index: 0;\n}\n\n.message {\n  z-index: 5;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  box-shadow: 0px 2px 10px #22222222;\n  display: flex;\n  flex-direction: row;\n  margin: auto auto 0 0;\n  background-color: var(--bgPanel);\n  padding: 0.5rem 1.5rem;\n\n  a {\n    color: white;\n    text-decoration: none;\n\n    &.router-link-exact-active {\n      color: white;\n    }\n  }\n\n  p {\n    font-size: 1.2rem;\n    line-height: 1.5rem;\n    font-weight: normal;\n    color: var(--textFancy);\n  }\n}\n\n.ui-slider {\n  padding: 0 0;\n  margin: 0.2rem 0 0.6rem 0;\n  min-width: 7rem;\n}\n\n.status-message {\n  font-size: 1.5rem;\n  line-height: 1.75rem;\n  font-weight: bold;\n}\n\n.big {\n  padding: 0.5rem 0;\n  font-size: 1.5rem;\n  line-height: 1.7rem;\n  font-weight: bold;\n}\n\n.left-side {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  font-size: 0.8rem;\n  pointer-events: auto;\n  margin: 0 0 0 0;\n}\n\n.control-panel {\n  position: absolute;\n  bottom: 0;\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8rem;\n  margin: 0 0 0.5rem 0.5rem;\n  pointer-events: auto;\n  background-color: var(--bgPanel);\n  padding: 0.5rem 0.5rem;\n  filter: drop-shadow(0px 2px 4px #22222233);\n}\n\n.is-dashboard {\n  position: static;\n  margin: 0 0;\n  padding: 0.25rem 0 0 0;\n  filter: unset;\n  background-color: unset;\n}\n\n.hex-layer {\n  pointer-events: auto;\n}\n\n.ui-label {\n  font-size: 0.8rem;\n  font-weight: bold;\n}\n\n.tooltip {\n  padding: 5rem 5rem;\n  background-color: #ccc;\n}\n\n.panel-items {\n  margin: 0.5rem 0.5rem;\n}\n\n.panel-item {\n  display: flex;\n  flex-direction: column;\n  margin-right: 1rem;\n  margin-left: 0.25rem;\n}\n\n.right {\n  margin-left: auto;\n}\n\ninput {\n  border: none;\n  background-color: #235;\n  color: #ccc;\n}\n\n.row {\n  display: 'grid';\n  grid-template-columns: 'auto 1fr';\n}\n\n.drawing-tool {\n  position: absolute;\n  top: 0;\n  right: 0;\n  pointer-events: none;\n}\n\n@media only screen and (max-width: 640px) {\n  .message {\n    padding: 0.5rem 0.5rem;\n  }\n\n  .right-side {\n    font-size: 0.7rem;\n  }\n\n  .big {\n    padding: 0 0rem;\n    margin-top: 0.5rem;\n    font-size: 1.3rem;\n    line-height: 2rem;\n  }\n}\n</style>\n"],"names":["AGGREGATION_OPERATION","sumReducer","accu","cur","maxReducer","minReducer","getMean","pts","accessor","filtered","getSum","getMax","getMin","getValueFunc","aggregation","context","op","wrapAccessor","pt","wrapGetValueFunc","getValue","defaultColorRange","filterProps","props","filterKeys","filteredProps","key","AggregationLayer","CompositeLayer","args","_defineProperty","dimensions","opts","changeFlags","shaders","changedAttributes","viewport","mousePosition","gl","cssToDeviceRatio","updateOpts","params","oldProps","compareAll","dimension","ignoreProps","dataProps","accessors","updateTriggersChanged","compareProps","name","isObjectEmpty","AttributeManager","obj","isEmpty","getScale","domain","range","scaleFunction","scale","getQuantizeScale","value","quantizeScale","getLinearScale","linearScale","getQuantileScale","sortedDomain","ascending","i","thresholds","threshold","thresholdsScale","a","b","fraction","domainLength","domainFraction","lowIndex","low","high","bisectRight","x","lo","hi","mid","ordinalScale","domainMap","d","getOrdinalScale","uniqueDomain","domainRange","log","step","idx","clampIdx","notNullOrUndefined","unique","values","results","v","getTruthyValues","data","valueAccessor","getQuantileDomain","getOrdinalDomain","clamp","min","max","getScaleFunctionByScaleType","scaleType","defaultGetValue","points","MAX_32_BIT_FLOAT","defaultGetPoints","bin","defaultGetIndex","defaultProps","BinSorter","bins","getPoints","getIndex","filterData","hasFilter","binCount","aggregatedBins","index","binIndex","filteredPoints","percentileRange","len","lower","upper","n","lowerIdx","upperIdx","binMap","maxCount","maxValue","minValue","totalCount","idxRange","indexEdge","nop","dimensionSteps","defaultDimensions","defaultGetCellSize","CPUAggregator","aggregationParams","reprojectNeeded","aggregationDirty","f","updateObject","result","weight","pickingInfo","getBins","getDomain","getScaleFunc","nullValue","dimensionStep","item","updaters","needUpdate","_updateTriggers","updateTriggers","prop","updateTrigger","fromProp","dimensionUpdater","sortedBins","lowerPercentile","upperPercentile","valueDomain","onSet","dimensionRange","dimensionDomain","scaleFunc","cell","cv","info","isPicked","object","binInfo","dimensionKey","thirdPi","angles","pointX","pointY","hexbin","x0","y0","x1","y1","y","r","dx","dy","binsById","px","point","py","pj","pi","py1","px1","pi2","pj2","px2","py2","id","hexagon","radius","angle","centers","j","fragment","p","_","pointToHexbin","attributes","centerLngLat","getPointsCenter","radiusCommon","getRadiusInCommon","screenPoints","iterable","objectInfo","createIterable","positions","size","posIndex","position","hex","minX","minY","maxX","maxY","center","unitsPerMeter","HexagonLayer","cpuAggregator","aggregatorState","hexagonVertices","vertex0","vertex3","centroid","centroidFlat","metersPerUnit","vt","vtFlat","elevationScale","extruded","coverage","material","transitions","vertices","SubLayerClass","ColumnLayer","geometry","Layer","viewId","colorRamp","dark","extrude","highlights","mapIsIndependent","maxHeight","metric","selectedHexStats","onClick","viewState","setViewState","useState","globalStore","REACT_VIEW_HANDLES","view","handleViewState","colors","colormap","c","getTooltip","lat","lng","count","handleClick","target","event","rows","row","layers","ArcLayer","React","DeckGL","e","StaticMap","MAPBOX_TOKEN","i18n","MyComponent","defineComponent","CollapsiblePanel","DrawingTool","XyHexDeckMap","ToggleButton","ZoomButtons","colorRamps","HTTPFileSystem","svnProject","group","offset","lightmode","darkmode","ColorScheme","pickedObject","_a","parts","suffix","revSuffix","origKey","origArray","inverseArray","arcFilteredRows","zoffset","coords","groupName","number","cacheKey","text","YAML","projection","Vue","filename","Status","hasYaml","configuration","t","buffer","base64","util","arrays","selectedHexes","samples","longitude","latitude","numLinks","gap","currentView","deckmap","logo","right","CSVParserWorker","rowCache","columnLookup","agg","dataArray"],"mappings":"g5BAAO,MAAMA,EAAwB,CACnC,IAAK,EACL,KAAM,EACN,IAAK,EACL,IAAK,CACP,EAEA,SAASC,EAAWC,EAAMC,EAAK,CAC7B,OAAOD,EAAOC,CAChB,CAEA,SAASC,GAAWF,EAAMC,EAAK,CAC7B,OAAOA,EAAMD,EAAOC,EAAMD,CAC5B,CAEA,SAASG,GAAWH,EAAMC,EAAK,CAC7B,OAAOA,EAAMD,EAAOC,EAAMD,CAC5B,CAEO,SAASI,GAAQC,EAAKC,EAAU,CACrC,GAAI,OAAO,SAASA,CAAQ,EAC1B,OAAOD,EAAI,OAASC,EAAW,KAGjC,MAAMC,EAAWF,EAAI,IAAIC,CAAQ,EAAE,OAAO,OAAO,QAAQ,EACzD,OAAOC,EAAS,OAASA,EAAS,OAAOR,EAAY,CAAC,EAAIQ,EAAS,OAAS,IAC9E,CACO,SAASC,GAAOH,EAAKC,EAAU,CACpC,GAAI,OAAO,SAASA,CAAQ,EAC1B,OAAOD,EAAI,OAASA,EAAI,OAASC,EAAW,KAG9C,MAAMC,EAAWF,EAAI,IAAIC,CAAQ,EAAE,OAAO,OAAO,QAAQ,EACzD,OAAOC,EAAS,OAASA,EAAS,OAAOR,EAAY,CAAC,EAAI,IAC5D,CACO,SAASU,GAAOJ,EAAKC,EAAU,CACpC,GAAI,OAAO,SAASA,CAAQ,EAC1B,OAAOD,EAAI,OAASC,EAAW,KAGjC,MAAMC,EAAWF,EAAI,IAAIC,CAAQ,EAAE,OAAO,OAAO,QAAQ,EACzD,OAAOC,EAAS,OAASA,EAAS,OAAOL,GAAY,IAAS,EAAI,IACpE,CACO,SAASQ,GAAOL,EAAKC,EAAU,CACpC,GAAI,OAAO,SAASA,CAAQ,EAC1B,OAAOD,EAAI,OAASC,EAAW,KAGjC,MAAMC,EAAWF,EAAI,IAAIC,CAAQ,EAAE,OAAO,OAAO,QAAQ,EACzD,OAAOC,EAAS,OAASA,EAAS,OAAOJ,GAAY,GAAQ,EAAI,IACnE,CACO,SAASQ,GAAaC,EAAaN,EAAUO,EAAS,CAC3D,MAAMC,EAAKhB,EAAsBc,CAAW,GAAKd,EAAsB,IAGvE,OAFAQ,EAAWS,GAAaT,EAAUO,CAAO,EAEjCC,EAAE,CACR,KAAKhB,EAAsB,IACzB,OAAOO,GAAOK,GAAOL,EAAKC,CAAQ,EAEpC,KAAKR,EAAsB,IACzB,OAAOO,GAAOG,GAAOH,EAAKC,CAAQ,EAEpC,KAAKR,EAAsB,KACzB,OAAOO,GAAOD,GAAQC,EAAKC,CAAQ,EAErC,KAAKR,EAAsB,IACzB,OAAOO,GAAOI,GAAOJ,EAAKC,CAAQ,EAEpC,QACE,OAAO,IACV,CACH,CAEA,SAASS,GAAaT,EAAUO,EAAU,GAAI,CAC5C,OAAI,OAAO,SAASP,CAAQ,EACnBA,EAGFU,IACLH,EAAQ,MAAQG,EAAG,MACZV,EAASU,EAAG,OAAQH,CAAO,EAEtC,CAEO,SAASI,GAAiBC,EAAUL,EAAU,GAAI,CACvD,OAAOR,IACLQ,EAAQ,QAAUR,EAAI,IAAIW,GAAMA,EAAG,KAAK,EACjCE,EAASb,EAAI,IAAIW,GAAMA,EAAG,MAAM,EAAGH,CAAO,EAErD,CCzFO,MAAMM,GAAoB,CAAC,CAAC,IAAK,IAAK,GAAG,EAAG,CAAC,IAAK,IAAK,GAAG,EAAG,CAAC,IAAK,IAAK,EAAE,EAAG,CAAC,IAAK,IAAK,EAAE,EAAG,CAAC,IAAK,GAAI,EAAE,EAAG,CAAC,IAAK,EAAG,EAAE,CAAC,ECAxH,SAASC,GAAYC,EAAOC,EAAY,CAC7C,MAAMC,EAAgB,CAAA,EAEtB,UAAWC,KAAOH,EACXC,EAAW,SAASE,CAAG,IAC1BD,EAAcC,CAAG,EAAIH,EAAMG,CAAG,GAIlC,OAAOD,CACT,CCNe,MAAME,UAAyBC,EAAe,CAC3D,eAAeC,EAAM,CACnB,MAAM,GAAGA,CAAI,EAEbC,EAAgB,KAAM,QAAS,MAAM,CACtC,CAED,2BAA2BC,EAAY,CACrC,MAAM,gBAAgB,KAAK,OAAO,EAClC,KAAK,SAAS,CACZ,YAAaT,GAAY,KAAK,YAAY,WAAYS,EAAW,KAAK,KAAK,EAC3E,WAAAA,CACN,CAAK,CACF,CAED,YAAYC,EAAM,CAChB,MAAM,YAAYA,CAAI,EACtB,KAAM,CACJ,YAAAC,CACD,EAAGD,EAEJ,GAAIC,EAAY,kBAAmB,CACjC,MAAMC,EAAU,KAAK,WAAW,CAAE,CAAA,EAE9BA,GAAWA,EAAQ,UACrBA,EAAQ,QAAQ,oBAAsB,GAGxC,KAAK,cAAcA,CAAO,CAC3B,CAED,KAAK,kBAAiB,CACvB,CAED,iBAAiBC,EAAmB,CAClC,KAAK,SAAS,CACZ,kBAAAA,CACN,CAAK,CACF,CAED,eAAgB,CACd,OAAO,KAAK,sBAAsB,qBACnC,CAED,mBAAoB,CAClB,KAAM,CACJ,SAAAC,EACA,cAAAC,EACA,GAAAC,CACN,EAAQ,KAAK,QAOT,OANuB,OAAO,OAAO,OAAO,OAAO,KAAK,KAAK,EAAG,CAC9D,SAAAF,EACA,cAAAC,EACA,cAAe,EACf,iBAAkBE,GAAiBD,CAAE,CAC3C,CAAK,CAEF,CAED,cAAcJ,EAAS,CAAE,CAEzB,mBAAmBM,EAAYC,EAAS,GAAI,CAC1C,KAAM,CACJ,MAAAlB,EACA,SAAAmB,EACA,YAAAT,CACD,EAAGO,EACE,CACJ,WAAAG,EAAa,GACb,UAAAC,CACD,EAAGH,EACE,CACJ,YAAAI,CACN,EAAQ,KAAK,MACH,CACJ,MAAOC,EACP,UAAAC,EAAY,CAAE,CACf,EAAGH,EACE,CACJ,sBAAAI,CACD,EAAGf,EAEJ,GAAIA,EAAY,YACd,MAAO,GAGT,GAAIe,EAAuB,CACzB,GAAIA,EAAsB,IACxB,MAAO,GAGT,UAAWxC,KAAYuC,EACrB,GAAIC,EAAsBxC,CAAQ,EAChC,MAAO,EAGZ,CAED,GAAImC,EACF,OAAIV,EAAY,kBACP,GAGFgB,GAAa,CAClB,SAAAP,EACA,SAAUnB,EACV,YAAAsB,EACA,UAAW,KAAK,YAAY,UACpC,CAAO,EAGH,UAAWK,KAAQJ,EACjB,GAAIvB,EAAM2B,CAAI,IAAMR,EAASQ,CAAI,EAC/B,MAAO,GAIX,MAAO,EACR,CAED,mBAAmBA,EAAM,CACvB,KAAM,CACJ,kBAAAf,CACN,EAAQ,KAAK,MAET,OAAKe,EAIEf,GAAqBA,EAAkBe,CAAI,IAAM,OAH/C,CAACC,GAAchB,CAAiB,CAI1C,CAED,sBAAuB,CACrB,OAAO,IAAIiB,GAAiB,KAAK,QAAQ,GAAI,CAC3C,GAAI,KAAK,MAAM,GACf,MAAO,KAAK,QAAQ,KAC1B,CAAK,CACF,CAEH,CAEAtB,EAAgBH,EAAkB,YAAa,kBAAkB,EAEjE,SAASwB,GAAcE,EAAK,CAC1B,IAAIC,EAAU,GAEd,UAAW5B,KAAO2B,EAAK,CACrBC,EAAU,GACV,KACD,CAED,OAAOA,CACT,CC3JO,SAASC,EAASC,EAAQC,EAAOC,EAAe,CACrD,MAAMC,EAAQD,EAEd,OAAAC,EAAM,OAAS,IAAMH,EAErBG,EAAM,MAAQ,IAAMF,EAEbE,CACT,CACO,SAASC,EAAiBJ,EAAQC,EAAO,CAG9C,OAAOF,EAASC,EAAQC,EAFFI,GAASC,GAAcN,EAAQC,EAAOI,CAAK,CAErB,CAC9C,CACO,SAASE,GAAeP,EAAQC,EAAO,CAG5C,OAAOF,EAASC,EAAQC,EAFFI,GAASG,GAAYR,EAAQC,EAAOI,CAAK,CAEnB,CAC9C,CACO,SAASI,GAAiBT,EAAQC,EAAO,CAC9C,MAAMS,EAAeV,EAAO,KAAKW,CAAS,EAC1C,IAAIC,EAAI,EACR,MAAM,EAAI,KAAK,IAAI,EAAGX,EAAM,MAAM,EAC5BY,EAAa,IAAI,MAAM,EAAI,CAAC,EAElC,KAAO,EAAED,EAAI,GACXC,EAAWD,EAAI,CAAC,EAAIE,GAAUJ,EAAcE,EAAI,CAAC,EAGnD,MAAMV,EAAgBG,GAASU,GAAgBF,EAAYZ,EAAOI,CAAK,EAEvE,OAAAH,EAAc,WAAa,IAAMW,EAE1Bd,EAASC,EAAQC,EAAOC,CAAa,CAC9C,CAEA,SAASS,EAAUK,EAAGC,EAAG,CACvB,OAAOD,EAAIC,CACb,CAEA,SAASH,GAAUd,EAAQkB,EAAU,CACnC,MAAMC,EAAenB,EAAO,OAE5B,GAAIkB,GAAY,GAAKC,EAAe,EAClC,OAAOnB,EAAO,CAAC,EAGjB,GAAIkB,GAAY,EACd,OAAOlB,EAAOmB,EAAe,CAAC,EAGhC,MAAMC,GAAkBD,EAAe,GAAKD,EACtCG,EAAW,KAAK,MAAMD,CAAc,EACpCE,EAAMtB,EAAOqB,CAAQ,EACrBE,EAAOvB,EAAOqB,EAAW,CAAC,EAChC,OAAOC,GAAOC,EAAOD,IAAQF,EAAiBC,EAChD,CAEA,SAASG,GAAYR,EAAGS,EAAG,CACzB,IAAIC,EAAK,EACLC,EAAKX,EAAE,OAEX,KAAOU,EAAKC,GAAI,CACd,MAAMC,EAAMF,EAAKC,IAAO,EAEpBhB,EAAUK,EAAEY,CAAG,EAAGH,CAAC,EAAI,EACzBE,EAAKC,EAELF,EAAKE,EAAM,CAEd,CAED,OAAOF,CACT,CAEA,SAASX,GAAgBF,EAAYZ,EAAOI,EAAO,CACjD,OAAOJ,EAAMuB,GAAYX,EAAYR,CAAK,CAAC,CAC7C,CAEA,SAASwB,GAAa7B,EAAQ8B,EAAW7B,EAAOI,EAAO,CACrD,MAAMnC,EAAM,GAAG,OAAOmC,CAAK,EAC3B,IAAI0B,EAAID,EAAU,IAAI5D,CAAG,EAEzB,OAAI6D,IAAM,SACRA,EAAI/B,EAAO,KAAKK,CAAK,EACrByB,EAAU,IAAI5D,EAAK6D,CAAC,GAGf9B,GAAO8B,EAAI,GAAK9B,EAAM,MAAM,CACrC,CAEO,SAAS+B,GAAgBhC,EAAQC,EAAO,CAC7C,MAAM6B,EAAY,IAAI,IAChBG,EAAe,CAAA,EAErB,UAAWF,KAAK/B,EAAQ,CACtB,MAAM9B,EAAM,GAAG,OAAO6D,CAAC,EAElBD,EAAU,IAAI5D,CAAG,GACpB4D,EAAU,IAAI5D,EAAK+D,EAAa,KAAKF,CAAC,CAAC,CAE1C,CAID,OAAOhC,EAASC,EAAQC,EAFFI,GAASwB,GAAaI,EAAcH,EAAW7B,EAAOI,CAAK,CAErC,CAC9C,CACO,SAASC,GAAcN,EAAQC,EAAOI,EAAO,CAClD,MAAM6B,EAAclC,EAAO,CAAC,EAAIA,EAAO,CAAC,EAExC,GAAIkC,GAAe,EACjB,OAAAC,EAAI,KAAK,mDAAmD,IACrDlC,EAAM,CAAC,EAGhB,MAAMmC,EAAOF,EAAcjC,EAAM,OAC3BoC,EAAM,KAAK,OAAOhC,EAAQL,EAAO,CAAC,GAAKoC,CAAI,EAC3CE,EAAW,KAAK,IAAI,KAAK,IAAID,EAAKpC,EAAM,OAAS,CAAC,EAAG,CAAC,EAC5D,OAAOA,EAAMqC,CAAQ,CACvB,CACO,SAAS9B,GAAYR,EAAQC,EAAOI,EAAO,CAChD,OAAQA,EAAQL,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAIA,EAAO,CAAC,IAAMC,EAAM,CAAC,EAAIA,EAAM,CAAC,GAAKA,EAAM,CAAC,CACxF,CAEA,SAASsC,EAAmBR,EAAG,CAC7B,OAA0BA,GAAM,IAClC,CAEO,SAASS,GAAOC,EAAQ,CAC7B,MAAMC,EAAU,CAAA,EAChB,OAAAD,EAAO,QAAQE,GAAK,CACd,CAACD,EAAQ,SAASC,CAAC,GAAKJ,EAAmBI,CAAC,GAC9CD,EAAQ,KAAKC,CAAC,CAEpB,CAAG,EACMD,CACT,CAEA,SAASE,EAAgBC,EAAMC,EAAe,CAE5C,OADe,OAAOA,GAAkB,WAAaD,EAAK,IAAIC,CAAa,EAAID,GACjE,OAAON,CAAkB,CACzC,CAMO,SAASQ,GAAkBF,EAAMC,EAAe,CACrD,OAAOF,EAAgBC,EAAMC,CAAa,CAC5C,CACO,SAASE,GAAiBH,EAAMC,EAAe,CACpD,OAAON,GAAOI,EAAgBC,EAAMC,CAAa,CAAC,CACpD,CAiBO,SAASG,GAAM5C,EAAO6C,EAAKC,EAAK,CACrC,OAAO,KAAK,IAAID,EAAK,KAAK,IAAIC,EAAK9C,CAAK,CAAC,CAC3C,CACO,SAAS+C,GAA4BC,EAAW,CACrD,OAAQA,EAAS,CACf,IAAK,WACH,OAAOjD,EAET,IAAK,SACH,OAAOG,GAET,IAAK,WACH,OAAOE,GAET,IAAK,UACH,OAAOuB,GAET,QACE,OAAO5B,CACV,CACH,CC5LA,MAAMkD,EAAkBC,GAAUA,EAAO,OAGnCC,GAAmB,cAEnBC,EAAmBC,GAAOA,EAAI,OAE9BC,GAAkBD,GAAOA,EAAI,MAE7B/C,EAAY,CAACK,EAAGC,IAAMD,EAAIC,EAAI,GAAKD,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAI,IAE5D2C,GAAe,CACnB,SAAUN,EACV,UAAWG,EACX,SAAUE,GACV,WAAY,IACd,EACe,MAAME,EAAU,CAC7B,YAAYC,EAAO,GAAI/F,EAAQ6F,GAAc,CAC3CtF,EAAgB,KAAM,WAAY,MAAM,EAExCA,EAAgB,KAAM,WAAY,MAAM,EAExCA,EAAgB,KAAM,WAAY,MAAM,EAExCA,EAAgB,KAAM,aAAc,MAAM,EAE1CA,EAAgB,KAAM,iBAAkB,MAAM,EAE9CA,EAAgB,KAAM,aAAc,MAAM,EAE1CA,EAAgB,KAAM,SAAU,MAAM,EAEtC,KAAK,eAAiB,KAAK,kBAAkBwF,EAAM/F,CAAK,EAExD,KAAK,oBAAmB,EAExB,KAAK,OAAS,KAAK,WACpB,CAED,kBAAkB+F,EAAM/F,EAAO,CAC7B,KAAM,CACJ,SAAAH,EAAW0F,EACX,UAAAS,EAAYN,EACZ,SAAAO,EAAWL,GACX,WAAAM,CACD,EAAGlG,EACEmG,EAAY,OAAOD,GAAe,WAClCE,EAAWL,EAAK,OAChBM,EAAiB,CAAA,EACvB,IAAIC,EAAQ,EAEZ,QAASC,EAAW,EAAGA,EAAWH,EAAUG,IAAY,CACtD,MAAMZ,EAAMI,EAAKQ,CAAQ,EACnBf,EAASQ,EAAUL,CAAG,EACtB9C,EAAIoD,EAASN,CAAG,EAChBa,EAAiBL,EAAYX,EAAO,OAAOU,CAAU,EAAIV,EAC/DG,EAAI,eAAiBQ,EAAYK,EAAiB,KAClD,MAAMlE,EAAQkE,EAAe,OAAS3G,EAAS2G,CAAc,EAAI,KAE7DlE,GAAU,OACZ+D,EAAeC,CAAK,EAAI,CACtB,EAAG,OAAO,SAASzD,CAAC,EAAIA,EAAI0D,EAC5B,MAAAjE,EACA,OAAQkE,EAAe,MACjC,EACQF,IAEH,CAED,OAAOD,CACR,CAED,mBAAmBI,EAAiB,CAClC,MAAMC,EAAM,KAAK,WAAW,OAE5B,GAAIA,EAAM,EACR,MAAO,CAAC,EAAG,CAAC,EAGd,KAAM,CAACC,EAAOC,CAAK,EAAIH,EAAgB,IAAII,GAAK3B,GAAM2B,EAAG,EAAG,GAAG,CAAC,EAC1DC,EAAW,KAAK,KAAKH,EAAQ,KAAOD,EAAM,EAAE,EAC5CK,EAAW,KAAK,MAAMH,EAAQ,KAAOF,EAAM,EAAE,EACnD,MAAO,CAACI,EAAUC,CAAQ,CAC3B,CAED,WAAY,CACV,MAAMC,EAAS,CAAA,EAEf,UAAWrB,KAAO,KAAK,eACrBqB,EAAOrB,EAAI,CAAC,EAAIA,EAGlB,OAAOqB,CACR,CAED,qBAAsB,CACpB,IAAIC,EAAW,EACXC,EAAW,EACXC,EAAW1B,GACX2B,EAAa,EAEjB,UAAW1D,KAAK,KAAK,eACnBuD,EAAWA,EAAWvD,EAAE,OAASuD,EAAWvD,EAAE,OAC9CwD,EAAWA,EAAWxD,EAAE,MAAQwD,EAAWxD,EAAE,MAC7CyD,EAAWA,EAAWzD,EAAE,MAAQyD,EAAWzD,EAAE,MAC7C0D,GAAc1D,EAAE,OAGlB,KAAK,SAAWuD,EAChB,KAAK,SAAWC,EAChB,KAAK,SAAWC,EAChB,KAAK,WAAaC,CACnB,CAED,cAAcX,EAAiB,CAK7B,GAJK,KAAK,aACR,KAAK,WAAa,KAAK,eAAe,KAAK,CAACxD,EAAGC,IAAMN,EAAUK,EAAE,MAAOC,EAAE,KAAK,CAAC,GAG9E,CAAC,KAAK,WAAW,OACnB,MAAO,GAGT,IAAI4D,EAAW,EACXC,EAAW,KAAK,WAAW,OAAS,EAExC,GAAI,MAAM,QAAQN,CAAe,EAAG,CAClC,MAAMY,EAAW,KAAK,mBAAmBZ,CAAe,EAExDK,EAAWO,EAAS,CAAC,EACrBN,EAAWM,EAAS,CAAC,CACtB,CAED,MAAO,CAAC,KAAK,WAAWP,CAAQ,EAAE,MAAO,KAAK,WAAWC,CAAQ,EAAE,KAAK,CACzE,CAED,sBAAsB3E,EAAO,CAACuE,EAAQ,EAAGC,EAAQ,GAAG,EAAI,GAAI,CAK1D,GAJK,KAAK,aACR,KAAK,WAAa,KAAK,eAAe,KAAK,CAAC,EAAG1D,IAAMN,EAAU,EAAE,MAAOM,EAAE,KAAK,CAAC,GAG9E,CAAC,KAAK,WAAW,OACnB,MAAO,GAGT,MAAMoE,EAAY,KAAK,mBAAmB,CAACX,EAAOC,CAAK,CAAC,EAExD,OAAO,KAAK,gBAAgBxE,EAAOkF,CAAS,CAC7C,CAED,gBAAgBhC,EAAW,CAACwB,EAAUC,CAAQ,EAAG,CAC/C,MAAMhB,EAAO,KAAK,WAElB,OAAQT,EAAS,CACf,IAAK,WACL,IAAK,SACH,MAAO,CAACS,EAAKe,CAAQ,EAAE,MAAOf,EAAKgB,CAAQ,EAAE,KAAK,EAEpD,IAAK,WACH,OAAO/B,GAAkBe,EAAK,MAAMe,EAAUC,EAAW,CAAC,EAAG/C,GAAKA,EAAE,KAAK,EAE3E,IAAK,UACH,OAAOiB,GAAiBc,EAAM/B,GAAKA,EAAE,KAAK,EAE5C,QACE,MAAO,CAAC+B,EAAKe,CAAQ,EAAE,MAAOf,EAAKgB,CAAQ,EAAE,KAAK,CACrD,CACF,CAEH,CCxKA,SAASQ,GAAM,CAAE,CAEjB,MAAMC,EAAiB,CAAC,UAAW,YAAa,cAAc,EACxDC,EAAoB,CAAC,CACzB,IAAK,YACL,SAAU,eACV,YAAa,aACb,QAAS,CACP,SAAU,CACR,MAAO,CACL,KAAM,gBACN,cAAe,eAChB,EACD,OAAQ,CACN,KAAM,iBACN,cAAe,gBAChB,EACD,YAAa,CACX,KAAM,kBACP,EACD,WAAY,CACV,KAAM,cACN,cAAe,aAChB,CACF,CACF,EACD,UAAW,CACT,SAAU,CACR,gBAAiB,CACf,KAAM,iBACP,EACD,gBAAiB,CACf,KAAM,iBACP,EACD,UAAW,CACT,KAAM,gBACP,CACF,CACF,EACD,aAAc,CACZ,SAAU,CACR,OAAQ,CACN,KAAM,aACP,EACD,MAAO,CACL,KAAM,YACP,CACF,EACD,MAAO,CACL,MAAO,kBACR,CACF,EACD,UAAW,CAAC,EAAG,EAAG,EAAG,CAAC,CACxB,EAAG,CACD,IAAK,YACL,SAAU,eACV,YAAa,iBACb,QAAS,CACP,SAAU,CACR,MAAO,CACL,KAAM,oBACN,cAAe,mBAChB,EACD,OAAQ,CACN,KAAM,qBACN,cAAe,oBAChB,EACD,YAAa,CACX,KAAM,sBACP,EACD,WAAY,CACV,KAAM,cACN,cAAe,aAChB,CACF,CACF,EACD,UAAW,CACT,SAAU,CACR,gBAAiB,CACf,KAAM,0BACP,EACD,gBAAiB,CACf,KAAM,0BACP,EACD,UAAW,CACT,KAAM,oBACP,CACF,CACF,EACD,aAAc,CACZ,SAAU,CACR,OAAQ,CACN,KAAM,iBACP,EACD,MAAO,CACL,KAAM,gBACP,CACF,EACD,MAAO,CACL,MAAO,sBACR,CACF,EACD,UAAW,EACb,CAAC,EAEKC,GAAqB1H,GAASA,EAAM,SAE3B,MAAM2H,EAAc,CACjC,YAAYlH,EAAM,CAChB,KAAK,MAAQ,CACX,UAAW,CAAE,EACb,WAAY,CAAE,CACpB,EACI,KAAK,YAAc,GACnB,KAAK,kBAAoB,GACzB,KAAK,aAAeA,EAAK,aAAeiH,GACxC,KAAK,eAAiBjH,EAAK,cAE3B,KAAK,cAAcA,EAAK,YAAcgH,CAAiB,CACxD,CAED,OAAO,mBAAoB,CACzB,OAAOA,CACR,CAED,YAAYhH,EAAMmH,EAAmB,CACnC,KAAM,CACJ,SAAAzG,EACA,MAAAnB,EACA,YAAAU,CACD,EAAGD,EACJ,KAAK,oBAAoBU,EAAUnB,EAAOU,CAAW,EACrD,MAAMmH,EAAkB,KAAK,qBAAqB1G,EAAUnB,EAAOU,CAAW,EAC9E,IAAIoH,EAAmB,GAEvB,OAAIpH,EAAY,aAAemH,GAC7B,KAAK,kBAAkB7H,EAAO4H,CAAiB,EAC/CE,EAAmB,MAEM,KAAK,oBAAoB3G,EAAUnB,EAAOU,CAAW,GAAK,IAClE,QAAQqH,GAAK,OAAOA,GAAM,YAAcA,EAAC,CAAE,EAC5DD,EAAmB,IAGrB,KAAK,SAAS,CACZ,iBAAAA,CACN,CAAK,EACM,KAAK,KACb,CAED,SAASE,EAAc,CACrB,KAAK,MAAQ,CAAE,GAAG,KAAK,MACrB,GAAGA,CACT,CACG,CAED,kBAAkB7H,EAAK6H,EAAc,CACnC,KAAK,SAAS,CACZ,WAAY,CAAE,GAAG,KAAK,MAAM,WAC1B,CAAC7H,CAAG,EAAG,CAAE,GAAG,KAAK,MAAM,WAAWA,CAAG,EACnC,GAAG6H,CACJ,CACF,CACP,CAAK,CACF,CAED,gBAAgBC,EAAS,GAAI,CAC3B,OAAIA,EAAO,SACF,CACL,KAAMA,EAAO,SACb,GAAGA,CACX,EACeA,EAAO,UACT,CACL,KAAMA,EAAO,UACb,GAAGA,CACX,EAGWA,CACR,CAED,kBAAkBjI,EAAO4H,EAAmB,CAG1C,MAAMK,EAFa,KAAK,eAAejI,CAAK,EAElBA,EAAO4H,CAAiB,EAClD,KAAK,SAAS,CACZ,UAAW,KAAK,gBAAgBK,CAAM,CAC5C,CAAK,EACD,KAAK,YAAc,CACjB,UAAW,EACjB,EACI,KAAK,cAAcjI,CAAK,CACzB,CAED,oBAAoBmB,EAAUnB,EAAOU,EAAa,CAChD,UAAWP,KAAO,KAAK,kBAAmB,CACxC,KAAM,CACJ,MAAAmC,EACA,OAAA4F,EACA,YAAA3I,CACD,EAAG,KAAK,kBAAkBY,CAAG,EAAE,QAAQ,SACxC,IAAIN,EAAWG,EAAMsC,EAAM,IAAI,EACP,KAAK,wBAAwB,KAAK,kBAAkBnC,CAAG,EAAE,QAASgB,EAAUnB,EAAOU,CAAW,IAGhHb,EACFA,EAAWD,GAAiBC,EAAU,CACpC,KAAMG,EAAM,IACxB,CAAW,EAEDH,EAAWP,GAAaU,EAAMT,EAAY,IAAI,EAAGS,EAAMkI,EAAO,IAAI,EAAG,CACnE,KAAMlI,EAAM,IACxB,CAAW,GAIDH,GACF,KAAK,kBAAkBM,EAAK,CAC1B,SAAAN,CACV,CAAS,CAEJ,CACF,CAED,qBAAqBsB,EAAUnB,EAAOU,EAAa,CACjD,OAAO,KAAK,aAAaS,CAAQ,IAAM,KAAK,aAAanB,CAAK,GAAK,KAAK,eAAemB,CAAQ,IAAM,KAAK,eAAenB,CAAK,GAAKU,EAAY,wBAA0BA,EAAY,sBAAsB,KAAOA,EAAY,sBAAsB,YACrP,CAED,aAAaF,EAAY,CACvB,KAAK,cAAcA,CAAU,CAC9B,CAED,cAAcA,EAAa,GAAI,CAC7BA,EAAW,QAAQa,GAAa,CAC9B,KAAM,CACJ,IAAAlB,CACD,EAAGkB,EACJ,KAAK,kBAAkBlB,CAAG,EAAI,KAAK,qBAAqBkB,CAAS,EACjE,KAAK,MAAM,WAAWlB,CAAG,EAAI,CAC3B,SAAU,KACV,OAAQ,KACR,WAAY,KACZ,UAAWoH,CACnB,CACA,CAAK,CACF,CAED,qBAAqB,CACnB,IAAApH,EACA,SAAAlB,EACA,YAAAkJ,EACA,QAAAC,EACA,UAAAC,EACA,aAAAC,EACA,UAAAC,CACJ,EAAK,CACD,MAAO,CACL,IAAApI,EACA,SAAAlB,EACA,YAAAkJ,EACA,QAAS,CACP,QAAS,KAAK,uBACd,GAAGC,CACJ,EACD,UAAW,CACT,QAAS,KAAK,wBACd,GAAGC,CACJ,EACD,aAAc,CACZ,QAAS,KAAK,kBACd,GAAGC,CACJ,EACD,kBAAmB,KAAK,8BAA8BnI,EAAKoI,CAAS,CAC1E,CACG,CAED,wBAAwBC,EAAerH,EAAUnB,EAAOU,EAAa,CACnE,OAAO,OAAO,OAAO8H,EAAc,QAAQ,EAAE,KAAKC,GAC5CA,EAAK,cACA/H,EAAY,aAAeA,EAAY,wBAA0BA,EAAY,sBAAsB,KAAOA,EAAY,sBAAsB+H,EAAK,aAAa,GAGhKtH,EAASsH,EAAK,IAAI,IAAMzI,EAAMyI,EAAK,IAAI,CAC/C,CACF,CAED,oBAAoBtH,EAAUnB,EAAOU,EAAa,CAChD,MAAMgI,EAAW,CAAA,EAEjB,UAAWvI,KAAO,KAAK,kBAAmB,CACxC,MAAMwI,EAAanB,EAAe,KAAKnD,GAAQ,KAAK,wBAAwB,KAAK,kBAAkBlE,CAAG,EAAEkE,CAAI,EAAGlD,EAAUnB,EAAOU,CAAW,CAAC,EAExIiI,GACFD,EAAS,KAAK,KAAK,kBAAkBvI,CAAG,EAAEwI,CAAU,EAAE,QAAQ,KAAK,KAAM3I,EAAO,KAAK,kBAAkBG,CAAG,CAAC,CAAC,CAE/G,CAED,OAAOuI,EAAS,OAASA,EAAW,IACrC,CAED,kBAAkB1I,EAAO,CACvB,MAAM4I,EAAkB5I,EAAM,gBAAkB,GAE1C6I,EAAiB,CAAA,EAEvB,UAAW1I,KAAO,KAAK,kBAAmB,CACxC,KAAM,CACJ,SAAAlB,CACR,EAAU,KAAK,kBAAkBkB,CAAG,EAC9B0I,EAAe5J,CAAQ,EAAI,GAC3BuI,EAAe,QAAQnD,GAAQ,CAC7B,OAAO,OAAO,KAAK,kBAAkBlE,CAAG,EAAEkE,CAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CACjE,KAAAyE,EACA,cAAAC,CACV,IAAc,CACJ,GAAIA,EAAe,CACjB,MAAMC,EAAWJ,EAAgBG,CAAa,EAE1C,OAAOC,GAAa,UAAY,CAAC,MAAM,QAAQA,CAAQ,EACzD,OAAO,OAAOH,EAAe5J,CAAQ,EAAG+J,CAAQ,EACvCA,IAAa,SACtBH,EAAe5J,CAAQ,EAAE6J,CAAI,EAAIE,EAE/C,MACYH,EAAe5J,CAAQ,EAAE6J,CAAI,EAAI9I,EAAM8I,CAAI,CAEvD,CAAS,CACT,CAAO,CACF,CAED,OAAOD,CACR,CAED,cAAc7I,EAAO,CACnB,UAAWG,KAAO,KAAK,kBACrB,KAAK,uBAAuBH,EAAO,KAAK,kBAAkBG,CAAG,CAAC,CAEjE,CAED,uBAAuBH,EAAOiJ,EAAkB,CAC9C,KAAM,CACJ,IAAA9I,CACD,EAAG8I,EACE,CACJ,SAAApJ,CACD,EAAG,KAAK,MAAM,WAAWM,CAAG,EACvB+I,EAAa,IAAIpD,GAAU,KAAK,MAAM,UAAU,MAAQ,GAAI,CAChE,SAAAjG,EACA,WAAYG,EAAM,WACxB,CAAK,EACD,KAAK,kBAAkBG,EAAK,CAC1B,WAAA+I,CACN,CAAK,EACD,KAAK,wBAAwBlJ,EAAOiJ,CAAgB,CACrD,CAED,wBAAwBjJ,EAAOiJ,EAAkB,CAC/C,KAAM,CACJ,UAAAZ,EACA,IAAAlI,CACD,EAAG8I,EACE,CACJ,SAAU,CACR,gBAAAE,EACA,gBAAAC,EACA,UAAA9D,CACD,CACF,EAAG+C,EACEgB,EAAc,KAAK,MAAM,WAAWlJ,CAAG,EAAE,WAAW,sBAAsBH,EAAMsF,EAAU,IAAI,EAAG,CAACtF,EAAMmJ,EAAgB,IAAI,EAAGnJ,EAAMoJ,EAAgB,IAAI,CAAC,CAAC,EACjK,KAAK,kBAAkBjJ,EAAK,CAC1B,YAAAkJ,CACN,CAAK,EACD,KAAK,kBAAkBrJ,EAAOiJ,CAAgB,CAC/C,CAED,kBAAkBjJ,EAAOiJ,EAAkB,CACzC,KAAM,CACJ,IAAA9I,EACA,aAAAmI,EACA,UAAAD,CACD,EAAGY,EACE,CACJ,OAAAhH,EACA,MAAAC,CACN,EAAQoG,EAAa,SACX,CACJ,UAAAhD,CACN,EAAQ+C,EAAU,SACR,CACJ,MAAAiB,CACD,EAAGhB,EACEiB,EAAiBvJ,EAAMkC,EAAM,IAAI,EACjCsH,EAAkBxJ,EAAMiC,EAAO,IAAI,GAAK,KAAK,MAAM,WAAW9B,CAAG,EAAE,YAEnEsJ,EADmBpE,GAA4BC,GAAatF,EAAMsF,EAAU,IAAI,CAAC,EACpDkE,EAAiBD,CAAc,EAE9D,OAAOD,GAAU,UAAY,OAAOtJ,EAAMsJ,EAAM,KAAK,GAAM,YAC7DtJ,EAAMsJ,EAAM,KAAK,EAAEG,EAAU,OAAQ,CAAA,EAGvC,KAAK,kBAAkBtJ,EAAK,CAC1B,UAAAsJ,CACN,CAAK,CACF,CAED,8BAA8BtJ,EAAKoI,EAAW,CAC5C,OAAOmB,GAAQ,CACb,KAAM,CACJ,WAAAR,EACA,UAAAO,CACD,EAAG,KAAK,MAAM,WAAWtJ,CAAG,EACvBwF,EAAMuD,EAAW,OAAOQ,EAAK,KAAK,EAExC,GAAI/D,GAAOA,EAAI,SAAW,EACxB,OAAO4C,EAGT,MAAMoB,EAAKhE,GAAOA,EAAI,MAChB1D,EAASwH,EAAU,SAEzB,OADwBE,GAAM1H,EAAO,CAAC,GAAK0H,GAAM1H,EAAOA,EAAO,OAAS,CAAC,EAChDwH,EAAUE,CAAE,EAAIpB,CAC/C,CACG,CAED,qBAAqBvI,EAAO,CAC1B,MAAMwB,EAAY,CAAA,EAElB,UAAWrB,KAAO,KAAK,kBAAmB,CACxC,KAAM,CACJ,SAAAlB,CACR,EAAU,KAAK,kBAAkBkB,CAAG,EAC9BqB,EAAUvC,CAAQ,EAAI,KAAK,8BAA8Be,EAAOG,CAAG,CACpE,CAED,OAAOqB,CACR,CAED,eAAe,CACb,KAAAoI,CACJ,EAAK,CACD,MAAMC,EAAWD,EAAK,QAAUA,EAAK,MAAQ,GAC7C,IAAIE,EAAS,KAEb,GAAID,EAAU,CACZ,MAAMH,EAAO,KAAK,MAAM,UAAU,KAAKE,EAAK,KAAK,EAC3CG,EAAU,CAAA,EAEhB,UAAW5J,KAAO,KAAK,kBAAmB,CACxC,KAAM,CACJ,YAAAgI,CACV,EAAY,KAAK,kBAAkBhI,CAAG,EACxB,CACJ,WAAA+I,CACD,EAAG,KAAK,MAAM,WAAW/I,CAAG,EACvBmC,EAAQ4G,EAAW,OAAOQ,EAAK,KAAK,GAAKR,EAAW,OAAOQ,EAAK,KAAK,EAAE,MAC7EK,EAAQ5B,CAAW,EAAI7F,CACxB,CAEDwH,EAAS,OAAO,OAAOC,EAASL,EAAM,CACpC,OAAQA,EAAK,gBAAkBA,EAAK,MAC5C,CAAO,CACF,CAED,OAAAE,EAAK,OAAS,EAAQE,EACtBF,EAAK,OAASE,EACPF,CACR,CAED,YAAYI,EAAc,CACxB,OAAK,KAAK,kBAAkB,eAAeA,CAAY,EAIhD,KAAK,kBAAkBA,CAAY,EAAE,kBAHnCzC,CAIV,CAEH,CCjeA,IAAI0C,EAAU,KAAK,GAAK,EACpBC,GAAS,CAAC,EAAGD,EAAS,EAAIA,EAAS,EAAIA,EAAS,EAAIA,EAAS,EAAIA,CAAO,EAE5E,SAASE,GAAOnG,EAAG,CACjB,OAAOA,EAAE,CAAC,CACZ,CAEA,SAASoG,GAAOpG,EAAG,CACjB,OAAOA,EAAE,CAAC,CACZ,CAEe,SAAAqG,IAAW,CACxB,IAAIC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACL/G,EAAIyG,GACJO,EAAIN,GACJO,EACAC,EACAC,EAEJ,SAASR,EAAO7E,EAAQ,CACtB,IAAIsF,EAAW,CAAE,EAAE/E,EAAO,CAAA,EAAIlD,EAAGgE,EAAIrB,EAAO,OAE5C,IAAK3C,EAAI,EAAGA,EAAIgE,EAAG,EAAEhE,EACnB,GAAI,QAAMkI,EAAK,CAACrH,EAAE,KAAK,KAAMsH,EAAQxF,EAAO3C,CAAC,EAAGA,EAAG2C,CAAM,CAAC,GACnD,MAAMyF,EAAK,CAACP,EAAE,KAAK,KAAMM,EAAOnI,EAAG2C,CAAM,CAAC,GAEjD,KAAIwF,EACAD,EACAE,EACAC,EAAK,KAAK,MAAMD,EAAKA,EAAKJ,CAAE,EAC5BM,EAAK,KAAK,MAAMJ,EAAKA,EAAKH,GAAMM,EAAK,GAAK,CAAC,EAC3CE,EAAMH,EAAKC,EAEf,GAAI,KAAK,IAAIE,CAAG,EAAI,EAAI,EAAG,CACzB,IAAIC,EAAMN,EAAKI,EACXG,EAAMH,GAAMJ,EAAKI,EAAK,GAAK,GAAK,EAChCI,EAAML,GAAMD,EAAKC,EAAK,GAAK,GAC3BM,EAAMT,EAAKO,EACXG,EAAMR,EAAKM,EACXF,EAAMA,EAAMD,EAAMA,EAAMI,EAAMA,EAAMC,EAAMA,IAAKN,EAAKG,GAAOJ,EAAK,EAAI,EAAI,IAAM,EAAGA,EAAKK,EAC3F,CAED,IAAIG,EAAKP,EAAK,IAAMD,EAAIvF,EAAMmF,EAASY,CAAE,EACrC/F,EAAKA,EAAI,KAAKqF,CAAK,GAErBjF,EAAK,KAAKJ,EAAMmF,EAASY,CAAE,EAAI,CAACV,CAAK,CAAC,EACtCrF,EAAI,GAAKwF,GAAMD,EAAK,GAAK,GAAKN,EAC9BjF,EAAI,EAAIuF,EAAKL,GAIjB,OAAO9E,CACR,CAED,SAAS4F,EAAQC,EAAQ,CACvB,IAAItB,EAAK,EAAGC,EAAK,EACjB,OAAOL,GAAO,IAAI,SAAS2B,EAAO,CAChC,IAAIrB,EAAK,KAAK,IAAIqB,CAAK,EAAID,EACvBnB,EAAK,CAAC,KAAK,IAAIoB,CAAK,EAAID,EACxBhB,EAAKJ,EAAKF,EACVO,EAAKJ,EAAKF,EACd,OAAAD,EAAKE,EAAID,EAAKE,EACP,CAACG,EAAIC,CAAE,CACpB,CAAK,CACF,CAED,OAAAR,EAAO,QAAU,SAASuB,EAAQ,CAChC,MAAO,IAAMD,EAAQC,GAAU,KAAOjB,EAAI,CAACiB,CAAM,EAAE,KAAK,GAAG,EAAI,GACnE,EAEEvB,EAAO,QAAU,UAAW,CAI1B,QAHIyB,EAAU,CAAE,EACZC,EAAI,KAAK,MAAMxB,EAAKM,CAAE,EACtBhI,EAAI,KAAK,MAAMyH,EAAKM,CAAE,EACjBF,EAAIqB,EAAIlB,EAAIH,EAAID,EAAKE,EAAGD,GAAKG,EAAI,EAAEkB,EAC1C,QAASrI,EAAIb,EAAI+H,GAAMmB,EAAI,GAAKnB,EAAK,EAAGlH,EAAI8G,EAAKI,EAAK,EAAGlH,GAAKkH,EAC5DkB,EAAQ,KAAK,CAACpI,EAAGgH,CAAC,CAAC,EAGvB,OAAOoB,CACX,EAEEzB,EAAO,KAAO,UAAW,CACvB,IAAI2B,EAAWL,EAAQhB,CAAC,EAAE,MAAM,EAAG,CAAC,EAAE,KAAK,GAAG,EAC9C,OAAON,EAAO,QAAS,EAAC,IAAI,SAAS4B,EAAG,CAAE,MAAO,IAAMA,EAAI,IAAMD,CAAS,CAAE,EAAE,KAAK,EAAE,CACzF,EAEE3B,EAAO,EAAI,SAAS6B,EAAG,CACrB,OAAO,UAAU,QAAUxI,EAAIwI,EAAG7B,GAAU3G,CAChD,EAEE2G,EAAO,EAAI,SAAS6B,EAAG,CACrB,OAAO,UAAU,QAAUxB,EAAIwB,EAAG7B,GAAUK,CAChD,EAEEL,EAAO,OAAS,SAAS6B,EAAG,CAC1B,OAAO,UAAU,QAAUvB,EAAI,CAACuB,EAAGtB,EAAKD,EAAI,EAAI,KAAK,IAAIV,CAAO,EAAGY,EAAKF,EAAI,IAAKN,GAAUM,CAC/F,EAEEN,EAAO,KAAO,SAAS6B,EAAG,CACxB,OAAO,UAAU,QAAU5B,EAAKC,EAAK,EAAGC,EAAK,CAAC0B,EAAE,CAAC,EAAGzB,EAAK,CAACyB,EAAE,CAAC,EAAG7B,GAAU,CAACG,EAAKF,EAAIG,EAAKF,CAAE,CAC/F,EAEEF,EAAO,OAAS,SAAS6B,EAAG,CAC1B,OAAO,UAAU,QAAU5B,EAAK,CAAC4B,EAAE,CAAC,EAAE,CAAC,EAAG3B,EAAK,CAAC2B,EAAE,CAAC,EAAE,CAAC,EAAG1B,EAAK,CAAC0B,EAAE,CAAC,EAAE,CAAC,EAAGzB,EAAK,CAACyB,EAAE,CAAC,EAAE,CAAC,EAAG7B,GAAU,CAAC,CAACC,EAAIC,CAAE,EAAG,CAACC,EAAIC,CAAE,CAAC,CACxH,EAESJ,EAAO,OAAO,CAAC,CACxB,CC7GO,SAAS8B,GAAcnM,EAAO4H,EAAmB,CACtD,KAAM,CACJ,KAAA9C,EACA,OAAA8G,CACD,EAAG5L,EACE,CACJ,SAAAa,EACA,WAAAuL,CACD,EAAGxE,EACEyE,EAAevH,EAAK,OAASwH,GAAgBxH,EAAM8C,CAAiB,EAAI,KACxE2E,EAAeC,GAAkBZ,EAAQ/K,EAAUwL,CAAY,EAC/DI,EAAe,CAAA,EACf,CACJ,SAAAC,EACA,WAAAC,CACJ,EAAMC,GAAe9H,CAAI,EACjB+H,EAAYT,EAAW,UAAU,MACjC,CACJ,KAAAU,CACJ,EAAMV,EAAW,UAAU,cAEzB,UAAWtC,KAAU4C,EAAU,CAC7BC,EAAW,QACX,MAAMI,EAAWJ,EAAW,MAAQG,EAC9BE,EAAW,CAACH,EAAUE,CAAQ,EAAGF,EAAUE,EAAW,CAAC,CAAC,EACxC,OAAO,SAASC,EAAS,CAAC,CAAC,GAAK,OAAO,SAASA,EAAS,CAAC,CAAC,EAG/EP,EAAa,KAAK,CAChB,YAAa5L,EAAS,YAAYmM,CAAQ,EAC1C,OAAQlD,EACR,MAAO6C,EAAW,KAC1B,CAAO,EAEDvI,EAAI,KAAK,gCAAgC,GAE5C,CAID,MAAO,CACL,SAHgBiG,KAAS,OAAOkC,CAAY,EAAE,EAAE,GAAK,EAAE,YAAY,CAAC,CAAC,EAAE,EAAE,GAAK,EAAE,YAAY,CAAC,CAAC,EAClEE,CAAY,EAElB,IAAI,CAACQ,EAAK3G,KAAW,CACzC,SAAUzF,EAAS,cAAc,CAACoM,EAAI,EAAGA,EAAI,CAAC,CAAC,EAC/C,OAAQA,EACR,MAAA3G,CACN,EAAM,EACF,aAAAiG,CACJ,CACA,CACO,SAASD,GAAgBxH,EAAM8C,EAAmB,CACvD,KAAM,CACJ,WAAAwE,CACD,EAAGxE,EACEiF,EAAYT,EAAW,UAAU,MACjC,CACJ,KAAAU,CACJ,EAAMV,EAAW,UAAU,cACzB,IAAIc,EAAO,IACPC,EAAO,IACPC,EAAO,KACPC,EAAO,KACPxK,EAEJ,IAAKA,EAAI,EAAGA,EAAIiK,EAAOhI,EAAK,OAAQjC,GAAKiK,EAAM,CAC7C,MAAMpJ,EAAImJ,EAAUhK,CAAC,EACf6H,EAAImC,EAAUhK,EAAI,CAAC,EACH,OAAO,SAASa,CAAC,GAAK,OAAO,SAASgH,CAAC,IAG3DwC,EAAO,KAAK,IAAIxJ,EAAGwJ,CAAI,EACvBE,EAAO,KAAK,IAAI1J,EAAG0J,CAAI,EACvBD,EAAO,KAAK,IAAIzC,EAAGyC,CAAI,EACvBE,EAAO,KAAK,IAAI3C,EAAG2C,CAAI,EAE1B,CAED,MAAO,CAACH,EAAMC,EAAMC,EAAMC,CAAI,EAAE,MAAM,OAAO,QAAQ,EAAI,EAAEH,EAAOE,GAAQ,GAAID,EAAOE,GAAQ,CAAC,EAAI,IACpG,CACO,SAASb,GAAkBZ,EAAQ/K,EAAUyM,EAAQ,CAC1D,KAAM,CACJ,cAAAC,CACJ,EAAM1M,EAAS,kBAAkByM,CAAM,EACrC,OAAO1B,EAAS2B,EAAc,CAAC,CACjC,CC7EA,SAAShG,GAAM,CAAE,CAEjB,MAAM1B,GAAe,CACnB,YAAa,KACb,WAAY/F,GACZ,cAAe,CACb,KAAM,WACN,MAAO,IACR,EACD,eAAgB,CACd,KAAM,WACN,MAAO,CACR,EACD,iBAAkB,MAClB,gBAAiB,CACf,KAAM,SACN,MAAO,EACP,IAAK,EACL,IAAK,GACN,EACD,gBAAiB,CACf,KAAM,SACN,MAAO,IACP,IAAK,EACL,IAAK,GACN,EACD,eAAgB,WAChB,iBAAkByH,EAClB,gBAAiB,KACjB,eAAgB,CAAC,EAAG,GAAI,EACxB,kBAAmB,CACjB,KAAM,WACN,MAAO,IACR,EACD,mBAAoB,CAClB,KAAM,WACN,MAAO,CACR,EACD,qBAAsB,MACtB,yBAA0B,CACxB,KAAM,SACN,MAAO,EACP,IAAK,EACL,IAAK,GACN,EACD,yBAA0B,CACxB,KAAM,SACN,MAAO,IACP,IAAK,EACL,IAAK,GACN,EACD,eAAgB,CACd,KAAM,SACN,IAAK,EACL,MAAO,CACR,EACD,mBAAoB,SACpB,qBAAsBA,EACtB,OAAQ,CACN,KAAM,SACN,MAAO,IACP,IAAK,CACN,EACD,SAAU,CACR,KAAM,SACN,IAAK,EACL,IAAK,EACL,MAAO,CACR,EACD,SAAU,GACV,kBAAmB4E,GACnB,YAAa,CACX,KAAM,WACN,MAAOzI,GAAKA,EAAE,QACf,EACD,SAAU,GACV,YAAa,CACX,KAAM,WACN,MAAO,KACP,SAAU,EACX,CACH,EACe,MAAM8J,UAAqBpN,CAAiB,CACzD,eAAeE,EAAM,CACnB,MAAM,GAAGA,CAAI,EAEbC,EAAgB,KAAM,QAAS,MAAM,CACtC,CAED,iBAAkB,CAChB,MAAMkN,EAAgB,IAAI9F,GAAc,CACtC,cAAe3H,GAASA,EAAM,kBAC9B,YAAaA,GAASA,EAAM,MAClC,CAAK,EACD,KAAK,MAAQ,CACX,cAAAyN,EACA,gBAAiBA,EAAc,MAC/B,SAAU,IAChB,EAC6B,KAAK,sBACb,IAAI,CACnB,UAAW,CACT,KAAM,EACN,KAAM,KACN,SAAU,aACX,CACP,CAAK,CACF,CAED,YAAYhN,EAAM,CAGhB,GAFA,MAAM,YAAYA,CAAI,EAElBA,EAAK,YAAY,mBAAoB,CACvC,MAAMiN,EAAkB,KAAK,MAAM,cAAc,YAAYjN,EAAM,CACjE,SAAU,KAAK,QAAQ,SACvB,WAAY,KAAK,cAAe,CACxC,CAAO,EAED,GAAI,KAAK,MAAM,gBAAgB,YAAciN,EAAgB,UAAW,CACtE,KAAM,CACJ,gBAAAC,CACV,EAAYD,EAAgB,WAAa,GACjC,KAAK,SAAS,CACZ,SAAUC,GAAmB,KAAK,2BAA2BA,CAAe,CACtF,CAAS,CACF,CAED,KAAK,SAAS,CACZ,gBAAAD,CACR,CAAO,CACF,CACF,CAED,2BAA2BC,EAAiB,CAC1C,KAAM,CACJ,SAAA9M,CACN,EAAQ,KAAK,QAET,GAAI,MAAM,QAAQ8M,CAAe,GAAKA,EAAgB,SAAW,EAAG,CAClE,MAAMC,EAAUD,EAAgB,CAAC,EAC3BE,EAAUF,EAAgB,CAAC,EAC3BG,EAAW,EAAEF,EAAQ,CAAC,EAAIC,EAAQ,CAAC,GAAK,GAAID,EAAQ,CAAC,EAAIC,EAAQ,CAAC,GAAK,CAAC,EACxEE,EAAelN,EAAS,YAAYiN,CAAQ,EAC5C,CACJ,cAAAE,CACR,EAAUnN,EAAS,kBAAkBiN,CAAQ,EAKvC,OAJiBH,EAAgB,IAAIM,GAAM,CACzC,MAAMC,EAASrN,EAAS,YAAYoN,CAAE,EACtC,MAAO,EAAEC,EAAO,CAAC,EAAIH,EAAa,CAAC,GAAKC,EAAc,CAAC,GAAIE,EAAO,CAAC,EAAIH,EAAa,CAAC,GAAKC,EAAc,CAAC,CAAC,CAClH,CAAO,CAEF,CAED,OAAA5J,EAAI,MAAM,gEAAgE,IACnE,IACR,CAED,eAAe,CACb,KAAAwF,CACJ,EAAK,CACD,OAAO,KAAK,MAAM,cAAc,eAAe,CAC7C,KAAAA,CACN,CAAK,CACF,CAED,oBAAoBF,EAAM,CACxB,OAAO,KAAK,MAAM,cAAc,YAAY,WAAW,EAAEA,CAAI,CAC9D,CAED,wBAAwBA,EAAM,CAC5B,OAAO,KAAK,MAAM,cAAc,YAAY,WAAW,EAAEA,CAAI,CAC9D,CAED,4BAA6B,CAC3B,OAAO,KAAK,MAAM,cAAc,kBAAkB,KAAK,KAAK,CAC7D,CAED,cAAe,CACb,KAAM,CACJ,eAAAyE,EACA,SAAAC,EACA,SAAAC,EACA,SAAAC,EACA,YAAAC,CACN,EAAQ,KAAK,MACH,CACJ,gBAAAb,EACA,SAAAc,CACN,EAAQ,KAAK,MACHC,EAAgB,KAAK,iBAAiB,eAAgBC,EAAW,EAEjE7F,EAAiB,KAAK,6BAEtB8F,EAAWH,EAAW,CAC1B,SAAAA,EACA,OAAQ,CACd,EAAQ,CACF,OAAQd,EAAgB,UAAU,cAAgB,EAClD,YAAa,SACb,MAAO,EACb,EACI,OAAO,IAAIe,EAAc,CAAE,GAAGE,EAC5B,eAAgB,EAChB,eAAAR,EACA,SAAAC,EACA,SAAAC,EACA,SAAAC,EACA,aAAc,KAAK,oBAAoB,KAAK,IAAI,EAChD,aAAc,KAAK,wBAAwB,KAAK,IAAI,EACpD,YAAaC,GAAe,CAC1B,aAAcA,EAAY,eAAiBA,EAAY,eACvD,aAAcA,EAAY,mBAAqBA,EAAY,kBAC5D,CACP,EAAO,KAAK,iBAAiB,CACvB,GAAI,eACJ,eAAA1F,CACN,CAAK,EAAG,CACF,KAAM6E,EAAgB,UAAU,IACtC,CAAK,CACF,CAEH,CAEAnN,EAAgBiN,EAAc,YAAa,cAAc,EAEzDjN,EAAgBiN,EAAc,eAAgB3H,EAAY,EC/N1D,MAAMyI,GAAW,CACf,QAAS,IACT,QAAS,GACT,UAAW,GACX,cAAe,CAAC,GAAI,GAAI,EAAE,CAC5B,EAGA,SAAwBM,GAAM,CAC5B,OAAAC,EAAS,EACT,UAAAC,EAAY,cACZ,SAAAT,EAAW,IACX,KAAAU,EAAO,GACP,KAAAjK,EAAO,CAAE,IAAK,IAAI,aAAa,CAAC,EAAG,OAAQ,CAAE,EAC7C,QAAAkK,EAAU,GACV,WAAAC,EAAa,CAAC,EACd,iBAAAC,EAAmB,GACnB,UAAAC,EAAY,IACZ,OAAAC,EAAS,QACT,OAAAxD,EAAS,IACT,iBAAAyD,EAAmB,CAAE,KAAM,EAAG,YAAa,EAAG,mBAAoB,EAAG,EACrE,gBAAAjG,EAAkB,IAClB,QAAAkG,EAAU,CAAC,CACb,EAAG,CAED,KAAM,CAACC,EAAWC,CAAY,EAAIC,GAAS,SAAAC,EAAY,MAAM,SAAS,EAEnDC,EAAAd,CAAM,EAAKe,GAAc,CAExCJ,EADEI,GAGWF,EAAY,MAAM,SAFd,CAGnB,EAGF,SAASG,EAAgBD,EAAW,CAC7BA,EAAK,WAELA,EAAK,SAAaA,EAAA,OAAS,CAAC,EAAG,CAAC,GAChCA,EAAA,OAAO,CAAC,EAAIA,EAAK,UACjBA,EAAA,OAAO,CAAC,EAAIA,EAAK,SACtBJ,EAAaI,CAAI,EAEZV,GAA8BQ,EAAA,OAAO,eAAgBE,CAAI,EAChE,CAEA,MAAME,EAASC,GAAS,CACtB,SAAUjB,EACV,QAAS,GACT,OAAQ,MACR,MAAO,CACR,CAAA,EAAE,IAAKkB,GAAgB,CAACA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CAAC,EAEjC,SAAAC,EAAW,CAAE,OAAAnG,GAAe,CAC/B,GAAA,CAACA,GAAU,CAACA,EAAO,UAAY,CAACA,EAAO,SAAS,OAC3C,OAAA,KAGH,MAAAoG,EAAMpG,EAAO,SAAS,CAAC,EACvBqG,EAAMrG,EAAO,SAAS,CAAC,EACvBsG,EAAQtG,EAAO,OAAO,OAErB,MAAA,CACL,KAAM,cACCmF,EAAW,OAAS,QAAUG,CAAM,KAAKgB,CAAK;AAAA,UACjD,OAAO,SAASF,CAAG,EAAIA,EAAI,QAAQ,CAAC,EAAI,EAAE,MAC5C,OAAO,SAASC,CAAG,EAAIA,EAAI,QAAQ,CAAC,EAAI,EAC1C;AAAA,QAEA,MAAOpB,EACH,CAAE,MAAO,OAAQ,gBAAiB,SAAU,EAC5C,CAAE,MAAO,OAAQ,gBAAiB,OAAQ,CAAA,CAElD,CAES,SAAAsB,EAAYC,EAAaC,EAAY,CAC5CjB,EAAQgB,EAAQC,CAAK,CACvB,CAGA,IAAIC,EAAO,KACPvB,EAAW,OACbuB,EAAOvB,EAAW,IAAWwB,GAAAA,EAAI,CAAC,CAAC,EACzB3L,EAAK,OAGR0L,EAAA,CACL,OAAQ1L,EAAK,OACb,WAAY,CACV,YAAa,CAAE,MAAOA,EAAK,IAAK,KAAM,CAAE,CAC1C,CAAA,EANK0L,EAAA,KAUT,MAAME,EAAS,CACb,IAAIC,GAAS,CACX,GAAI,YACJ,KAAM1B,EACN,kBAAoBjL,GAAWA,EAAE,CAAC,EAClC,kBAAoBA,GAAWA,EAAE,CAAC,EAClC,SAAU,GACV,QAAS,GACT,UAAW,EACX,SAAU,EACV,eAAgB+K,EAAO,CAAC,IAAK,GAAI,GAAG,EAAI,CAAC,IAAK,IAAK,GAAG,EACtD,eAAgBA,EAAO,CAAC,IAAK,GAAI,GAAG,EAAI,CAAC,IAAK,IAAK,GAAG,CAAA,CACvD,EACD,IAAIvB,EAAa,CACf,GAAI,WACJ,KAAMgD,EACN,YAAavB,EAAW,OAAUjL,GAAWA,EAAI,KACjD,WAAY+K,EAAOe,EAAO,MAAM,CAAC,EAAIA,EAAO,QAAA,EAAU,MAAM,CAAC,EAC7D,SAAAzB,EACA,cAAe,GACf,eAAgB,CAAC,EAAGc,CAAS,EAC7B,eAAgBrK,GAAQA,EAAK,OAAS,GAAK,EAC3C,SAAUkK,EACV,iBAAAK,EAEA,SAAU,GACV,QAAS,GACT,OAAAzD,EACA,gBAAAxC,EACA,SAAAkF,GACA,YAAa,CACX,eAAgB,CAAE,KAAM,gBAAiB,SAAU,GAAK,EACxD,QAAS,CAAE,KAAM,gBAAiB,SAAU,GAAI,CAClD,CAAA,CACD,CAAA,EAID,OAAAsC,EAAA,cAACC,GAAA,CACC,OAAAH,EACA,WAAY,GACZ,gBAAiB,GACjB,UAAAnB,EACA,WAAAU,EACA,QAASI,EACT,kBAAoBS,GAAWjB,EAAgBiB,EAAE,SAAS,CAAA,EAKxDF,EAAA,cAACG,GAAA,CACC,SAAUrB,EAAY,QAAQ,SAC9B,oBAAqB,GACrB,qBAAsBsB,EAAA,CACxB,CAAA,CAIR,CC9GA,MAAAC,GAAA,CACA,SAAA,CACA,GAAA,CACA,QAAA,kBACA,QAAA,uBACA,UAAA,UACA,UAAA,YACA,YAAA,eACA,UAAA,YACA,MAAA,QACA,MAAA,OACA,EACA,GAAA,CACA,QAAA,mBACA,QAAA,eACA,UAAA,QACA,UAAA,WACA,YAAA,mBACA,UAAA,aACA,MAAA,OACA,MAAA,QACA,CACA,CACA,EAqDAC,GAAAC,GAAA,CACA,KAAA,mBACA,KAAAF,GACA,WAAA,CACA,iBAAAG,GACA,YAAAC,GAAA,aACAC,GAAA,aACAC,GAAA,aACA,YAAAC,EACA,EACA,MAAA,CACA,KAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,UAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,WAAA,OACA,OAAA,OACA,UAAA,OACA,EACA,KAAA,IAAA,CACA,MAAAC,EAAA,CAAA,aAAA,MAAA,cAAA,OAAA,EACA,MAAA,CACA,GAAA,MAAA,KAAA,MAAA,KAAA,KAAA,OAAA,CAAA,CAAA,GACA,qBAAA,CACA,MAAA,GACA,YAAA,GACA,KAAA,GACA,WAAA,GACA,UAAA,GACA,aAAA,CAAA,EACA,OAAA,IACA,UAAA,EACA,OAAA,KACA,KAAA,EACA,iBAAA,EACA,EACA,mBAAA,CAAA,KAAA,GAAA,aAAA,CAAA,CAAA,EACA,WAAAA,EACA,aAAA,CAAA,UAAA,UAAA,UAAA,SAAA,EACA,aAAA,CAAA,EACA,aAAA,CAAA,EACA,WAAA,KACA,UAAAA,EAAA,CAAA,EACA,YAAA/B,EAAA,MACA,WAAA,CACA,MAAA,GACA,YAAA,GACA,KAAA,GACA,WAAA,GACA,UAAA,GACA,aAAA,CAAA,EACA,OAAA,IACA,UAAA,EACA,OAAA,KACA,KAAA,CACA,EACA,QAAA,CACA,cAAA,GACA,UAAA,GACA,WAAA,GACA,UAAA,EACA,EACA,SAAA,CAAA,EAGA,SAAA,CAAA,IAAA,IAAA,aAAA,CAAA,EAAA,OAAA,CAAA,EACA,iBAAA,CAAA,EACA,WAAA,GACA,cAAA,GACA,SAAA,GACA,kBAAA,GACA,mBAAA,GACA,sBAAA,CAAA,EACA,aAAA,yCACA,SAAA,KAKA,QAAA,IAAA,CAEA,EACA,SAAA,CACA,SAAA,CACA,OAAA,IAAAgC,GAAA,KAAA,WAAAhC,CAAA,CACA,EACA,YAAA,CACA,MAAAiC,EAAA,KAAA,OAAA,MAAA,YAAA,OACA1O,GAAAA,EAAA,OAAA,KAAA,IAAA,EAEA,GAAA0O,EAAA,SAAA,EACA,cAAA,IAAA,iBAAA,EACA,MAEA,OAAAA,EAAA,CAAA,CACA,EAEA,cAAA,CACA,OAAA,KAAA,YACA,EAEA,aAAA,CACA,KAAA,CAAAC,EAAAC,CAAA,EAAA,KAAA,kBAAA,MAAA,GAAA,EACA,OAAA,KAAA,aAAAD,CAAA,EAAAC,CAAA,EAAA,KACA,EACA,eAAA,CACA,OAAA,KAAA,WAAA,UAAA,CACA,EAEA,UAAA,CACA,MAAA,CACA,OAAA,KAAA,GACA,UAAA,KAAA,UACA,SAAA,IACA,KAAA,KAAA,OAAA,MAAA,WACA,KAAA,KAAA,SACA,QAAA,KAAA,cACA,WAAA,KAAA,iBACA,iBAAA,KAAA,WAAA,iBACA,UAAA,KAAA,WAAA,UACA,OAAA,KAAA,YACA,OAAA,KAAA,WAAA,OACA,iBAAA,KAAA,SACA,gBAAA,IACA,QAAA,KAAA,WAAA,CAEA,EACA,WAAA,CACA,MAAAC,EAAA,CACA,KAAA,UACA,GAAA,WAAA,EAGAC,EAAA,CACA,KAAA,QACA,GAAA,WAAA,EAGA,OAAA,KAAA,OAAA,MAAA,cAAAC,GAAA,SAAAD,EAAAD,CACA,CACA,EACA,MAAA,CACA,eAAA,CACA,KAAA,eAAA,KAAA,YAAA,UAAA,OAAA,CAMA,EACA,0BAAA,CACA,KAAA,WAAA,kBACAnC,EAAA,KAAA,EAAA,GAAAA,EAAA,KAAA,EAAA,GACA,CACA,EACA,QAAA,CACA,YAAAW,EAAAC,EAAA,CACA,QAAA,IAAA,CAAA,OAAAD,EAAA,MAAAC,CAAA,CAAA,EACAD,EAAA,MACA,KAAA,eAAAA,EAAAC,CAAA,EADA,KAAA,iBAAA,CAEA,EAEA,kBAAA,CACA,KAAA,2BAAA,CAAA,CAAA,CACA,EAEA,eAAA0B,EAAA1B,EAAA,OACA,GAAA,CAAAA,EAAA,SAAA,SAAA,CACA,KAAA,sBAAA,GACA,KAAA,SAAA,KACA,KAAA,2BAAA0B,CAAA,EACA,MACA,CAGA,MAAA3L,GAAA4L,EAAAD,GAAA,YAAAA,EAAA,SAAA,YAAAC,EAAA,MACA5L,IAAA,SACAA,KAAA,KAAA,sBACA,OAAA,KAAA,sBAAAA,CAAA,EAEA,KAAA,sBAAAA,CAAA,EAAA2L,EAAA,OAAA,OAEA,KAAA,SAAA,KAAA,4BAEA,EAEA,2BAAAA,EAAA,CACA,KAAA,mBAEA,KAAA,mBAAA,GACAA,EAAA,OAIA,KAAA,mBAAA,GAFA,KAAA,mBAAA,GAKA,MAAAE,EAAA,KAAA,kBAAA,MAAA,GAAA,EAEA,IAAAC,EAAA,EACAC,EAAA,EAGA,GAAA,CAAA,KAAA,mBAEA,KAAA,SAAA,KACA,KAAA,sBAAA,GACA,KAAA,eAAAF,EAAA,CAAA,EAAA,SAAAA,EAAA,CAAA,CAAA,CAAA,MACA,CAEAC,EAAA,SAAAD,EAAA,CAAA,CAAA,EACAE,EAAAD,EAAA,EAAAA,EAAA,EAAAA,EAAA,EAEA,MAAAE,EAAA,GAAAH,EAAA,CAAA,CAAA,GAAAC,CAAA,GACAG,EAAA,KAAA,SAAAD,CAAA,EAEAnS,EAAA,GAAAgS,EAAA,CAAA,CAAA,GAAAE,CAAA,GACAG,EAAA,KAAA,SAAArS,CAAA,EAEAsS,EAAA,CAAA,EAEA,UAAAhC,KAAAwB,EAAA,OAAA,OAAA,CACA,MAAAS,EAAAjC,EAAA,MAAA,EACAkC,EAAA,CAAAH,EAAA,IAAAE,CAAA,EAAAF,EAAA,IAAAE,EAAA,CAAA,CAAA,EAEAD,EAAA,KAAA,CAEA,CAAAF,EAAA,IAAAG,CAAA,EAAAH,EAAA,IAAAG,EAAA,CAAA,CAAA,EAEAC,CAAA,CACA,EACA,KAAA,iBAAAF,CACA,CAEA,KAAA,WAAA,KAAA,SAAA,mBAAA,IACA,KAAA,sBAAA,GAEA,KAAA,UAAA,KAAA,WAAAJ,CAAA,CACA,CAGA,KAAA,qBACA,KAAA,iBAAA,GAIA,EAEA,MAAA,eAAAO,EAAAC,EAAA,CACA,MAAAC,EAAAF,EAAAC,EAEA,KAAA,SAAA,KACA,KAAA,sBAAA,GAMA,KAAA,iBAAA,GACA,KAAA,kBAAA,GAAAD,CAAA,IAAAC,CAAA,GAQA,KAAA,SAAA,KAAA,SAAAC,CAAA,EACA,KAAA,UAAA,KAAA,WAAAD,CAAA,CACA,EAEA,MAAA,iBAAA,CACA,GAAA,MAAA,UAEA,SAAA,IAAA,kBAAA,EAEA,GAAA,CACA,MAAAE,EAAA,MAAA,KAAA,QAAA,YACA,KAAA,QAAA,UAAA,IAAA,KAAA,QAAA,UAAA,EAEA,KAAA,WAAAC,EAAA,MAAAD,CAAA,QACAjC,EAAA,CACA,QAAA,MAAAA,CAAA,CACA,EACA,EAEA,MAAA,eAAA,CACA,GAAA,KAAA,OAAA,CACA,KAAA,aAAA,EACA,KAAA,WAAA,OAAA,OAAA,CAAA,EAAA,KAAA,MAAA,EACA,KAAA,mBAAA,EACA,MACA,CAEA,IAAA,OAAA,eAAA,EAAA,KAAA,KAAA,QAAA,UAAA,EAGA,MAAA,KAAA,2BAEA,KAAA,sBAAA,CAEA,EAEA,uBAAA,CACA,IAAAmC,EAAA,aACA,KAAA,QAAA,YACAA,EAAA,OAAA,qCAAA,GAAA,aACA,SAAAA,EAAA,EAAA,IAAAA,EAAA,QAAAA,IAGA,KAAA,WAAA,CACA,MAAA,eACA,YAAA,KAAA,QAAA,WACA,KAAA,KAAA,QAAA,WACA,WAAAA,EACA,aAAA,CACA,eAAA,CACA,CAAA,MAAA,UAAA,EAAA,UAAA,EAAA,SAAA,EACA,CAAA,MAAA,eAAA,EAAA,QAAA,EAAA,OAAA,CACA,CACA,EACA,OAAA,KAAA,WAAA,OACA,UAAA,KAAA,WAAA,UACA,OAAA,KAAA,WAAA,OACA,KAAA,KAAA,WAAA,IAAA,EAEA,KAAA,MAAA,QAAA,KAAA,WAAA,KAAA,CAGA,EAEA,oBAAA,CACA,KAAA,WAAA,QACAC,EAAA,IAAA,KAAA,WAAA,SAAA,GAAA,EAGA,KAAA,WAAA,WACAA,EAAA,IAAA,KAAA,WAAA,YAAA,CAAA,CAEA,EAEA,MAAA,0BAAA,CACA,GAAA,CAEA,MAAAC,EACA,KAAA,QAAA,WAAA,QAAA,GAAA,EAAA,GACA,KAAA,QAAA,WACA,KAAA,QAAA,UAAA,IAAA,KAAA,QAAA,WAEAJ,EAAA,MAAA,KAAA,QAAA,YAAAI,CAAA,EACA,KAAA,qBAAA,OAAA,OAAA,GAAAH,EAAA,MAAAD,CAAA,CAAA,EACA,KAAA,aAAA,EACA,KAAA,cAAA,OACA,CAEA,QAAA,IAAA,QAAA,EAEA,KAAA,MAAA,QAAA,CACA,KAAAK,EAAA,MACA,IAAA,iBACA,KAAA,mBAAA,KAAA,QAAA,SAAA,IAAA,KAAA,QAAA,UAAA,EAAA,CACA,CACA,CACA,EAEA,cAAA,CACA,MAAAC,EAAA,IAAA,OAAA,eAAA,EAAA,KAAA,KAAA,QAAA,UAAA,EACA,IAAAC,EAAA,CAAA,EAEAD,GACA,QAAA,IAAA,UAAA,EACAC,EAAA,KAAA,uBAEA,QAAA,IAAA,SAAA,EACAA,EAAA,KAAA,QAGA,UAAAnT,KAAA,KAAA,mBACAA,KAAAmT,GACA,KAAA,MAAA,QAAA,CACA,KAAAF,EAAA,MACA,IAAA,cAAA,KAAA,UAAA,2BAAAjT,CAAA,GACA,KAAA,sBAAA,OAAA,KAAA,KAAA,kBAAA,CAAA,EAAA,CACA,EAIAmT,EAAA,QAAA,GACA,KAAA,MAAA,QAAA,CACA,KAAAF,EAAA,QACA,IAAA,qBACA,KAAA,qDAAA,CACA,GAGAE,EAAA,KAAA,GAAAA,EAAA,KAAA,KACA,KAAA,MAAA,QAAA,CACA,KAAAF,EAAA,QACA,IAAA,wCACA,KAAA,0CAAA,CACA,CAEA,EAEA,eAAA,CACA,KAAA,WAAA,OAAA,OAAA,CAAA,EAAA,KAAA,WAAA,KAAA,oBAAA,EAEA,KAAA,mBAAA,EAEA,MAAAG,EAAA,KAAA,WAAA,MAAA,KAAA,WAAA,MAAA,kBACA,KAAA,MAAA,QAAAA,CAAA,CACA,EAEA,MAAA,gBAAA,CACA,GAAA,KAAA,WAAA,KAAA,WAAA,UACA,GAAA,CAIA,MAAAC,EAAA,MAHA,MAAA,KAAA,QAAA,YACA,KAAA,QAAA,UAAA,IAAA,KAAA,WAAA,SAAA,GAEA,cACAC,EAAAC,GAAA,oBAAAF,CAAA,EACAC,IACA,KAAA,aAAA,sDAAAA,CAAA,WACA3C,EAAA,CACA,QAAA,MAAAA,CAAA,CACA,CAEA,EACA,2BAAA,CACA,MAAA6C,EAAA,OAAA,OAAA,KAAA,qBAAA,EACA,IAAAnO,EAAA,CAAA,EACAmO,EAAA,IAAA1Q,GAAAuC,EAAAA,EAAA,OAAAvC,CAAA,CAAA,EAEA,MAAAgP,EAAA,CAAA,OAAA,CAAA,OAAAzM,CAAA,CAAA,EACA,KAAA,2BAAAyM,CAAA,CACA,EAEA,2BAIA,CACA,MAAA2B,EAAA,OAAA,KAAA,KAAA,qBAAA,EAAA,IAAA3Q,GAAA,SAAAA,CAAA,CAAA,EACA,OAAA2Q,EAAA,OAKA,CAAA,KAHA,OAAA,OAAA,KAAA,qBAAA,EACA,OAAA,CAAA3Q,EAAA2B,IAAA3B,EAAA2B,EAAA,OAAA,CAAA,EAEA,YAAAgP,EAAA,OAAA,mBAAAA,GALA,IAMA,EAEA,MAAA,cAAA,CACA,MAAA9O,EAAA,OAAA,OAAA,KAAA,QAAA,EAAA,CAAA,EAAA,IAGA,GAAA,KAAA,WAAA,OAAA,CACA,OAAA,KAAA,WAAA,QAAA,WACA,KAAA,WAAA,OAAA,KAAA,WAAA,OAAA,MAAA,GAAA,EAAA,IAAA,MAAA,GAGA,MAAA8K,EAAA,CACA,UAAA,KAAA,WAAA,OAAA,CAAA,EACA,SAAA,KAAA,WAAA,OAAA,CAAA,EACA,QAAA,EACA,MAAA,GACA,KAAA,KAAA,WAAA,MAAA,GACA,KAAA,EAAA,EAIAD,EAAA,KAAA,EAAA,GAAAA,EAAA,KAAA,EAAA,EAAAC,CAAA,EAGA,KAAA,OAAA,OAAA,eAAA,OAAA,OAAA,CAAA,EAAAA,CAAA,CAAA,EAEA,MACA,CAGA,GAAA,CAAA9K,EAAA,OAAA,OAEA,IAAA+O,EAAA,EACAC,EAAA,EACAC,EAAA,EAEA,MAAAC,EAAAlP,EAAA,OAAA,EAEAmP,EAAA,IACA,QAAApR,EAAA,EAAAA,EAAAmR,EAAAnR,GAAAoR,EACAH,GAAAhP,EAAAjC,EAAA,CAAA,EACAkR,GAAAjP,EAAAjC,EAAA,EAAA,CAAA,EACAgR,IAGAC,EAAAA,EAAAD,EACAE,EAAAA,EAAAF,EAEA,MAAAK,EAAA,KAAA,OAAA,MAAA,UAEAJ,GAAAC,GACA,KAAA,OAAA,OAAA,eAAA,CACA,UAAAD,EACA,SAAAC,EACA,QAAAG,EAAA,QACA,MAAAA,EAAA,MACA,KAAA,KAAA,WAAA,MAAAA,EAAA,KACA,KAAA,EAAA,CACA,CAEA,EAEA,gBAAA,CACA,KAAA,QAAA,IAAA,eAAA,KAAA,QAAA,EACA,MAAAC,EAAA,SAAA,eAAA,MAAA,KAAA,EAAA,EAAA,EACA,KAAA,QAAA,QAAAA,CAAA,CACA,EAEA,UAAA,CACA,MAAAA,EAAA,SAAA,eAAA,MAAA,KAAA,EAAA,EAAA,EACAC,EAAAD,GAAA,YAAAA,EAAA,cAAA,8BACA,GAAAC,EAAA,CACA,MAAAC,EAAAF,EAAA,YAAA,IAAA,QAAA,OACAC,EAAA,MAAA,MAAAC,CACA,CACA,EAEA,MAAA,aAAAlB,EAAA,CACA,KAAA,QAAA,cAAA,kBAGA,KAAA,WAAA,IAAAmB,GAEA,KAAA,WAAA,UAAA,MAAAd,GAAA,CACA,GAAAA,EAAA,KAAA,OACA,KAAA,QAAA,cAAAA,EAAA,KAAA,eACAA,EAAA,KAAA,MACA,KAAA,QAAA,cAAAA,EAAA,KAAA,MACA,KAAA,MAAA,QAAA,CACA,KAAAJ,EAAA,MACA,IAAA,gBACA,KAAA,kEAAA,CACA,MACA,CACA,KAAA,CAAA,SAAAmB,EAAA,aAAAC,GAAAhB,EAAA,KACA,KAAA,YAAA,KAAA,WAAA,YACA,KAAA,aAAA,CAAA,SAAAe,EAAA,aAAAC,CAAA,CAAA,CACA,CAAA,EAGA,KAAA,WAAA,YAAA,CACA,SAAArB,EACA,WAAA,KAAA,WACA,aAAA,KAAA,WAAA,aACA,WAAA,KAAA,WAAA,UAAA,CACA,CACA,EAEA,aAAA,CAAA,SAAAoB,EAAA,aAAAC,GAAA,CACA,KAAA,aAAAA,EACA,KAAA,SAAAD,EAEA,MAAAE,EAAA,KAAA,kBAAA,WAAA,IAAA,EAAA,EACA,KAAA,SAAA,KAAA,SAAAA,CAAA,EAEA,KAAA,aAAA,EACA,KAAA,SAAA,EACA,KAAA,QAAA,cAAA,EACA,EAEA,MAAA,WAAA,CACA,IAAAC,EAAA,CAAA,EACA,GAAA,CAAA,KAAA,QAAA,MAAA,CAAA,UAAAA,CAAA,EAEA,GAAA,CACA,IAAAvB,EAAA,GAAA,KAAA,QAAA,SAAA,IAAA,KAAA,WAAA,IAAA,GACA,MAAA,KAAA,aAAAA,CAAA,QACArC,EAAA,CACA,QAAA,MAAAA,CAAA,EACA,KAAA,QAAA,cAAA,GAAAA,EACA,KAAA,MAAA,QAAA,CACA,KAAAsC,EAAA,MACA,IAAA,wBACA,KAAA,0EAAA,CACA,CACA,CACA,CACA,EACA,MAAA,SAAA,CACA,KAAA,OAAA,OAAA,gBAAA,CAAA,KAAA,SAAA,EAEA,KAAA,QAAA,UAAA,KAAA,UACA,KAAA,QAAA,WAAA,KAAA,YAAA,GACA,KAAA,QAAA,UAAA,KAAA,UAEA,MAAA,KAAA,gBAEA,MAAA,YAEA,KAAA,eAAA,EAEA,KAAA,QAAA,cAAA,GAAA,KAAA,MAAA,EAAA,SAAA,CAAA,GACA,KAAA,aAAA,KAAA,WAAA,aAGA,MAAA,KAAA,YAIA,KAAA,eAAA,EAEA,KAAA,SAAA,GACA,KAAA,eAAA,OAAA,KAAA,KAAA,YAAA,EAAA,CAAA,EAAA,CAAA,EACA,EAEA,eAAA,CAEAzD,EAAA,KAAA,EAAA,EAAA,OACA,OAAAA,EAAA,KAAA,EAAA,EAEA,GAAA,CACA,KAAA,YACA,KAAA,WAAA,kBAEAmB,EAAA,CACA,QAAA,KAAAA,CAAA,CACA,CAEA,KAAA,OAAA,OAAA,gBAAA,EAAA,CACA,CACA,CAAA","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}