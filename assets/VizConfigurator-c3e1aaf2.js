import{i as vn,n as Wt,d as Yt,g as Tr,D as Nt}from"./index-6ca30cbc.js";import{y as dg}from"./index-650b7cb7.js";import{g as hg}from"./util-6eb30833.js";import{H as pg}from"./HTTPFileSystem-a263b5e7.js";import{W as dl}from"./DataFetcher.worker-c87933e8.js";import{d as gg,a as vg,S as H,c as hl}from"./ColorsAndWidths-599a36fb.js";import{a as pl,d as mg}from"./index-992ee35a.js";import{L as _g}from"./LegendBox-f090f8c6.js";var fi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fi.exports;(function(l,r){(function(){var i,f="4.17.21",d=200,y="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",T="Expected a function",ft="Invalid `variable` option passed into `_.template`",ct="__lodash_hash_undefined__",Ut=500,vt="__lodash_placeholder__",tt=1,Ft=2,st=4,Zt=1,me=2,at=1,Mt=2,j=4,z=8,Jt=16,Bt=32,Re=64,jt=128,Ke=256,ci=512,gl=30,vl="...",ml=800,_l=16,Er=1,Cl=2,bl=3,_e=1/0,le=9007199254740991,yl=17976931348623157e292,mn=0/0,qt=4294967295,xl=qt-1,wl=qt>>>1,Sl=[["ary",jt],["bind",at],["bindKey",Mt],["curry",z],["curryRight",Jt],["flip",ci],["partial",Bt],["partialRight",Re],["rearg",Ke]],Ie="[object Arguments]",_n="[object Array]",Al="[object AsyncFunction]",Ye="[object Boolean]",Ze="[object Date]",Ll="[object DOMException]",Cn="[object Error]",bn="[object Function]",Pr="[object GeneratorFunction]",$t="[object Map]",Je="[object Number]",Ol="[object Null]",Xt="[object Object]",kr="[object Promise]",Rl="[object Proxy]",je="[object RegExp]",Tt="[object Set]",Xe="[object String]",yn="[object Symbol]",Il="[object Undefined]",Qe="[object WeakMap]",Dl="[object WeakSet]",Ve="[object ArrayBuffer]",De="[object DataView]",di="[object Float32Array]",hi="[object Float64Array]",pi="[object Int8Array]",gi="[object Int16Array]",vi="[object Int32Array]",mi="[object Uint8Array]",_i="[object Uint8ClampedArray]",Ci="[object Uint16Array]",bi="[object Uint32Array]",Fl=/\b__p \+= '';/g,$l=/\b(__p \+=) '' \+/g,Tl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zr=/&(?:amp|lt|gt|quot|#39);/g,Nr=/[&<>"']/g,El=RegExp(zr.source),Pl=RegExp(Nr.source),kl=/<%-([\s\S]+?)%>/g,zl=/<%([\s\S]+?)%>/g,Wr=/<%=([\s\S]+?)%>/g,Nl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wl=/^\w*$/,Ul=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yi=/[\\^$.*+?()[\]{}|]/g,Ml=RegExp(yi.source),xi=/^\s+/,Bl=/\s/,ql=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hl=/\{\n\/\* \[wrapped with (.+)\] \*/,Gl=/,? & /,Kl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yl=/[()=,{}\[\]\/\s]/,Zl=/\\(\\)?/g,Jl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ur=/\w*$/,jl=/^[-+]0x[0-9a-f]+$/i,Xl=/^0b[01]+$/i,Ql=/^\[object .+?Constructor\]$/,Vl=/^0o[0-7]+$/i,to=/^(?:0|[1-9]\d*)$/,eo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,no=/['\n\r\u2028\u2029\\]/g,wn="\\ud800-\\udfff",io="\\u0300-\\u036f",ro="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Mr=io+ro+so,Br="\\u2700-\\u27bf",qr="a-z\\xdf-\\xf6\\xf8-\\xff",ao="\\xac\\xb1\\xd7\\xf7",lo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oo="\\u2000-\\u206f",uo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hr="A-Z\\xc0-\\xd6\\xd8-\\xde",Gr="\\ufe0e\\ufe0f",Kr=ao+lo+oo+uo,wi="['’]",fo="["+wn+"]",Yr="["+Kr+"]",Sn="["+Mr+"]",Zr="\\d+",co="["+Br+"]",Jr="["+qr+"]",jr="[^"+wn+Kr+Zr+Br+qr+Hr+"]",Si="\\ud83c[\\udffb-\\udfff]",ho="(?:"+Sn+"|"+Si+")",Xr="[^"+wn+"]",Ai="(?:\\ud83c[\\udde6-\\uddff]){2}",Li="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+Hr+"]",Qr="\\u200d",Vr="(?:"+Jr+"|"+jr+")",po="(?:"+Fe+"|"+jr+")",ts="(?:"+wi+"(?:d|ll|m|re|s|t|ve))?",es="(?:"+wi+"(?:D|LL|M|RE|S|T|VE))?",ns=ho+"?",is="["+Gr+"]?",go="(?:"+Qr+"(?:"+[Xr,Ai,Li].join("|")+")"+is+ns+")*",vo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rs=is+ns+go,_o="(?:"+[co,Ai,Li].join("|")+")"+rs,Co="(?:"+[Xr+Sn+"?",Sn,Ai,Li,fo].join("|")+")",bo=RegExp(wi,"g"),yo=RegExp(Sn,"g"),Oi=RegExp(Si+"(?="+Si+")|"+Co+rs,"g"),xo=RegExp([Fe+"?"+Jr+"+"+ts+"(?="+[Yr,Fe,"$"].join("|")+")",po+"+"+es+"(?="+[Yr,Fe+Vr,"$"].join("|")+")",Fe+"?"+Vr+"+"+ts,Fe+"+"+es,mo,vo,Zr,_o].join("|"),"g"),wo=RegExp("["+Qr+wn+Mr+Gr+"]"),So=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ao=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lo=-1,q={};q[di]=q[hi]=q[pi]=q[gi]=q[vi]=q[mi]=q[_i]=q[Ci]=q[bi]=!0,q[Ie]=q[_n]=q[Ve]=q[Ye]=q[De]=q[Ze]=q[Cn]=q[bn]=q[$t]=q[Je]=q[Xt]=q[je]=q[Tt]=q[Xe]=q[Qe]=!1;var B={};B[Ie]=B[_n]=B[Ve]=B[De]=B[Ye]=B[Ze]=B[di]=B[hi]=B[pi]=B[gi]=B[vi]=B[$t]=B[Je]=B[Xt]=B[je]=B[Tt]=B[Xe]=B[yn]=B[mi]=B[_i]=B[Ci]=B[bi]=!0,B[Cn]=B[bn]=B[Qe]=!1;var Oo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Io={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Do={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fo=parseFloat,$o=parseInt,ss=typeof vn=="object"&&vn&&vn.Object===Object&&vn,To=typeof self=="object"&&self&&self.Object===Object&&self,et=ss||To||Function("return this")(),Ri=r&&!r.nodeType&&r,Ce=Ri&&!0&&l&&!l.nodeType&&l,as=Ce&&Ce.exports===Ri,Ii=as&&ss.process,wt=function(){try{var p=Ce&&Ce.require&&Ce.require("util").types;return p||Ii&&Ii.binding&&Ii.binding("util")}catch{}}(),ls=wt&&wt.isArrayBuffer,os=wt&&wt.isDate,us=wt&&wt.isMap,fs=wt&&wt.isRegExp,cs=wt&&wt.isSet,ds=wt&&wt.isTypedArray;function mt(p,m,v){switch(v.length){case 0:return p.call(m);case 1:return p.call(m,v[0]);case 2:return p.call(m,v[0],v[1]);case 3:return p.call(m,v[0],v[1],v[2])}return p.apply(m,v)}function Eo(p,m,v,w){for(var R=-1,N=p==null?0:p.length;++R<N;){var X=p[R];m(w,X,v(X),p)}return w}function St(p,m){for(var v=-1,w=p==null?0:p.length;++v<w&&m(p[v],v,p)!==!1;);return p}function Po(p,m){for(var v=p==null?0:p.length;v--&&m(p[v],v,p)!==!1;);return p}function hs(p,m){for(var v=-1,w=p==null?0:p.length;++v<w;)if(!m(p[v],v,p))return!1;return!0}function oe(p,m){for(var v=-1,w=p==null?0:p.length,R=0,N=[];++v<w;){var X=p[v];m(X,v,p)&&(N[R++]=X)}return N}function An(p,m){var v=p==null?0:p.length;return!!v&&$e(p,m,0)>-1}function Di(p,m,v){for(var w=-1,R=p==null?0:p.length;++w<R;)if(v(m,p[w]))return!0;return!1}function G(p,m){for(var v=-1,w=p==null?0:p.length,R=Array(w);++v<w;)R[v]=m(p[v],v,p);return R}function ue(p,m){for(var v=-1,w=m.length,R=p.length;++v<w;)p[R+v]=m[v];return p}function Fi(p,m,v,w){var R=-1,N=p==null?0:p.length;for(w&&N&&(v=p[++R]);++R<N;)v=m(v,p[R],R,p);return v}function ko(p,m,v,w){var R=p==null?0:p.length;for(w&&R&&(v=p[--R]);R--;)v=m(v,p[R],R,p);return v}function $i(p,m){for(var v=-1,w=p==null?0:p.length;++v<w;)if(m(p[v],v,p))return!0;return!1}var zo=Ti("length");function No(p){return p.split("")}function Wo(p){return p.match(Kl)||[]}function ps(p,m,v){var w;return v(p,function(R,N,X){if(m(R,N,X))return w=N,!1}),w}function Ln(p,m,v,w){for(var R=p.length,N=v+(w?1:-1);w?N--:++N<R;)if(m(p[N],N,p))return N;return-1}function $e(p,m,v){return m===m?Xo(p,m,v):Ln(p,gs,v)}function Uo(p,m,v,w){for(var R=v-1,N=p.length;++R<N;)if(w(p[R],m))return R;return-1}function gs(p){return p!==p}function vs(p,m){var v=p==null?0:p.length;return v?Pi(p,m)/v:mn}function Ti(p){return function(m){return m==null?i:m[p]}}function Ei(p){return function(m){return p==null?i:p[m]}}function ms(p,m,v,w,R){return R(p,function(N,X,M){v=w?(w=!1,N):m(v,N,X,M)}),v}function Mo(p,m){var v=p.length;for(p.sort(m);v--;)p[v]=p[v].value;return p}function Pi(p,m){for(var v,w=-1,R=p.length;++w<R;){var N=m(p[w]);N!==i&&(v=v===i?N:v+N)}return v}function ki(p,m){for(var v=-1,w=Array(p);++v<p;)w[v]=m(v);return w}function Bo(p,m){return G(m,function(v){return[v,p[v]]})}function _s(p){return p&&p.slice(0,xs(p)+1).replace(xi,"")}function _t(p){return function(m){return p(m)}}function zi(p,m){return G(m,function(v){return p[v]})}function tn(p,m){return p.has(m)}function Cs(p,m){for(var v=-1,w=p.length;++v<w&&$e(m,p[v],0)>-1;);return v}function bs(p,m){for(var v=p.length;v--&&$e(m,p[v],0)>-1;);return v}function qo(p,m){for(var v=p.length,w=0;v--;)p[v]===m&&++w;return w}var Ho=Ei(Oo),Go=Ei(Ro);function Ko(p){return"\\"+Do[p]}function Yo(p,m){return p==null?i:p[m]}function Te(p){return wo.test(p)}function Zo(p){return So.test(p)}function Jo(p){for(var m,v=[];!(m=p.next()).done;)v.push(m.value);return v}function Ni(p){var m=-1,v=Array(p.size);return p.forEach(function(w,R){v[++m]=[R,w]}),v}function ys(p,m){return function(v){return p(m(v))}}function fe(p,m){for(var v=-1,w=p.length,R=0,N=[];++v<w;){var X=p[v];(X===m||X===vt)&&(p[v]=vt,N[R++]=v)}return N}function On(p){var m=-1,v=Array(p.size);return p.forEach(function(w){v[++m]=w}),v}function jo(p){var m=-1,v=Array(p.size);return p.forEach(function(w){v[++m]=[w,w]}),v}function Xo(p,m,v){for(var w=v-1,R=p.length;++w<R;)if(p[w]===m)return w;return-1}function Qo(p,m,v){for(var w=v+1;w--;)if(p[w]===m)return w;return w}function Ee(p){return Te(p)?tu(p):zo(p)}function Et(p){return Te(p)?eu(p):No(p)}function xs(p){for(var m=p.length;m--&&Bl.test(p.charAt(m)););return m}var Vo=Ei(Io);function tu(p){for(var m=Oi.lastIndex=0;Oi.test(p);)++m;return m}function eu(p){return p.match(Oi)||[]}function nu(p){return p.match(xo)||[]}var iu=function p(m){m=m==null?et:Pe.defaults(et.Object(),m,Pe.pick(et,Ao));var v=m.Array,w=m.Date,R=m.Error,N=m.Function,X=m.Math,M=m.Object,Wi=m.RegExp,ru=m.String,At=m.TypeError,Rn=v.prototype,su=N.prototype,ke=M.prototype,In=m["__core-js_shared__"],Dn=su.toString,U=ke.hasOwnProperty,au=0,ws=function(){var t=/[^.]+$/.exec(In&&In.keys&&In.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Fn=ke.toString,lu=Dn.call(M),ou=et._,uu=Wi("^"+Dn.call(U).replace(yi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$n=as?m.Buffer:i,ce=m.Symbol,Tn=m.Uint8Array,Ss=$n?$n.allocUnsafe:i,En=ys(M.getPrototypeOf,M),As=M.create,Ls=ke.propertyIsEnumerable,Pn=Rn.splice,Os=ce?ce.isConcatSpreadable:i,en=ce?ce.iterator:i,be=ce?ce.toStringTag:i,kn=function(){try{var t=Ae(M,"defineProperty");return t({},"",{}),t}catch{}}(),fu=m.clearTimeout!==et.clearTimeout&&m.clearTimeout,cu=w&&w.now!==et.Date.now&&w.now,du=m.setTimeout!==et.setTimeout&&m.setTimeout,zn=X.ceil,Nn=X.floor,Ui=M.getOwnPropertySymbols,hu=$n?$n.isBuffer:i,Rs=m.isFinite,pu=Rn.join,gu=ys(M.keys,M),Q=X.max,it=X.min,vu=w.now,mu=m.parseInt,Is=X.random,_u=Rn.reverse,Mi=Ae(m,"DataView"),nn=Ae(m,"Map"),Bi=Ae(m,"Promise"),ze=Ae(m,"Set"),rn=Ae(m,"WeakMap"),sn=Ae(M,"create"),Wn=rn&&new rn,Ne={},Cu=Le(Mi),bu=Le(nn),yu=Le(Bi),xu=Le(ze),wu=Le(rn),Un=ce?ce.prototype:i,an=Un?Un.valueOf:i,Ds=Un?Un.toString:i;function o(t){if(Y(t)&&!I(t)&&!(t instanceof P)){if(t instanceof Lt)return t;if(U.call(t,"__wrapped__"))return Fa(t)}return new Lt(t)}var We=function(){function t(){}return function(e){if(!K(e))return{};if(As)return As(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Mn(){}function Lt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}o.templateSettings={escape:kl,evaluate:zl,interpolate:Wr,variable:"",imports:{_:o}},o.prototype=Mn.prototype,o.prototype.constructor=o,Lt.prototype=We(Mn.prototype),Lt.prototype.constructor=Lt;function P(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qt,this.__views__=[]}function Su(){var t=new P(this.__wrapped__);return t.__actions__=dt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=dt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=dt(this.__views__),t}function Au(){if(this.__filtered__){var t=new P(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Lu(){var t=this.__wrapped__.value(),e=this.__dir__,n=I(t),s=e<0,a=n?t.length:0,u=Wf(0,a,this.__views__),c=u.start,h=u.end,g=h-c,_=s?h:c-1,C=this.__iteratees__,b=C.length,x=0,S=it(g,this.__takeCount__);if(!n||!s&&a==g&&S==g)return ta(t,this.__actions__);var L=[];t:for(;g--&&x<S;){_+=e;for(var F=-1,O=t[_];++F<b;){var E=C[F],k=E.iteratee,yt=E.type,ut=k(O);if(yt==Cl)O=ut;else if(!ut){if(yt==Er)continue t;break t}}L[x++]=O}return L}P.prototype=We(Mn.prototype),P.prototype.constructor=P;function ye(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function Ou(){this.__data__=sn?sn(null):{},this.size=0}function Ru(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Iu(t){var e=this.__data__;if(sn){var n=e[t];return n===ct?i:n}return U.call(e,t)?e[t]:i}function Du(t){var e=this.__data__;return sn?e[t]!==i:U.call(e,t)}function Fu(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sn&&e===i?ct:e,this}ye.prototype.clear=Ou,ye.prototype.delete=Ru,ye.prototype.get=Iu,ye.prototype.has=Du,ye.prototype.set=Fu;function Qt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function $u(){this.__data__=[],this.size=0}function Tu(t){var e=this.__data__,n=Bn(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():Pn.call(e,n,1),--this.size,!0}function Eu(t){var e=this.__data__,n=Bn(e,t);return n<0?i:e[n][1]}function Pu(t){return Bn(this.__data__,t)>-1}function ku(t,e){var n=this.__data__,s=Bn(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}Qt.prototype.clear=$u,Qt.prototype.delete=Tu,Qt.prototype.get=Eu,Qt.prototype.has=Pu,Qt.prototype.set=ku;function Vt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}function zu(){this.size=0,this.__data__={hash:new ye,map:new(nn||Qt),string:new ye}}function Nu(t){var e=ti(this,t).delete(t);return this.size-=e?1:0,e}function Wu(t){return ti(this,t).get(t)}function Uu(t){return ti(this,t).has(t)}function Mu(t,e){var n=ti(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}Vt.prototype.clear=zu,Vt.prototype.delete=Nu,Vt.prototype.get=Wu,Vt.prototype.has=Uu,Vt.prototype.set=Mu;function xe(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Vt;++e<n;)this.add(t[e])}function Bu(t){return this.__data__.set(t,ct),this}function qu(t){return this.__data__.has(t)}xe.prototype.add=xe.prototype.push=Bu,xe.prototype.has=qu;function Pt(t){var e=this.__data__=new Qt(t);this.size=e.size}function Hu(){this.__data__=new Qt,this.size=0}function Gu(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Ku(t){return this.__data__.get(t)}function Yu(t){return this.__data__.has(t)}function Zu(t,e){var n=this.__data__;if(n instanceof Qt){var s=n.__data__;if(!nn||s.length<d-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vt(s)}return n.set(t,e),this.size=n.size,this}Pt.prototype.clear=Hu,Pt.prototype.delete=Gu,Pt.prototype.get=Ku,Pt.prototype.has=Yu,Pt.prototype.set=Zu;function Fs(t,e){var n=I(t),s=!n&&Oe(t),a=!n&&!s&&ve(t),u=!n&&!s&&!a&&qe(t),c=n||s||a||u,h=c?ki(t.length,ru):[],g=h.length;for(var _ in t)(e||U.call(t,_))&&!(c&&(_=="length"||a&&(_=="offset"||_=="parent")||u&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||ie(_,g)))&&h.push(_);return h}function $s(t){var e=t.length;return e?t[Vi(0,e-1)]:i}function Ju(t,e){return ei(dt(t),we(e,0,t.length))}function ju(t){return ei(dt(t))}function qi(t,e,n){(n!==i&&!kt(t[e],n)||n===i&&!(e in t))&&te(t,e,n)}function ln(t,e,n){var s=t[e];(!(U.call(t,e)&&kt(s,n))||n===i&&!(e in t))&&te(t,e,n)}function Bn(t,e){for(var n=t.length;n--;)if(kt(t[n][0],e))return n;return-1}function Xu(t,e,n,s){return de(t,function(a,u,c){e(s,a,n(a),c)}),s}function Ts(t,e){return t&&Gt(e,V(e),t)}function Qu(t,e){return t&&Gt(e,pt(e),t)}function te(t,e,n){e=="__proto__"&&kn?kn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Hi(t,e){for(var n=-1,s=e.length,a=v(s),u=t==null;++n<s;)a[n]=u?i:Sr(t,e[n]);return a}function we(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function Ot(t,e,n,s,a,u){var c,h=e&tt,g=e&Ft,_=e&st;if(n&&(c=a?n(t,s,a,u):n(t)),c!==i)return c;if(!K(t))return t;var C=I(t);if(C){if(c=Mf(t),!h)return dt(t,c)}else{var b=rt(t),x=b==bn||b==Pr;if(ve(t))return ia(t,h);if(b==Xt||b==Ie||x&&!a){if(c=g||x?{}:xa(t),!h)return g?Df(t,Qu(c,t)):If(t,Ts(c,t))}else{if(!B[b])return a?t:{};c=Bf(t,b,h)}}u||(u=new Pt);var S=u.get(t);if(S)return S;u.set(t,c),Xa(t)?t.forEach(function(O){c.add(Ot(O,e,n,O,t,u))}):Ja(t)&&t.forEach(function(O,E){c.set(E,Ot(O,e,n,E,t,u))});var L=_?g?fr:ur:g?pt:V,F=C?i:L(t);return St(F||t,function(O,E){F&&(E=O,O=t[E]),ln(c,E,Ot(O,e,n,E,t,u))}),c}function Vu(t){var e=V(t);return function(n){return Es(n,t,e)}}function Es(t,e,n){var s=n.length;if(t==null)return!s;for(t=M(t);s--;){var a=n[s],u=e[a],c=t[a];if(c===i&&!(a in t)||!u(c))return!1}return!0}function Ps(t,e,n){if(typeof t!="function")throw new At(T);return pn(function(){t.apply(i,n)},e)}function on(t,e,n,s){var a=-1,u=An,c=!0,h=t.length,g=[],_=e.length;if(!h)return g;n&&(e=G(e,_t(n))),s?(u=Di,c=!1):e.length>=d&&(u=tn,c=!1,e=new xe(e));t:for(;++a<h;){var C=t[a],b=n==null?C:n(C);if(C=s||C!==0?C:0,c&&b===b){for(var x=_;x--;)if(e[x]===b)continue t;g.push(C)}else u(e,b,s)||g.push(C)}return g}var de=oa(Ht),ks=oa(Ki,!0);function tf(t,e){var n=!0;return de(t,function(s,a,u){return n=!!e(s,a,u),n}),n}function qn(t,e,n){for(var s=-1,a=t.length;++s<a;){var u=t[s],c=e(u);if(c!=null&&(h===i?c===c&&!bt(c):n(c,h)))var h=c,g=u}return g}function ef(t,e,n,s){var a=t.length;for(n=D(n),n<0&&(n=-n>a?0:a+n),s=s===i||s>a?a:D(s),s<0&&(s+=a),s=n>s?0:Va(s);n<s;)t[n++]=e;return t}function zs(t,e){var n=[];return de(t,function(s,a,u){e(s,a,u)&&n.push(s)}),n}function nt(t,e,n,s,a){var u=-1,c=t.length;for(n||(n=Hf),a||(a=[]);++u<c;){var h=t[u];e>0&&n(h)?e>1?nt(h,e-1,n,s,a):ue(a,h):s||(a[a.length]=h)}return a}var Gi=ua(),Ns=ua(!0);function Ht(t,e){return t&&Gi(t,e,V)}function Ki(t,e){return t&&Ns(t,e,V)}function Hn(t,e){return oe(e,function(n){return re(t[n])})}function Se(t,e){e=pe(e,t);for(var n=0,s=e.length;t!=null&&n<s;)t=t[Kt(e[n++])];return n&&n==s?t:i}function Ws(t,e,n){var s=e(t);return I(t)?s:ue(s,n(t))}function lt(t){return t==null?t===i?Il:Ol:be&&be in M(t)?Nf(t):Xf(t)}function Yi(t,e){return t>e}function nf(t,e){return t!=null&&U.call(t,e)}function rf(t,e){return t!=null&&e in M(t)}function sf(t,e,n){return t>=it(e,n)&&t<Q(e,n)}function Zi(t,e,n){for(var s=n?Di:An,a=t[0].length,u=t.length,c=u,h=v(u),g=1/0,_=[];c--;){var C=t[c];c&&e&&(C=G(C,_t(e))),g=it(C.length,g),h[c]=!n&&(e||a>=120&&C.length>=120)?new xe(c&&C):i}C=t[0];var b=-1,x=h[0];t:for(;++b<a&&_.length<g;){var S=C[b],L=e?e(S):S;if(S=n||S!==0?S:0,!(x?tn(x,L):s(_,L,n))){for(c=u;--c;){var F=h[c];if(!(F?tn(F,L):s(t[c],L,n)))continue t}x&&x.push(L),_.push(S)}}return _}function af(t,e,n,s){return Ht(t,function(a,u,c){e(s,n(a),u,c)}),s}function un(t,e,n){e=pe(e,t),t=La(t,e);var s=t==null?t:t[Kt(It(e))];return s==null?i:mt(s,t,n)}function Us(t){return Y(t)&&lt(t)==Ie}function lf(t){return Y(t)&&lt(t)==Ve}function of(t){return Y(t)&&lt(t)==Ze}function fn(t,e,n,s,a){return t===e?!0:t==null||e==null||!Y(t)&&!Y(e)?t!==t&&e!==e:uf(t,e,n,s,fn,a)}function uf(t,e,n,s,a,u){var c=I(t),h=I(e),g=c?_n:rt(t),_=h?_n:rt(e);g=g==Ie?Xt:g,_=_==Ie?Xt:_;var C=g==Xt,b=_==Xt,x=g==_;if(x&&ve(t)){if(!ve(e))return!1;c=!0,C=!1}if(x&&!C)return u||(u=new Pt),c||qe(t)?Ca(t,e,n,s,a,u):kf(t,e,g,n,s,a,u);if(!(n&Zt)){var S=C&&U.call(t,"__wrapped__"),L=b&&U.call(e,"__wrapped__");if(S||L){var F=S?t.value():t,O=L?e.value():e;return u||(u=new Pt),a(F,O,n,s,u)}}return x?(u||(u=new Pt),zf(t,e,n,s,a,u)):!1}function ff(t){return Y(t)&&rt(t)==$t}function Ji(t,e,n,s){var a=n.length,u=a,c=!s;if(t==null)return!u;for(t=M(t);a--;){var h=n[a];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++a<u;){h=n[a];var g=h[0],_=t[g],C=h[1];if(c&&h[2]){if(_===i&&!(g in t))return!1}else{var b=new Pt;if(s)var x=s(_,C,g,t,e,b);if(!(x===i?fn(C,_,Zt|me,s,b):x))return!1}}return!0}function Ms(t){if(!K(t)||Kf(t))return!1;var e=re(t)?uu:Ql;return e.test(Le(t))}function cf(t){return Y(t)&&lt(t)==je}function df(t){return Y(t)&&rt(t)==Tt}function hf(t){return Y(t)&&li(t.length)&&!!q[lt(t)]}function Bs(t){return typeof t=="function"?t:t==null?gt:typeof t=="object"?I(t)?Gs(t[0],t[1]):Hs(t):fl(t)}function ji(t){if(!hn(t))return gu(t);var e=[];for(var n in M(t))U.call(t,n)&&n!="constructor"&&e.push(n);return e}function pf(t){if(!K(t))return jf(t);var e=hn(t),n=[];for(var s in t)s=="constructor"&&(e||!U.call(t,s))||n.push(s);return n}function Xi(t,e){return t<e}function qs(t,e){var n=-1,s=ht(t)?v(t.length):[];return de(t,function(a,u,c){s[++n]=e(a,u,c)}),s}function Hs(t){var e=dr(t);return e.length==1&&e[0][2]?Sa(e[0][0],e[0][1]):function(n){return n===t||Ji(n,t,e)}}function Gs(t,e){return pr(t)&&wa(e)?Sa(Kt(t),e):function(n){var s=Sr(n,t);return s===i&&s===e?Ar(n,t):fn(e,s,Zt|me)}}function Gn(t,e,n,s,a){t!==e&&Gi(e,function(u,c){if(a||(a=new Pt),K(u))gf(t,e,c,n,Gn,s,a);else{var h=s?s(vr(t,c),u,c+"",t,e,a):i;h===i&&(h=u),qi(t,c,h)}},pt)}function gf(t,e,n,s,a,u,c){var h=vr(t,n),g=vr(e,n),_=c.get(g);if(_){qi(t,n,_);return}var C=u?u(h,g,n+"",t,e,c):i,b=C===i;if(b){var x=I(g),S=!x&&ve(g),L=!x&&!S&&qe(g);C=g,x||S||L?I(h)?C=h:Z(h)?C=dt(h):S?(b=!1,C=ia(g,!0)):L?(b=!1,C=ra(g,!0)):C=[]:gn(g)||Oe(g)?(C=h,Oe(h)?C=tl(h):(!K(h)||re(h))&&(C=xa(g))):b=!1}b&&(c.set(g,C),a(C,g,s,u,c),c.delete(g)),qi(t,n,C)}function Ks(t,e){var n=t.length;if(n)return e+=e<0?n:0,ie(e,n)?t[e]:i}function Ys(t,e,n){e.length?e=G(e,function(u){return I(u)?function(c){return Se(c,u.length===1?u[0]:u)}:u}):e=[gt];var s=-1;e=G(e,_t(A()));var a=qs(t,function(u,c,h){var g=G(e,function(_){return _(u)});return{criteria:g,index:++s,value:u}});return Mo(a,function(u,c){return Rf(u,c,n)})}function vf(t,e){return Zs(t,e,function(n,s){return Ar(t,s)})}function Zs(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var c=e[s],h=Se(t,c);n(h,c)&&cn(u,pe(c,t),h)}return u}function mf(t){return function(e){return Se(e,t)}}function Qi(t,e,n,s){var a=s?Uo:$e,u=-1,c=e.length,h=t;for(t===e&&(e=dt(e)),n&&(h=G(t,_t(n)));++u<c;)for(var g=0,_=e[u],C=n?n(_):_;(g=a(h,C,g,s))>-1;)h!==t&&Pn.call(h,g,1),Pn.call(t,g,1);return t}function Js(t,e){for(var n=t?e.length:0,s=n-1;n--;){var a=e[n];if(n==s||a!==u){var u=a;ie(a)?Pn.call(t,a,1):nr(t,a)}}return t}function Vi(t,e){return t+Nn(Is()*(e-t+1))}function _f(t,e,n,s){for(var a=-1,u=Q(zn((e-t)/(n||1)),0),c=v(u);u--;)c[s?u:++a]=t,t+=n;return c}function tr(t,e){var n="";if(!t||e<1||e>le)return n;do e%2&&(n+=t),e=Nn(e/2),e&&(t+=t);while(e);return n}function $(t,e){return mr(Aa(t,e,gt),t+"")}function Cf(t){return $s(He(t))}function bf(t,e){var n=He(t);return ei(n,we(e,0,n.length))}function cn(t,e,n,s){if(!K(t))return t;e=pe(e,t);for(var a=-1,u=e.length,c=u-1,h=t;h!=null&&++a<u;){var g=Kt(e[a]),_=n;if(g==="__proto__"||g==="constructor"||g==="prototype")return t;if(a!=c){var C=h[g];_=s?s(C,g,h):i,_===i&&(_=K(C)?C:ie(e[a+1])?[]:{})}ln(h,g,_),h=h[g]}return t}var js=Wn?function(t,e){return Wn.set(t,e),t}:gt,yf=kn?function(t,e){return kn(t,"toString",{configurable:!0,enumerable:!1,value:Or(e),writable:!0})}:gt;function xf(t){return ei(He(t))}function Rt(t,e,n){var s=-1,a=t.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var u=v(a);++s<a;)u[s]=t[s+e];return u}function wf(t,e){var n;return de(t,function(s,a,u){return n=e(s,a,u),!n}),!!n}function Kn(t,e,n){var s=0,a=t==null?s:t.length;if(typeof e=="number"&&e===e&&a<=wl){for(;s<a;){var u=s+a>>>1,c=t[u];c!==null&&!bt(c)&&(n?c<=e:c<e)?s=u+1:a=u}return a}return er(t,e,gt,n)}function er(t,e,n,s){var a=0,u=t==null?0:t.length;if(u===0)return 0;e=n(e);for(var c=e!==e,h=e===null,g=bt(e),_=e===i;a<u;){var C=Nn((a+u)/2),b=n(t[C]),x=b!==i,S=b===null,L=b===b,F=bt(b);if(c)var O=s||L;else _?O=L&&(s||x):h?O=L&&x&&(s||!S):g?O=L&&x&&!S&&(s||!F):S||F?O=!1:O=s?b<=e:b<e;O?a=C+1:u=C}return it(u,xl)}function Xs(t,e){for(var n=-1,s=t.length,a=0,u=[];++n<s;){var c=t[n],h=e?e(c):c;if(!n||!kt(h,g)){var g=h;u[a++]=c===0?0:c}}return u}function Qs(t){return typeof t=="number"?t:bt(t)?mn:+t}function Ct(t){if(typeof t=="string")return t;if(I(t))return G(t,Ct)+"";if(bt(t))return Ds?Ds.call(t):"";var e=t+"";return e=="0"&&1/t==-_e?"-0":e}function he(t,e,n){var s=-1,a=An,u=t.length,c=!0,h=[],g=h;if(n)c=!1,a=Di;else if(u>=d){var _=e?null:Ef(t);if(_)return On(_);c=!1,a=tn,g=new xe}else g=e?[]:h;t:for(;++s<u;){var C=t[s],b=e?e(C):C;if(C=n||C!==0?C:0,c&&b===b){for(var x=g.length;x--;)if(g[x]===b)continue t;e&&g.push(b),h.push(C)}else a(g,b,n)||(g!==h&&g.push(b),h.push(C))}return h}function nr(t,e){return e=pe(e,t),t=La(t,e),t==null||delete t[Kt(It(e))]}function Vs(t,e,n,s){return cn(t,e,n(Se(t,e)),s)}function Yn(t,e,n,s){for(var a=t.length,u=s?a:-1;(s?u--:++u<a)&&e(t[u],u,t););return n?Rt(t,s?0:u,s?u+1:a):Rt(t,s?u+1:0,s?a:u)}function ta(t,e){var n=t;return n instanceof P&&(n=n.value()),Fi(e,function(s,a){return a.func.apply(a.thisArg,ue([s],a.args))},n)}function ir(t,e,n){var s=t.length;if(s<2)return s?he(t[0]):[];for(var a=-1,u=v(s);++a<s;)for(var c=t[a],h=-1;++h<s;)h!=a&&(u[a]=on(u[a]||c,t[h],e,n));return he(nt(u,1),e,n)}function ea(t,e,n){for(var s=-1,a=t.length,u=e.length,c={};++s<a;){var h=s<u?e[s]:i;n(c,t[s],h)}return c}function rr(t){return Z(t)?t:[]}function sr(t){return typeof t=="function"?t:gt}function pe(t,e){return I(t)?t:pr(t,e)?[t]:Da(W(t))}var Sf=$;function ge(t,e,n){var s=t.length;return n=n===i?s:n,!e&&n>=s?t:Rt(t,e,n)}var na=fu||function(t){return et.clearTimeout(t)};function ia(t,e){if(e)return t.slice();var n=t.length,s=Ss?Ss(n):new t.constructor(n);return t.copy(s),s}function ar(t){var e=new t.constructor(t.byteLength);return new Tn(e).set(new Tn(t)),e}function Af(t,e){var n=e?ar(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Lf(t){var e=new t.constructor(t.source,Ur.exec(t));return e.lastIndex=t.lastIndex,e}function Of(t){return an?M(an.call(t)):{}}function ra(t,e){var n=e?ar(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function sa(t,e){if(t!==e){var n=t!==i,s=t===null,a=t===t,u=bt(t),c=e!==i,h=e===null,g=e===e,_=bt(e);if(!h&&!_&&!u&&t>e||u&&c&&g&&!h&&!_||s&&c&&g||!n&&g||!a)return 1;if(!s&&!u&&!_&&t<e||_&&n&&a&&!s&&!u||h&&n&&a||!c&&a||!g)return-1}return 0}function Rf(t,e,n){for(var s=-1,a=t.criteria,u=e.criteria,c=a.length,h=n.length;++s<c;){var g=sa(a[s],u[s]);if(g){if(s>=h)return g;var _=n[s];return g*(_=="desc"?-1:1)}}return t.index-e.index}function aa(t,e,n,s){for(var a=-1,u=t.length,c=n.length,h=-1,g=e.length,_=Q(u-c,0),C=v(g+_),b=!s;++h<g;)C[h]=e[h];for(;++a<c;)(b||a<u)&&(C[n[a]]=t[a]);for(;_--;)C[h++]=t[a++];return C}function la(t,e,n,s){for(var a=-1,u=t.length,c=-1,h=n.length,g=-1,_=e.length,C=Q(u-h,0),b=v(C+_),x=!s;++a<C;)b[a]=t[a];for(var S=a;++g<_;)b[S+g]=e[g];for(;++c<h;)(x||a<u)&&(b[S+n[c]]=t[a++]);return b}function dt(t,e){var n=-1,s=t.length;for(e||(e=v(s));++n<s;)e[n]=t[n];return e}function Gt(t,e,n,s){var a=!n;n||(n={});for(var u=-1,c=e.length;++u<c;){var h=e[u],g=s?s(n[h],t[h],h,n,t):i;g===i&&(g=t[h]),a?te(n,h,g):ln(n,h,g)}return n}function If(t,e){return Gt(t,hr(t),e)}function Df(t,e){return Gt(t,ba(t),e)}function Zn(t,e){return function(n,s){var a=I(n)?Eo:Xu,u=e?e():{};return a(n,t,A(s,2),u)}}function Ue(t){return $(function(e,n){var s=-1,a=n.length,u=a>1?n[a-1]:i,c=a>2?n[2]:i;for(u=t.length>3&&typeof u=="function"?(a--,u):i,c&&ot(n[0],n[1],c)&&(u=a<3?i:u,a=1),e=M(e);++s<a;){var h=n[s];h&&t(e,h,s,u)}return e})}function oa(t,e){return function(n,s){if(n==null)return n;if(!ht(n))return t(n,s);for(var a=n.length,u=e?a:-1,c=M(n);(e?u--:++u<a)&&s(c[u],u,c)!==!1;);return n}}function ua(t){return function(e,n,s){for(var a=-1,u=M(e),c=s(e),h=c.length;h--;){var g=c[t?h:++a];if(n(u[g],g,u)===!1)break}return e}}function Ff(t,e,n){var s=e&at,a=dn(t);function u(){var c=this&&this!==et&&this instanceof u?a:t;return c.apply(s?n:this,arguments)}return u}function fa(t){return function(e){e=W(e);var n=Te(e)?Et(e):i,s=n?n[0]:e.charAt(0),a=n?ge(n,1).join(""):e.slice(1);return s[t]()+a}}function Me(t){return function(e){return Fi(ol(ll(e).replace(bo,"")),t,"")}}function dn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=We(t.prototype),s=t.apply(n,e);return K(s)?s:n}}function $f(t,e,n){var s=dn(t);function a(){for(var u=arguments.length,c=v(u),h=u,g=Be(a);h--;)c[h]=arguments[h];var _=u<3&&c[0]!==g&&c[u-1]!==g?[]:fe(c,g);if(u-=_.length,u<n)return ga(t,e,Jn,a.placeholder,i,c,_,i,i,n-u);var C=this&&this!==et&&this instanceof a?s:t;return mt(C,this,c)}return a}function ca(t){return function(e,n,s){var a=M(e);if(!ht(e)){var u=A(n,3);e=V(e),n=function(h){return u(a[h],h,a)}}var c=t(e,n,s);return c>-1?a[u?e[c]:c]:i}}function da(t){return ne(function(e){var n=e.length,s=n,a=Lt.prototype.thru;for(t&&e.reverse();s--;){var u=e[s];if(typeof u!="function")throw new At(T);if(a&&!c&&Vn(u)=="wrapper")var c=new Lt([],!0)}for(s=c?s:n;++s<n;){u=e[s];var h=Vn(u),g=h=="wrapper"?cr(u):i;g&&gr(g[0])&&g[1]==(jt|z|Bt|Ke)&&!g[4].length&&g[9]==1?c=c[Vn(g[0])].apply(c,g[3]):c=u.length==1&&gr(u)?c[h]():c.thru(u)}return function(){var _=arguments,C=_[0];if(c&&_.length==1&&I(C))return c.plant(C).value();for(var b=0,x=n?e[b].apply(this,_):C;++b<n;)x=e[b].call(this,x);return x}})}function Jn(t,e,n,s,a,u,c,h,g,_){var C=e&jt,b=e&at,x=e&Mt,S=e&(z|Jt),L=e&ci,F=x?i:dn(t);function O(){for(var E=arguments.length,k=v(E),yt=E;yt--;)k[yt]=arguments[yt];if(S)var ut=Be(O),xt=qo(k,ut);if(s&&(k=aa(k,s,a,S)),u&&(k=la(k,u,c,S)),E-=xt,S&&E<_){var J=fe(k,ut);return ga(t,e,Jn,O.placeholder,n,k,J,h,g,_-E)}var zt=b?n:this,ae=x?zt[t]:t;return E=k.length,h?k=Qf(k,h):L&&E>1&&k.reverse(),C&&g<E&&(k.length=g),this&&this!==et&&this instanceof O&&(ae=F||dn(ae)),ae.apply(zt,k)}return O}function ha(t,e){return function(n,s){return af(n,t,e(s),{})}}function jn(t,e){return function(n,s){var a;if(n===i&&s===i)return e;if(n!==i&&(a=n),s!==i){if(a===i)return s;typeof n=="string"||typeof s=="string"?(n=Ct(n),s=Ct(s)):(n=Qs(n),s=Qs(s)),a=t(n,s)}return a}}function lr(t){return ne(function(e){return e=G(e,_t(A())),$(function(n){var s=this;return t(e,function(a){return mt(a,s,n)})})})}function Xn(t,e){e=e===i?" ":Ct(e);var n=e.length;if(n<2)return n?tr(e,t):e;var s=tr(e,zn(t/Ee(e)));return Te(e)?ge(Et(s),0,t).join(""):s.slice(0,t)}function Tf(t,e,n,s){var a=e&at,u=dn(t);function c(){for(var h=-1,g=arguments.length,_=-1,C=s.length,b=v(C+g),x=this&&this!==et&&this instanceof c?u:t;++_<C;)b[_]=s[_];for(;g--;)b[_++]=arguments[++h];return mt(x,a?n:this,b)}return c}function pa(t){return function(e,n,s){return s&&typeof s!="number"&&ot(e,n,s)&&(n=s=i),e=se(e),n===i?(n=e,e=0):n=se(n),s=s===i?e<n?1:-1:se(s),_f(e,n,s,t)}}function Qn(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=Dt(e),n=Dt(n)),t(e,n)}}function ga(t,e,n,s,a,u,c,h,g,_){var C=e&z,b=C?c:i,x=C?i:c,S=C?u:i,L=C?i:u;e|=C?Bt:Re,e&=~(C?Re:Bt),e&j||(e&=~(at|Mt));var F=[t,e,a,S,b,L,x,h,g,_],O=n.apply(i,F);return gr(t)&&Oa(O,F),O.placeholder=s,Ra(O,t,e)}function or(t){var e=X[t];return function(n,s){if(n=Dt(n),s=s==null?0:it(D(s),292),s&&Rs(n)){var a=(W(n)+"e").split("e"),u=e(a[0]+"e"+(+a[1]+s));return a=(W(u)+"e").split("e"),+(a[0]+"e"+(+a[1]-s))}return e(n)}}var Ef=ze&&1/On(new ze([,-0]))[1]==_e?function(t){return new ze(t)}:Dr;function va(t){return function(e){var n=rt(e);return n==$t?Ni(e):n==Tt?jo(e):Bo(e,t(e))}}function ee(t,e,n,s,a,u,c,h){var g=e&Mt;if(!g&&typeof t!="function")throw new At(T);var _=s?s.length:0;if(_||(e&=~(Bt|Re),s=a=i),c=c===i?c:Q(D(c),0),h=h===i?h:D(h),_-=a?a.length:0,e&Re){var C=s,b=a;s=a=i}var x=g?i:cr(t),S=[t,e,n,s,a,C,b,u,c,h];if(x&&Jf(S,x),t=S[0],e=S[1],n=S[2],s=S[3],a=S[4],h=S[9]=S[9]===i?g?0:t.length:Q(S[9]-_,0),!h&&e&(z|Jt)&&(e&=~(z|Jt)),!e||e==at)var L=Ff(t,e,n);else e==z||e==Jt?L=$f(t,e,h):(e==Bt||e==(at|Bt))&&!a.length?L=Tf(t,e,n,s):L=Jn.apply(i,S);var F=x?js:Oa;return Ra(F(L,S),t,e)}function ma(t,e,n,s){return t===i||kt(t,ke[n])&&!U.call(s,n)?e:t}function _a(t,e,n,s,a,u){return K(t)&&K(e)&&(u.set(e,t),Gn(t,e,i,_a,u),u.delete(e)),t}function Pf(t){return gn(t)?i:t}function Ca(t,e,n,s,a,u){var c=n&Zt,h=t.length,g=e.length;if(h!=g&&!(c&&g>h))return!1;var _=u.get(t),C=u.get(e);if(_&&C)return _==e&&C==t;var b=-1,x=!0,S=n&me?new xe:i;for(u.set(t,e),u.set(e,t);++b<h;){var L=t[b],F=e[b];if(s)var O=c?s(F,L,b,e,t,u):s(L,F,b,t,e,u);if(O!==i){if(O)continue;x=!1;break}if(S){if(!$i(e,function(E,k){if(!tn(S,k)&&(L===E||a(L,E,n,s,u)))return S.push(k)})){x=!1;break}}else if(!(L===F||a(L,F,n,s,u))){x=!1;break}}return u.delete(t),u.delete(e),x}function kf(t,e,n,s,a,u,c){switch(n){case De:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ve:return!(t.byteLength!=e.byteLength||!u(new Tn(t),new Tn(e)));case Ye:case Ze:case Je:return kt(+t,+e);case Cn:return t.name==e.name&&t.message==e.message;case je:case Xe:return t==e+"";case $t:var h=Ni;case Tt:var g=s&Zt;if(h||(h=On),t.size!=e.size&&!g)return!1;var _=c.get(t);if(_)return _==e;s|=me,c.set(t,e);var C=Ca(h(t),h(e),s,a,u,c);return c.delete(t),C;case yn:if(an)return an.call(t)==an.call(e)}return!1}function zf(t,e,n,s,a,u){var c=n&Zt,h=ur(t),g=h.length,_=ur(e),C=_.length;if(g!=C&&!c)return!1;for(var b=g;b--;){var x=h[b];if(!(c?x in e:U.call(e,x)))return!1}var S=u.get(t),L=u.get(e);if(S&&L)return S==e&&L==t;var F=!0;u.set(t,e),u.set(e,t);for(var O=c;++b<g;){x=h[b];var E=t[x],k=e[x];if(s)var yt=c?s(k,E,x,e,t,u):s(E,k,x,t,e,u);if(!(yt===i?E===k||a(E,k,n,s,u):yt)){F=!1;break}O||(O=x=="constructor")}if(F&&!O){var ut=t.constructor,xt=e.constructor;ut!=xt&&"constructor"in t&&"constructor"in e&&!(typeof ut=="function"&&ut instanceof ut&&typeof xt=="function"&&xt instanceof xt)&&(F=!1)}return u.delete(t),u.delete(e),F}function ne(t){return mr(Aa(t,i,Ea),t+"")}function ur(t){return Ws(t,V,hr)}function fr(t){return Ws(t,pt,ba)}var cr=Wn?function(t){return Wn.get(t)}:Dr;function Vn(t){for(var e=t.name+"",n=Ne[e],s=U.call(Ne,e)?n.length:0;s--;){var a=n[s],u=a.func;if(u==null||u==t)return a.name}return e}function Be(t){var e=U.call(o,"placeholder")?o:t;return e.placeholder}function A(){var t=o.iteratee||Rr;return t=t===Rr?Bs:t,arguments.length?t(arguments[0],arguments[1]):t}function ti(t,e){var n=t.__data__;return Gf(e)?n[typeof e=="string"?"string":"hash"]:n.map}function dr(t){for(var e=V(t),n=e.length;n--;){var s=e[n],a=t[s];e[n]=[s,a,wa(a)]}return e}function Ae(t,e){var n=Yo(t,e);return Ms(n)?n:i}function Nf(t){var e=U.call(t,be),n=t[be];try{t[be]=i;var s=!0}catch{}var a=Fn.call(t);return s&&(e?t[be]=n:delete t[be]),a}var hr=Ui?function(t){return t==null?[]:(t=M(t),oe(Ui(t),function(e){return Ls.call(t,e)}))}:Fr,ba=Ui?function(t){for(var e=[];t;)ue(e,hr(t)),t=En(t);return e}:Fr,rt=lt;(Mi&&rt(new Mi(new ArrayBuffer(1)))!=De||nn&&rt(new nn)!=$t||Bi&&rt(Bi.resolve())!=kr||ze&&rt(new ze)!=Tt||rn&&rt(new rn)!=Qe)&&(rt=function(t){var e=lt(t),n=e==Xt?t.constructor:i,s=n?Le(n):"";if(s)switch(s){case Cu:return De;case bu:return $t;case yu:return kr;case xu:return Tt;case wu:return Qe}return e});function Wf(t,e,n){for(var s=-1,a=n.length;++s<a;){var u=n[s],c=u.size;switch(u.type){case"drop":t+=c;break;case"dropRight":e-=c;break;case"take":e=it(e,t+c);break;case"takeRight":t=Q(t,e-c);break}}return{start:t,end:e}}function Uf(t){var e=t.match(Hl);return e?e[1].split(Gl):[]}function ya(t,e,n){e=pe(e,t);for(var s=-1,a=e.length,u=!1;++s<a;){var c=Kt(e[s]);if(!(u=t!=null&&n(t,c)))break;t=t[c]}return u||++s!=a?u:(a=t==null?0:t.length,!!a&&li(a)&&ie(c,a)&&(I(t)||Oe(t)))}function Mf(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&U.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function xa(t){return typeof t.constructor=="function"&&!hn(t)?We(En(t)):{}}function Bf(t,e,n){var s=t.constructor;switch(e){case Ve:return ar(t);case Ye:case Ze:return new s(+t);case De:return Af(t,n);case di:case hi:case pi:case gi:case vi:case mi:case _i:case Ci:case bi:return ra(t,n);case $t:return new s;case Je:case Xe:return new s(t);case je:return Lf(t);case Tt:return new s;case yn:return Of(t)}}function qf(t,e){var n=e.length;if(!n)return t;var s=n-1;return e[s]=(n>1?"& ":"")+e[s],e=e.join(n>2?", ":" "),t.replace(ql,`{
/* [wrapped with `+e+`] */
`)}function Hf(t){return I(t)||Oe(t)||!!(Os&&t&&t[Os])}function ie(t,e){var n=typeof t;return e=e??le,!!e&&(n=="number"||n!="symbol"&&to.test(t))&&t>-1&&t%1==0&&t<e}function ot(t,e,n){if(!K(n))return!1;var s=typeof e;return(s=="number"?ht(n)&&ie(e,n.length):s=="string"&&e in n)?kt(n[e],t):!1}function pr(t,e){if(I(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||bt(t)?!0:Wl.test(t)||!Nl.test(t)||e!=null&&t in M(e)}function Gf(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function gr(t){var e=Vn(t),n=o[e];if(typeof n!="function"||!(e in P.prototype))return!1;if(t===n)return!0;var s=cr(n);return!!s&&t===s[0]}function Kf(t){return!!ws&&ws in t}var Yf=In?re:$r;function hn(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ke;return t===n}function wa(t){return t===t&&!K(t)}function Sa(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==i||t in M(n))}}function Zf(t){var e=si(t,function(s){return n.size===Ut&&n.clear(),s}),n=e.cache;return e}function Jf(t,e){var n=t[1],s=e[1],a=n|s,u=a<(at|Mt|jt),c=s==jt&&n==z||s==jt&&n==Ke&&t[7].length<=e[8]||s==(jt|Ke)&&e[7].length<=e[8]&&n==z;if(!(u||c))return t;s&at&&(t[2]=e[2],a|=n&at?0:j);var h=e[3];if(h){var g=t[3];t[3]=g?aa(g,h,e[4]):h,t[4]=g?fe(t[3],vt):e[4]}return h=e[5],h&&(g=t[5],t[5]=g?la(g,h,e[6]):h,t[6]=g?fe(t[5],vt):e[6]),h=e[7],h&&(t[7]=h),s&jt&&(t[8]=t[8]==null?e[8]:it(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=a,t}function jf(t){var e=[];if(t!=null)for(var n in M(t))e.push(n);return e}function Xf(t){return Fn.call(t)}function Aa(t,e,n){return e=Q(e===i?t.length-1:e,0),function(){for(var s=arguments,a=-1,u=Q(s.length-e,0),c=v(u);++a<u;)c[a]=s[e+a];a=-1;for(var h=v(e+1);++a<e;)h[a]=s[a];return h[e]=n(c),mt(t,this,h)}}function La(t,e){return e.length<2?t:Se(t,Rt(e,0,-1))}function Qf(t,e){for(var n=t.length,s=it(e.length,n),a=dt(t);s--;){var u=e[s];t[s]=ie(u,n)?a[u]:i}return t}function vr(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Oa=Ia(js),pn=du||function(t,e){return et.setTimeout(t,e)},mr=Ia(yf);function Ra(t,e,n){var s=e+"";return mr(t,qf(s,Vf(Uf(s),n)))}function Ia(t){var e=0,n=0;return function(){var s=vu(),a=_l-(s-n);if(n=s,a>0){if(++e>=ml)return arguments[0]}else e=0;return t.apply(i,arguments)}}function ei(t,e){var n=-1,s=t.length,a=s-1;for(e=e===i?s:e;++n<e;){var u=Vi(n,a),c=t[u];t[u]=t[n],t[n]=c}return t.length=e,t}var Da=Zf(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ul,function(n,s,a,u){e.push(a?u.replace(Zl,"$1"):s||n)}),e});function Kt(t){if(typeof t=="string"||bt(t))return t;var e=t+"";return e=="0"&&1/t==-_e?"-0":e}function Le(t){if(t!=null){try{return Dn.call(t)}catch{}try{return t+""}catch{}}return""}function Vf(t,e){return St(Sl,function(n){var s="_."+n[0];e&n[1]&&!An(t,s)&&t.push(s)}),t.sort()}function Fa(t){if(t instanceof P)return t.clone();var e=new Lt(t.__wrapped__,t.__chain__);return e.__actions__=dt(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function tc(t,e,n){(n?ot(t,e,n):e===i)?e=1:e=Q(D(e),0);var s=t==null?0:t.length;if(!s||e<1)return[];for(var a=0,u=0,c=v(zn(s/e));a<s;)c[u++]=Rt(t,a,a+=e);return c}function ec(t){for(var e=-1,n=t==null?0:t.length,s=0,a=[];++e<n;){var u=t[e];u&&(a[s++]=u)}return a}function nc(){var t=arguments.length;if(!t)return[];for(var e=v(t-1),n=arguments[0],s=t;s--;)e[s-1]=arguments[s];return ue(I(n)?dt(n):[n],nt(e,1))}var ic=$(function(t,e){return Z(t)?on(t,nt(e,1,Z,!0)):[]}),rc=$(function(t,e){var n=It(e);return Z(n)&&(n=i),Z(t)?on(t,nt(e,1,Z,!0),A(n,2)):[]}),sc=$(function(t,e){var n=It(e);return Z(n)&&(n=i),Z(t)?on(t,nt(e,1,Z,!0),i,n):[]});function ac(t,e,n){var s=t==null?0:t.length;return s?(e=n||e===i?1:D(e),Rt(t,e<0?0:e,s)):[]}function lc(t,e,n){var s=t==null?0:t.length;return s?(e=n||e===i?1:D(e),e=s-e,Rt(t,0,e<0?0:e)):[]}function oc(t,e){return t&&t.length?Yn(t,A(e,3),!0,!0):[]}function uc(t,e){return t&&t.length?Yn(t,A(e,3),!0):[]}function fc(t,e,n,s){var a=t==null?0:t.length;return a?(n&&typeof n!="number"&&ot(t,e,n)&&(n=0,s=a),ef(t,e,n,s)):[]}function $a(t,e,n){var s=t==null?0:t.length;if(!s)return-1;var a=n==null?0:D(n);return a<0&&(a=Q(s+a,0)),Ln(t,A(e,3),a)}function Ta(t,e,n){var s=t==null?0:t.length;if(!s)return-1;var a=s-1;return n!==i&&(a=D(n),a=n<0?Q(s+a,0):it(a,s-1)),Ln(t,A(e,3),a,!0)}function Ea(t){var e=t==null?0:t.length;return e?nt(t,1):[]}function cc(t){var e=t==null?0:t.length;return e?nt(t,_e):[]}function dc(t,e){var n=t==null?0:t.length;return n?(e=e===i?1:D(e),nt(t,e)):[]}function hc(t){for(var e=-1,n=t==null?0:t.length,s={};++e<n;){var a=t[e];s[a[0]]=a[1]}return s}function Pa(t){return t&&t.length?t[0]:i}function pc(t,e,n){var s=t==null?0:t.length;if(!s)return-1;var a=n==null?0:D(n);return a<0&&(a=Q(s+a,0)),$e(t,e,a)}function gc(t){var e=t==null?0:t.length;return e?Rt(t,0,-1):[]}var vc=$(function(t){var e=G(t,rr);return e.length&&e[0]===t[0]?Zi(e):[]}),mc=$(function(t){var e=It(t),n=G(t,rr);return e===It(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Zi(n,A(e,2)):[]}),_c=$(function(t){var e=It(t),n=G(t,rr);return e=typeof e=="function"?e:i,e&&n.pop(),n.length&&n[0]===t[0]?Zi(n,i,e):[]});function Cc(t,e){return t==null?"":pu.call(t,e)}function It(t){var e=t==null?0:t.length;return e?t[e-1]:i}function bc(t,e,n){var s=t==null?0:t.length;if(!s)return-1;var a=s;return n!==i&&(a=D(n),a=a<0?Q(s+a,0):it(a,s-1)),e===e?Qo(t,e,a):Ln(t,gs,a,!0)}function yc(t,e){return t&&t.length?Ks(t,D(e)):i}var xc=$(ka);function ka(t,e){return t&&t.length&&e&&e.length?Qi(t,e):t}function wc(t,e,n){return t&&t.length&&e&&e.length?Qi(t,e,A(n,2)):t}function Sc(t,e,n){return t&&t.length&&e&&e.length?Qi(t,e,i,n):t}var Ac=ne(function(t,e){var n=t==null?0:t.length,s=Hi(t,e);return Js(t,G(e,function(a){return ie(a,n)?+a:a}).sort(sa)),s});function Lc(t,e){var n=[];if(!(t&&t.length))return n;var s=-1,a=[],u=t.length;for(e=A(e,3);++s<u;){var c=t[s];e(c,s,t)&&(n.push(c),a.push(s))}return Js(t,a),n}function _r(t){return t==null?t:_u.call(t)}function Oc(t,e,n){var s=t==null?0:t.length;return s?(n&&typeof n!="number"&&ot(t,e,n)?(e=0,n=s):(e=e==null?0:D(e),n=n===i?s:D(n)),Rt(t,e,n)):[]}function Rc(t,e){return Kn(t,e)}function Ic(t,e,n){return er(t,e,A(n,2))}function Dc(t,e){var n=t==null?0:t.length;if(n){var s=Kn(t,e);if(s<n&&kt(t[s],e))return s}return-1}function Fc(t,e){return Kn(t,e,!0)}function $c(t,e,n){return er(t,e,A(n,2),!0)}function Tc(t,e){var n=t==null?0:t.length;if(n){var s=Kn(t,e,!0)-1;if(kt(t[s],e))return s}return-1}function Ec(t){return t&&t.length?Xs(t):[]}function Pc(t,e){return t&&t.length?Xs(t,A(e,2)):[]}function kc(t){var e=t==null?0:t.length;return e?Rt(t,1,e):[]}function zc(t,e,n){return t&&t.length?(e=n||e===i?1:D(e),Rt(t,0,e<0?0:e)):[]}function Nc(t,e,n){var s=t==null?0:t.length;return s?(e=n||e===i?1:D(e),e=s-e,Rt(t,e<0?0:e,s)):[]}function Wc(t,e){return t&&t.length?Yn(t,A(e,3),!1,!0):[]}function Uc(t,e){return t&&t.length?Yn(t,A(e,3)):[]}var Mc=$(function(t){return he(nt(t,1,Z,!0))}),Bc=$(function(t){var e=It(t);return Z(e)&&(e=i),he(nt(t,1,Z,!0),A(e,2))}),qc=$(function(t){var e=It(t);return e=typeof e=="function"?e:i,he(nt(t,1,Z,!0),i,e)});function Hc(t){return t&&t.length?he(t):[]}function Gc(t,e){return t&&t.length?he(t,A(e,2)):[]}function Kc(t,e){return e=typeof e=="function"?e:i,t&&t.length?he(t,i,e):[]}function Cr(t){if(!(t&&t.length))return[];var e=0;return t=oe(t,function(n){if(Z(n))return e=Q(n.length,e),!0}),ki(e,function(n){return G(t,Ti(n))})}function za(t,e){if(!(t&&t.length))return[];var n=Cr(t);return e==null?n:G(n,function(s){return mt(e,i,s)})}var Yc=$(function(t,e){return Z(t)?on(t,e):[]}),Zc=$(function(t){return ir(oe(t,Z))}),Jc=$(function(t){var e=It(t);return Z(e)&&(e=i),ir(oe(t,Z),A(e,2))}),jc=$(function(t){var e=It(t);return e=typeof e=="function"?e:i,ir(oe(t,Z),i,e)}),Xc=$(Cr);function Qc(t,e){return ea(t||[],e||[],ln)}function Vc(t,e){return ea(t||[],e||[],cn)}var td=$(function(t){var e=t.length,n=e>1?t[e-1]:i;return n=typeof n=="function"?(t.pop(),n):i,za(t,n)});function Na(t){var e=o(t);return e.__chain__=!0,e}function ed(t,e){return e(t),t}function ni(t,e){return e(t)}var nd=ne(function(t){var e=t.length,n=e?t[0]:0,s=this.__wrapped__,a=function(u){return Hi(u,t)};return e>1||this.__actions__.length||!(s instanceof P)||!ie(n)?this.thru(a):(s=s.slice(n,+n+(e?1:0)),s.__actions__.push({func:ni,args:[a],thisArg:i}),new Lt(s,this.__chain__).thru(function(u){return e&&!u.length&&u.push(i),u}))});function id(){return Na(this)}function rd(){return new Lt(this.value(),this.__chain__)}function sd(){this.__values__===i&&(this.__values__=Qa(this.value()));var t=this.__index__>=this.__values__.length,e=t?i:this.__values__[this.__index__++];return{done:t,value:e}}function ad(){return this}function ld(t){for(var e,n=this;n instanceof Mn;){var s=Fa(n);s.__index__=0,s.__values__=i,e?a.__wrapped__=s:e=s;var a=s;n=n.__wrapped__}return a.__wrapped__=t,e}function od(){var t=this.__wrapped__;if(t instanceof P){var e=t;return this.__actions__.length&&(e=new P(this)),e=e.reverse(),e.__actions__.push({func:ni,args:[_r],thisArg:i}),new Lt(e,this.__chain__)}return this.thru(_r)}function ud(){return ta(this.__wrapped__,this.__actions__)}var fd=Zn(function(t,e,n){U.call(t,n)?++t[n]:te(t,n,1)});function cd(t,e,n){var s=I(t)?hs:tf;return n&&ot(t,e,n)&&(e=i),s(t,A(e,3))}function dd(t,e){var n=I(t)?oe:zs;return n(t,A(e,3))}var hd=ca($a),pd=ca(Ta);function gd(t,e){return nt(ii(t,e),1)}function vd(t,e){return nt(ii(t,e),_e)}function md(t,e,n){return n=n===i?1:D(n),nt(ii(t,e),n)}function Wa(t,e){var n=I(t)?St:de;return n(t,A(e,3))}function Ua(t,e){var n=I(t)?Po:ks;return n(t,A(e,3))}var _d=Zn(function(t,e,n){U.call(t,n)?t[n].push(e):te(t,n,[e])});function Cd(t,e,n,s){t=ht(t)?t:He(t),n=n&&!s?D(n):0;var a=t.length;return n<0&&(n=Q(a+n,0)),oi(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&$e(t,e,n)>-1}var bd=$(function(t,e,n){var s=-1,a=typeof e=="function",u=ht(t)?v(t.length):[];return de(t,function(c){u[++s]=a?mt(e,c,n):un(c,e,n)}),u}),yd=Zn(function(t,e,n){te(t,n,e)});function ii(t,e){var n=I(t)?G:qs;return n(t,A(e,3))}function xd(t,e,n,s){return t==null?[]:(I(e)||(e=e==null?[]:[e]),n=s?i:n,I(n)||(n=n==null?[]:[n]),Ys(t,e,n))}var wd=Zn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function Sd(t,e,n){var s=I(t)?Fi:ms,a=arguments.length<3;return s(t,A(e,4),n,a,de)}function Ad(t,e,n){var s=I(t)?ko:ms,a=arguments.length<3;return s(t,A(e,4),n,a,ks)}function Ld(t,e){var n=I(t)?oe:zs;return n(t,ai(A(e,3)))}function Od(t){var e=I(t)?$s:Cf;return e(t)}function Rd(t,e,n){(n?ot(t,e,n):e===i)?e=1:e=D(e);var s=I(t)?Ju:bf;return s(t,e)}function Id(t){var e=I(t)?ju:xf;return e(t)}function Dd(t){if(t==null)return 0;if(ht(t))return oi(t)?Ee(t):t.length;var e=rt(t);return e==$t||e==Tt?t.size:ji(t).length}function Fd(t,e,n){var s=I(t)?$i:wf;return n&&ot(t,e,n)&&(e=i),s(t,A(e,3))}var $d=$(function(t,e){if(t==null)return[];var n=e.length;return n>1&&ot(t,e[0],e[1])?e=[]:n>2&&ot(e[0],e[1],e[2])&&(e=[e[0]]),Ys(t,nt(e,1),[])}),ri=cu||function(){return et.Date.now()};function Td(t,e){if(typeof e!="function")throw new At(T);return t=D(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ma(t,e,n){return e=n?i:e,e=t&&e==null?t.length:e,ee(t,jt,i,i,i,i,e)}function Ba(t,e){var n;if(typeof e!="function")throw new At(T);return t=D(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var br=$(function(t,e,n){var s=at;if(n.length){var a=fe(n,Be(br));s|=Bt}return ee(t,s,e,n,a)}),qa=$(function(t,e,n){var s=at|Mt;if(n.length){var a=fe(n,Be(qa));s|=Bt}return ee(e,s,t,n,a)});function Ha(t,e,n){e=n?i:e;var s=ee(t,z,i,i,i,i,i,e);return s.placeholder=Ha.placeholder,s}function Ga(t,e,n){e=n?i:e;var s=ee(t,Jt,i,i,i,i,i,e);return s.placeholder=Ga.placeholder,s}function Ka(t,e,n){var s,a,u,c,h,g,_=0,C=!1,b=!1,x=!0;if(typeof t!="function")throw new At(T);e=Dt(e)||0,K(n)&&(C=!!n.leading,b="maxWait"in n,u=b?Q(Dt(n.maxWait)||0,e):u,x="trailing"in n?!!n.trailing:x);function S(J){var zt=s,ae=a;return s=a=i,_=J,c=t.apply(ae,zt),c}function L(J){return _=J,h=pn(E,e),C?S(J):c}function F(J){var zt=J-g,ae=J-_,cl=e-zt;return b?it(cl,u-ae):cl}function O(J){var zt=J-g,ae=J-_;return g===i||zt>=e||zt<0||b&&ae>=u}function E(){var J=ri();if(O(J))return k(J);h=pn(E,F(J))}function k(J){return h=i,x&&s?S(J):(s=a=i,c)}function yt(){h!==i&&na(h),_=0,s=g=a=h=i}function ut(){return h===i?c:k(ri())}function xt(){var J=ri(),zt=O(J);if(s=arguments,a=this,g=J,zt){if(h===i)return L(g);if(b)return na(h),h=pn(E,e),S(g)}return h===i&&(h=pn(E,e)),c}return xt.cancel=yt,xt.flush=ut,xt}var Ed=$(function(t,e){return Ps(t,1,e)}),Pd=$(function(t,e,n){return Ps(t,Dt(e)||0,n)});function kd(t){return ee(t,ci)}function si(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new At(T);var n=function(){var s=arguments,a=e?e.apply(this,s):s[0],u=n.cache;if(u.has(a))return u.get(a);var c=t.apply(this,s);return n.cache=u.set(a,c)||u,c};return n.cache=new(si.Cache||Vt),n}si.Cache=Vt;function ai(t){if(typeof t!="function")throw new At(T);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function zd(t){return Ba(2,t)}var Nd=Sf(function(t,e){e=e.length==1&&I(e[0])?G(e[0],_t(A())):G(nt(e,1),_t(A()));var n=e.length;return $(function(s){for(var a=-1,u=it(s.length,n);++a<u;)s[a]=e[a].call(this,s[a]);return mt(t,this,s)})}),yr=$(function(t,e){var n=fe(e,Be(yr));return ee(t,Bt,i,e,n)}),Ya=$(function(t,e){var n=fe(e,Be(Ya));return ee(t,Re,i,e,n)}),Wd=ne(function(t,e){return ee(t,Ke,i,i,i,e)});function Ud(t,e){if(typeof t!="function")throw new At(T);return e=e===i?e:D(e),$(t,e)}function Md(t,e){if(typeof t!="function")throw new At(T);return e=e==null?0:Q(D(e),0),$(function(n){var s=n[e],a=ge(n,0,e);return s&&ue(a,s),mt(t,this,a)})}function Bd(t,e,n){var s=!0,a=!0;if(typeof t!="function")throw new At(T);return K(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),Ka(t,e,{leading:s,maxWait:e,trailing:a})}function qd(t){return Ma(t,1)}function Hd(t,e){return yr(sr(e),t)}function Gd(){if(!arguments.length)return[];var t=arguments[0];return I(t)?t:[t]}function Kd(t){return Ot(t,st)}function Yd(t,e){return e=typeof e=="function"?e:i,Ot(t,st,e)}function Zd(t){return Ot(t,tt|st)}function Jd(t,e){return e=typeof e=="function"?e:i,Ot(t,tt|st,e)}function jd(t,e){return e==null||Es(t,e,V(e))}function kt(t,e){return t===e||t!==t&&e!==e}var Xd=Qn(Yi),Qd=Qn(function(t,e){return t>=e}),Oe=Us(function(){return arguments}())?Us:function(t){return Y(t)&&U.call(t,"callee")&&!Ls.call(t,"callee")},I=v.isArray,Vd=ls?_t(ls):lf;function ht(t){return t!=null&&li(t.length)&&!re(t)}function Z(t){return Y(t)&&ht(t)}function th(t){return t===!0||t===!1||Y(t)&&lt(t)==Ye}var ve=hu||$r,eh=os?_t(os):of;function nh(t){return Y(t)&&t.nodeType===1&&!gn(t)}function ih(t){if(t==null)return!0;if(ht(t)&&(I(t)||typeof t=="string"||typeof t.splice=="function"||ve(t)||qe(t)||Oe(t)))return!t.length;var e=rt(t);if(e==$t||e==Tt)return!t.size;if(hn(t))return!ji(t).length;for(var n in t)if(U.call(t,n))return!1;return!0}function rh(t,e){return fn(t,e)}function sh(t,e,n){n=typeof n=="function"?n:i;var s=n?n(t,e):i;return s===i?fn(t,e,i,n):!!s}function xr(t){if(!Y(t))return!1;var e=lt(t);return e==Cn||e==Ll||typeof t.message=="string"&&typeof t.name=="string"&&!gn(t)}function ah(t){return typeof t=="number"&&Rs(t)}function re(t){if(!K(t))return!1;var e=lt(t);return e==bn||e==Pr||e==Al||e==Rl}function Za(t){return typeof t=="number"&&t==D(t)}function li(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=le}function K(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Y(t){return t!=null&&typeof t=="object"}var Ja=us?_t(us):ff;function lh(t,e){return t===e||Ji(t,e,dr(e))}function oh(t,e,n){return n=typeof n=="function"?n:i,Ji(t,e,dr(e),n)}function uh(t){return ja(t)&&t!=+t}function fh(t){if(Yf(t))throw new R(y);return Ms(t)}function ch(t){return t===null}function dh(t){return t==null}function ja(t){return typeof t=="number"||Y(t)&&lt(t)==Je}function gn(t){if(!Y(t)||lt(t)!=Xt)return!1;var e=En(t);if(e===null)return!0;var n=U.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dn.call(n)==lu}var wr=fs?_t(fs):cf;function hh(t){return Za(t)&&t>=-le&&t<=le}var Xa=cs?_t(cs):df;function oi(t){return typeof t=="string"||!I(t)&&Y(t)&&lt(t)==Xe}function bt(t){return typeof t=="symbol"||Y(t)&&lt(t)==yn}var qe=ds?_t(ds):hf;function ph(t){return t===i}function gh(t){return Y(t)&&rt(t)==Qe}function vh(t){return Y(t)&&lt(t)==Dl}var mh=Qn(Xi),_h=Qn(function(t,e){return t<=e});function Qa(t){if(!t)return[];if(ht(t))return oi(t)?Et(t):dt(t);if(en&&t[en])return Jo(t[en]());var e=rt(t),n=e==$t?Ni:e==Tt?On:He;return n(t)}function se(t){if(!t)return t===0?t:0;if(t=Dt(t),t===_e||t===-_e){var e=t<0?-1:1;return e*yl}return t===t?t:0}function D(t){var e=se(t),n=e%1;return e===e?n?e-n:e:0}function Va(t){return t?we(D(t),0,qt):0}function Dt(t){if(typeof t=="number")return t;if(bt(t))return mn;if(K(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=K(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=_s(t);var n=Xl.test(t);return n||Vl.test(t)?$o(t.slice(2),n?2:8):jl.test(t)?mn:+t}function tl(t){return Gt(t,pt(t))}function Ch(t){return t?we(D(t),-le,le):t===0?t:0}function W(t){return t==null?"":Ct(t)}var bh=Ue(function(t,e){if(hn(e)||ht(e)){Gt(e,V(e),t);return}for(var n in e)U.call(e,n)&&ln(t,n,e[n])}),el=Ue(function(t,e){Gt(e,pt(e),t)}),ui=Ue(function(t,e,n,s){Gt(e,pt(e),t,s)}),yh=Ue(function(t,e,n,s){Gt(e,V(e),t,s)}),xh=ne(Hi);function wh(t,e){var n=We(t);return e==null?n:Ts(n,e)}var Sh=$(function(t,e){t=M(t);var n=-1,s=e.length,a=s>2?e[2]:i;for(a&&ot(e[0],e[1],a)&&(s=1);++n<s;)for(var u=e[n],c=pt(u),h=-1,g=c.length;++h<g;){var _=c[h],C=t[_];(C===i||kt(C,ke[_])&&!U.call(t,_))&&(t[_]=u[_])}return t}),Ah=$(function(t){return t.push(i,_a),mt(nl,i,t)});function Lh(t,e){return ps(t,A(e,3),Ht)}function Oh(t,e){return ps(t,A(e,3),Ki)}function Rh(t,e){return t==null?t:Gi(t,A(e,3),pt)}function Ih(t,e){return t==null?t:Ns(t,A(e,3),pt)}function Dh(t,e){return t&&Ht(t,A(e,3))}function Fh(t,e){return t&&Ki(t,A(e,3))}function $h(t){return t==null?[]:Hn(t,V(t))}function Th(t){return t==null?[]:Hn(t,pt(t))}function Sr(t,e,n){var s=t==null?i:Se(t,e);return s===i?n:s}function Eh(t,e){return t!=null&&ya(t,e,nf)}function Ar(t,e){return t!=null&&ya(t,e,rf)}var Ph=ha(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=Fn.call(e)),t[e]=n},Or(gt)),kh=ha(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=Fn.call(e)),U.call(t,e)?t[e].push(n):t[e]=[n]},A),zh=$(un);function V(t){return ht(t)?Fs(t):ji(t)}function pt(t){return ht(t)?Fs(t,!0):pf(t)}function Nh(t,e){var n={};return e=A(e,3),Ht(t,function(s,a,u){te(n,e(s,a,u),s)}),n}function Wh(t,e){var n={};return e=A(e,3),Ht(t,function(s,a,u){te(n,a,e(s,a,u))}),n}var Uh=Ue(function(t,e,n){Gn(t,e,n)}),nl=Ue(function(t,e,n,s){Gn(t,e,n,s)}),Mh=ne(function(t,e){var n={};if(t==null)return n;var s=!1;e=G(e,function(u){return u=pe(u,t),s||(s=u.length>1),u}),Gt(t,fr(t),n),s&&(n=Ot(n,tt|Ft|st,Pf));for(var a=e.length;a--;)nr(n,e[a]);return n});function Bh(t,e){return il(t,ai(A(e)))}var qh=ne(function(t,e){return t==null?{}:vf(t,e)});function il(t,e){if(t==null)return{};var n=G(fr(t),function(s){return[s]});return e=A(e),Zs(t,n,function(s,a){return e(s,a[0])})}function Hh(t,e,n){e=pe(e,t);var s=-1,a=e.length;for(a||(a=1,t=i);++s<a;){var u=t==null?i:t[Kt(e[s])];u===i&&(s=a,u=n),t=re(u)?u.call(t):u}return t}function Gh(t,e,n){return t==null?t:cn(t,e,n)}function Kh(t,e,n,s){return s=typeof s=="function"?s:i,t==null?t:cn(t,e,n,s)}var rl=va(V),sl=va(pt);function Yh(t,e,n){var s=I(t),a=s||ve(t)||qe(t);if(e=A(e,4),n==null){var u=t&&t.constructor;a?n=s?new u:[]:K(t)?n=re(u)?We(En(t)):{}:n={}}return(a?St:Ht)(t,function(c,h,g){return e(n,c,h,g)}),n}function Zh(t,e){return t==null?!0:nr(t,e)}function Jh(t,e,n){return t==null?t:Vs(t,e,sr(n))}function jh(t,e,n,s){return s=typeof s=="function"?s:i,t==null?t:Vs(t,e,sr(n),s)}function He(t){return t==null?[]:zi(t,V(t))}function Xh(t){return t==null?[]:zi(t,pt(t))}function Qh(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=Dt(n),n=n===n?n:0),e!==i&&(e=Dt(e),e=e===e?e:0),we(Dt(t),e,n)}function Vh(t,e,n){return e=se(e),n===i?(n=e,e=0):n=se(n),t=Dt(t),sf(t,e,n)}function tp(t,e,n){if(n&&typeof n!="boolean"&&ot(t,e,n)&&(e=n=i),n===i&&(typeof e=="boolean"?(n=e,e=i):typeof t=="boolean"&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=se(t),e===i?(e=t,t=0):e=se(e)),t>e){var s=t;t=e,e=s}if(n||t%1||e%1){var a=Is();return it(t+a*(e-t+Fo("1e-"+((a+"").length-1))),e)}return Vi(t,e)}var ep=Me(function(t,e,n){return e=e.toLowerCase(),t+(n?al(e):e)});function al(t){return Lr(W(t).toLowerCase())}function ll(t){return t=W(t),t&&t.replace(eo,Ho).replace(yo,"")}function np(t,e,n){t=W(t),e=Ct(e);var s=t.length;n=n===i?s:we(D(n),0,s);var a=n;return n-=e.length,n>=0&&t.slice(n,a)==e}function ip(t){return t=W(t),t&&Pl.test(t)?t.replace(Nr,Go):t}function rp(t){return t=W(t),t&&Ml.test(t)?t.replace(yi,"\\$&"):t}var sp=Me(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ap=Me(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),lp=fa("toLowerCase");function op(t,e,n){t=W(t),e=D(e);var s=e?Ee(t):0;if(!e||s>=e)return t;var a=(e-s)/2;return Xn(Nn(a),n)+t+Xn(zn(a),n)}function up(t,e,n){t=W(t),e=D(e);var s=e?Ee(t):0;return e&&s<e?t+Xn(e-s,n):t}function fp(t,e,n){t=W(t),e=D(e);var s=e?Ee(t):0;return e&&s<e?Xn(e-s,n)+t:t}function cp(t,e,n){return n||e==null?e=0:e&&(e=+e),mu(W(t).replace(xi,""),e||0)}function dp(t,e,n){return(n?ot(t,e,n):e===i)?e=1:e=D(e),tr(W(t),e)}function hp(){var t=arguments,e=W(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var pp=Me(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function gp(t,e,n){return n&&typeof n!="number"&&ot(t,e,n)&&(e=n=i),n=n===i?qt:n>>>0,n?(t=W(t),t&&(typeof e=="string"||e!=null&&!wr(e))&&(e=Ct(e),!e&&Te(t))?ge(Et(t),0,n):t.split(e,n)):[]}var vp=Me(function(t,e,n){return t+(n?" ":"")+Lr(e)});function mp(t,e,n){return t=W(t),n=n==null?0:we(D(n),0,t.length),e=Ct(e),t.slice(n,n+e.length)==e}function _p(t,e,n){var s=o.templateSettings;n&&ot(t,e,n)&&(e=i),t=W(t),e=ui({},e,s,ma);var a=ui({},e.imports,s.imports,ma),u=V(a),c=zi(a,u),h,g,_=0,C=e.interpolate||xn,b="__p += '",x=Wi((e.escape||xn).source+"|"+C.source+"|"+(C===Wr?Jl:xn).source+"|"+(e.evaluate||xn).source+"|$","g"),S="//# sourceURL="+(U.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lo+"]")+`
`;t.replace(x,function(O,E,k,yt,ut,xt){return k||(k=yt),b+=t.slice(_,xt).replace(no,Ko),E&&(h=!0,b+=`' +
__e(`+E+`) +
'`),ut&&(g=!0,b+=`';
`+ut+`;
__p += '`),k&&(b+=`' +
((__t = (`+k+`)) == null ? '' : __t) +
'`),_=xt+O.length,O}),b+=`';
`;var L=U.call(e,"variable")&&e.variable;if(!L)b=`with (obj) {
`+b+`
}
`;else if(Yl.test(L))throw new R(ft);b=(g?b.replace(Fl,""):b).replace($l,"$1").replace(Tl,"$1;"),b="function("+(L||"obj")+`) {
`+(L?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(g?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var F=ul(function(){return N(u,S+"return "+b).apply(i,c)});if(F.source=b,xr(F))throw F;return F}function Cp(t){return W(t).toLowerCase()}function bp(t){return W(t).toUpperCase()}function yp(t,e,n){if(t=W(t),t&&(n||e===i))return _s(t);if(!t||!(e=Ct(e)))return t;var s=Et(t),a=Et(e),u=Cs(s,a),c=bs(s,a)+1;return ge(s,u,c).join("")}function xp(t,e,n){if(t=W(t),t&&(n||e===i))return t.slice(0,xs(t)+1);if(!t||!(e=Ct(e)))return t;var s=Et(t),a=bs(s,Et(e))+1;return ge(s,0,a).join("")}function wp(t,e,n){if(t=W(t),t&&(n||e===i))return t.replace(xi,"");if(!t||!(e=Ct(e)))return t;var s=Et(t),a=Cs(s,Et(e));return ge(s,a).join("")}function Sp(t,e){var n=gl,s=vl;if(K(e)){var a="separator"in e?e.separator:a;n="length"in e?D(e.length):n,s="omission"in e?Ct(e.omission):s}t=W(t);var u=t.length;if(Te(t)){var c=Et(t);u=c.length}if(n>=u)return t;var h=n-Ee(s);if(h<1)return s;var g=c?ge(c,0,h).join(""):t.slice(0,h);if(a===i)return g+s;if(c&&(h+=g.length-h),wr(a)){if(t.slice(h).search(a)){var _,C=g;for(a.global||(a=Wi(a.source,W(Ur.exec(a))+"g")),a.lastIndex=0;_=a.exec(C);)var b=_.index;g=g.slice(0,b===i?h:b)}}else if(t.indexOf(Ct(a),h)!=h){var x=g.lastIndexOf(a);x>-1&&(g=g.slice(0,x))}return g+s}function Ap(t){return t=W(t),t&&El.test(t)?t.replace(zr,Vo):t}var Lp=Me(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Lr=fa("toUpperCase");function ol(t,e,n){return t=W(t),e=n?i:e,e===i?Zo(t)?nu(t):Wo(t):t.match(e)||[]}var ul=$(function(t,e){try{return mt(t,i,e)}catch(n){return xr(n)?n:new R(n)}}),Op=ne(function(t,e){return St(e,function(n){n=Kt(n),te(t,n,br(t[n],t))}),t});function Rp(t){var e=t==null?0:t.length,n=A();return t=e?G(t,function(s){if(typeof s[1]!="function")throw new At(T);return[n(s[0]),s[1]]}):[],$(function(s){for(var a=-1;++a<e;){var u=t[a];if(mt(u[0],this,s))return mt(u[1],this,s)}})}function Ip(t){return Vu(Ot(t,tt))}function Or(t){return function(){return t}}function Dp(t,e){return t==null||t!==t?e:t}var Fp=da(),$p=da(!0);function gt(t){return t}function Rr(t){return Bs(typeof t=="function"?t:Ot(t,tt))}function Tp(t){return Hs(Ot(t,tt))}function Ep(t,e){return Gs(t,Ot(e,tt))}var Pp=$(function(t,e){return function(n){return un(n,t,e)}}),kp=$(function(t,e){return function(n){return un(t,n,e)}});function Ir(t,e,n){var s=V(e),a=Hn(e,s);n==null&&!(K(e)&&(a.length||!s.length))&&(n=e,e=t,t=this,a=Hn(e,V(e)));var u=!(K(n)&&"chain"in n)||!!n.chain,c=re(t);return St(a,function(h){var g=e[h];t[h]=g,c&&(t.prototype[h]=function(){var _=this.__chain__;if(u||_){var C=t(this.__wrapped__),b=C.__actions__=dt(this.__actions__);return b.push({func:g,args:arguments,thisArg:t}),C.__chain__=_,C}return g.apply(t,ue([this.value()],arguments))})}),t}function zp(){return et._===this&&(et._=ou),this}function Dr(){}function Np(t){return t=D(t),$(function(e){return Ks(e,t)})}var Wp=lr(G),Up=lr(hs),Mp=lr($i);function fl(t){return pr(t)?Ti(Kt(t)):mf(t)}function Bp(t){return function(e){return t==null?i:Se(t,e)}}var qp=pa(),Hp=pa(!0);function Fr(){return[]}function $r(){return!1}function Gp(){return{}}function Kp(){return""}function Yp(){return!0}function Zp(t,e){if(t=D(t),t<1||t>le)return[];var n=qt,s=it(t,qt);e=A(e),t-=qt;for(var a=ki(s,e);++n<t;)e(n);return a}function Jp(t){return I(t)?G(t,Kt):bt(t)?[t]:dt(Da(W(t)))}function jp(t){var e=++au;return W(t)+e}var Xp=jn(function(t,e){return t+e},0),Qp=or("ceil"),Vp=jn(function(t,e){return t/e},1),tg=or("floor");function eg(t){return t&&t.length?qn(t,gt,Yi):i}function ng(t,e){return t&&t.length?qn(t,A(e,2),Yi):i}function ig(t){return vs(t,gt)}function rg(t,e){return vs(t,A(e,2))}function sg(t){return t&&t.length?qn(t,gt,Xi):i}function ag(t,e){return t&&t.length?qn(t,A(e,2),Xi):i}var lg=jn(function(t,e){return t*e},1),og=or("round"),ug=jn(function(t,e){return t-e},0);function fg(t){return t&&t.length?Pi(t,gt):0}function cg(t,e){return t&&t.length?Pi(t,A(e,2)):0}return o.after=Td,o.ary=Ma,o.assign=bh,o.assignIn=el,o.assignInWith=ui,o.assignWith=yh,o.at=xh,o.before=Ba,o.bind=br,o.bindAll=Op,o.bindKey=qa,o.castArray=Gd,o.chain=Na,o.chunk=tc,o.compact=ec,o.concat=nc,o.cond=Rp,o.conforms=Ip,o.constant=Or,o.countBy=fd,o.create=wh,o.curry=Ha,o.curryRight=Ga,o.debounce=Ka,o.defaults=Sh,o.defaultsDeep=Ah,o.defer=Ed,o.delay=Pd,o.difference=ic,o.differenceBy=rc,o.differenceWith=sc,o.drop=ac,o.dropRight=lc,o.dropRightWhile=oc,o.dropWhile=uc,o.fill=fc,o.filter=dd,o.flatMap=gd,o.flatMapDeep=vd,o.flatMapDepth=md,o.flatten=Ea,o.flattenDeep=cc,o.flattenDepth=dc,o.flip=kd,o.flow=Fp,o.flowRight=$p,o.fromPairs=hc,o.functions=$h,o.functionsIn=Th,o.groupBy=_d,o.initial=gc,o.intersection=vc,o.intersectionBy=mc,o.intersectionWith=_c,o.invert=Ph,o.invertBy=kh,o.invokeMap=bd,o.iteratee=Rr,o.keyBy=yd,o.keys=V,o.keysIn=pt,o.map=ii,o.mapKeys=Nh,o.mapValues=Wh,o.matches=Tp,o.matchesProperty=Ep,o.memoize=si,o.merge=Uh,o.mergeWith=nl,o.method=Pp,o.methodOf=kp,o.mixin=Ir,o.negate=ai,o.nthArg=Np,o.omit=Mh,o.omitBy=Bh,o.once=zd,o.orderBy=xd,o.over=Wp,o.overArgs=Nd,o.overEvery=Up,o.overSome=Mp,o.partial=yr,o.partialRight=Ya,o.partition=wd,o.pick=qh,o.pickBy=il,o.property=fl,o.propertyOf=Bp,o.pull=xc,o.pullAll=ka,o.pullAllBy=wc,o.pullAllWith=Sc,o.pullAt=Ac,o.range=qp,o.rangeRight=Hp,o.rearg=Wd,o.reject=Ld,o.remove=Lc,o.rest=Ud,o.reverse=_r,o.sampleSize=Rd,o.set=Gh,o.setWith=Kh,o.shuffle=Id,o.slice=Oc,o.sortBy=$d,o.sortedUniq=Ec,o.sortedUniqBy=Pc,o.split=gp,o.spread=Md,o.tail=kc,o.take=zc,o.takeRight=Nc,o.takeRightWhile=Wc,o.takeWhile=Uc,o.tap=ed,o.throttle=Bd,o.thru=ni,o.toArray=Qa,o.toPairs=rl,o.toPairsIn=sl,o.toPath=Jp,o.toPlainObject=tl,o.transform=Yh,o.unary=qd,o.union=Mc,o.unionBy=Bc,o.unionWith=qc,o.uniq=Hc,o.uniqBy=Gc,o.uniqWith=Kc,o.unset=Zh,o.unzip=Cr,o.unzipWith=za,o.update=Jh,o.updateWith=jh,o.values=He,o.valuesIn=Xh,o.without=Yc,o.words=ol,o.wrap=Hd,o.xor=Zc,o.xorBy=Jc,o.xorWith=jc,o.zip=Xc,o.zipObject=Qc,o.zipObjectDeep=Vc,o.zipWith=td,o.entries=rl,o.entriesIn=sl,o.extend=el,o.extendWith=ui,Ir(o,o),o.add=Xp,o.attempt=ul,o.camelCase=ep,o.capitalize=al,o.ceil=Qp,o.clamp=Qh,o.clone=Kd,o.cloneDeep=Zd,o.cloneDeepWith=Jd,o.cloneWith=Yd,o.conformsTo=jd,o.deburr=ll,o.defaultTo=Dp,o.divide=Vp,o.endsWith=np,o.eq=kt,o.escape=ip,o.escapeRegExp=rp,o.every=cd,o.find=hd,o.findIndex=$a,o.findKey=Lh,o.findLast=pd,o.findLastIndex=Ta,o.findLastKey=Oh,o.floor=tg,o.forEach=Wa,o.forEachRight=Ua,o.forIn=Rh,o.forInRight=Ih,o.forOwn=Dh,o.forOwnRight=Fh,o.get=Sr,o.gt=Xd,o.gte=Qd,o.has=Eh,o.hasIn=Ar,o.head=Pa,o.identity=gt,o.includes=Cd,o.indexOf=pc,o.inRange=Vh,o.invoke=zh,o.isArguments=Oe,o.isArray=I,o.isArrayBuffer=Vd,o.isArrayLike=ht,o.isArrayLikeObject=Z,o.isBoolean=th,o.isBuffer=ve,o.isDate=eh,o.isElement=nh,o.isEmpty=ih,o.isEqual=rh,o.isEqualWith=sh,o.isError=xr,o.isFinite=ah,o.isFunction=re,o.isInteger=Za,o.isLength=li,o.isMap=Ja,o.isMatch=lh,o.isMatchWith=oh,o.isNaN=uh,o.isNative=fh,o.isNil=dh,o.isNull=ch,o.isNumber=ja,o.isObject=K,o.isObjectLike=Y,o.isPlainObject=gn,o.isRegExp=wr,o.isSafeInteger=hh,o.isSet=Xa,o.isString=oi,o.isSymbol=bt,o.isTypedArray=qe,o.isUndefined=ph,o.isWeakMap=gh,o.isWeakSet=vh,o.join=Cc,o.kebabCase=sp,o.last=It,o.lastIndexOf=bc,o.lowerCase=ap,o.lowerFirst=lp,o.lt=mh,o.lte=_h,o.max=eg,o.maxBy=ng,o.mean=ig,o.meanBy=rg,o.min=sg,o.minBy=ag,o.stubArray=Fr,o.stubFalse=$r,o.stubObject=Gp,o.stubString=Kp,o.stubTrue=Yp,o.multiply=lg,o.nth=yc,o.noConflict=zp,o.noop=Dr,o.now=ri,o.pad=op,o.padEnd=up,o.padStart=fp,o.parseInt=cp,o.random=tp,o.reduce=Sd,o.reduceRight=Ad,o.repeat=dp,o.replace=hp,o.result=Hh,o.round=og,o.runInContext=p,o.sample=Od,o.size=Dd,o.snakeCase=pp,o.some=Fd,o.sortedIndex=Rc,o.sortedIndexBy=Ic,o.sortedIndexOf=Dc,o.sortedLastIndex=Fc,o.sortedLastIndexBy=$c,o.sortedLastIndexOf=Tc,o.startCase=vp,o.startsWith=mp,o.subtract=ug,o.sum=fg,o.sumBy=cg,o.template=_p,o.times=Zp,o.toFinite=se,o.toInteger=D,o.toLength=Va,o.toLower=Cp,o.toNumber=Dt,o.toSafeInteger=Ch,o.toString=W,o.toUpper=bp,o.trim=yp,o.trimEnd=xp,o.trimStart=wp,o.truncate=Sp,o.unescape=Ap,o.uniqueId=jp,o.upperCase=Lp,o.upperFirst=Lr,o.each=Wa,o.eachRight=Ua,o.first=Pa,Ir(o,function(){var t={};return Ht(o,function(e,n){U.call(o.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),o.VERSION=f,St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){o[t].placeholder=o}),St(["drop","take"],function(t,e){P.prototype[t]=function(n){n=n===i?1:Q(D(n),0);var s=this.__filtered__&&!e?new P(this):this.clone();return s.__filtered__?s.__takeCount__=it(n,s.__takeCount__):s.__views__.push({size:it(n,qt),type:t+(s.__dir__<0?"Right":"")}),s},P.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),St(["filter","map","takeWhile"],function(t,e){var n=e+1,s=n==Er||n==bl;P.prototype[t]=function(a){var u=this.clone();return u.__iteratees__.push({iteratee:A(a,3),type:n}),u.__filtered__=u.__filtered__||s,u}}),St(["head","last"],function(t,e){var n="take"+(e?"Right":"");P.prototype[t]=function(){return this[n](1).value()[0]}}),St(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");P.prototype[t]=function(){return this.__filtered__?new P(this):this[n](1)}}),P.prototype.compact=function(){return this.filter(gt)},P.prototype.find=function(t){return this.filter(t).head()},P.prototype.findLast=function(t){return this.reverse().find(t)},P.prototype.invokeMap=$(function(t,e){return typeof t=="function"?new P(this):this.map(function(n){return un(n,t,e)})}),P.prototype.reject=function(t){return this.filter(ai(A(t)))},P.prototype.slice=function(t,e){t=D(t);var n=this;return n.__filtered__&&(t>0||e<0)?new P(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(e=D(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},P.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},P.prototype.toArray=function(){return this.take(qt)},Ht(P.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),s=/^(?:head|last)$/.test(e),a=o[s?"take"+(e=="last"?"Right":""):e],u=s||/^find/.test(e);a&&(o.prototype[e]=function(){var c=this.__wrapped__,h=s?[1]:arguments,g=c instanceof P,_=h[0],C=g||I(c),b=function(E){var k=a.apply(o,ue([E],h));return s&&x?k[0]:k};C&&n&&typeof _=="function"&&_.length!=1&&(g=C=!1);var x=this.__chain__,S=!!this.__actions__.length,L=u&&!x,F=g&&!S;if(!u&&C){c=F?c:new P(this);var O=t.apply(c,h);return O.__actions__.push({func:ni,args:[b],thisArg:i}),new Lt(O,x)}return L&&F?t.apply(this,h):(O=this.thru(b),L?s?O.value()[0]:O.value():O)})}),St(["pop","push","shift","sort","splice","unshift"],function(t){var e=Rn[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);o.prototype[t]=function(){var a=arguments;if(s&&!this.__chain__){var u=this.value();return e.apply(I(u)?u:[],a)}return this[n](function(c){return e.apply(I(c)?c:[],a)})}}),Ht(P.prototype,function(t,e){var n=o[e];if(n){var s=n.name+"";U.call(Ne,s)||(Ne[s]=[]),Ne[s].push({name:e,func:n})}}),Ne[Jn(i,Mt).name]=[{name:"wrapper",func:i}],P.prototype.clone=Su,P.prototype.reverse=Au,P.prototype.value=Lu,o.prototype.at=nd,o.prototype.chain=id,o.prototype.commit=rd,o.prototype.next=sd,o.prototype.plant=ld,o.prototype.reverse=od,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=ud,o.prototype.first=o.prototype.head,en&&(o.prototype[en]=ad),o},Pe=iu();Ce?((Ce.exports=Pe)._=Pe,Ri._=Pe):et._=Pe}).call(vn)})(fi,fi.exports);var Cg=fi.exports;const bg={name:"FileSelector",props:{multiple:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},acceptExtensions:{type:String,default:""},maxFileSize:{type:Number,default:NaN},height:{type:Number,default:NaN},validateFn:{type:Function,default:()=>!0}},data(){return{isDragEnter:!1}},methods:{handleFilesChange(l){this.preprocessFiles(l.target.files)},handleDrop(l){this.isDragEnter=!1,this.preprocessFiles(l.dataTransfer.files)},checkFileExtensions(l){const r=[...new Set(this.acceptExtensions.toLowerCase().split(",").filter(Boolean))];return Array.from(l).findIndex(d=>{const y=`.${d.name.toLowerCase().split(".").pop()}`;return!r.includes(y)})===-1},checkFileSize(l){return Number.isNaN(this.maxFileSize)?!0:Array.from(l).findIndex(f=>f.size>this.maxFileSize)===-1},validate(l){return!this.multiple&&l.length>1?"MULTIFILES_ERROR":this.checkFileExtensions(l)?this.checkFileSize(l)?this.validateFn(l):"FILE_SIZE_ERROR":"EXTENSION_ERROR"},preprocessFiles(l){const r=this.validate(l);this.$emit("validated",r,l),r===!0&&this.$emit("changed",l),this.$refs.fsFileInput.value=""}}};var yg=function(){var r=this,i=r._self._c;return i("div",{staticClass:"fs-file-selector",class:{"fs-drag-enter":r.isDragEnter}},[i("div",{directives:[{name:"show",rawName:"v-show",value:r.isLoading,expression:"isLoading"}],staticClass:"fs-loader"},[r._t("loader",function(){return[r._v(" Loading... ")]})],2),i("div",{ref:"fsDroppable",staticClass:"fs-droppable",style:{height:r.height+"px"},on:{dragenter:function(f){f.stopPropagation(),f.preventDefault(),r.isDragEnter=!0},dragover:function(f){return f.stopPropagation(),f.preventDefault(),(()=>{}).apply(null,arguments)},dragleave:function(f){f.stopPropagation(),f.preventDefault(),r.isDragEnter=!1},drop:function(f){return f.stopPropagation(),f.preventDefault(),r.handleDrop.apply(null,arguments)}}},[i("input",{ref:"fsFileInput",attrs:{type:"file",tabindex:"-1",multiple:r.multiple,accept:r.acceptExtensions},on:{change:r.handleFilesChange}}),r._t("top"),i("div",{staticClass:"fs-btn-select",attrs:{href:"#"},on:{click:function(f){return r.$refs.fsFileInput.click()}}},[r._t("default",function(){return[r._v("Select")]})],2),r._t("bottom")],2)])},xg=[],wg=Wt(bg,yg,xg,!1,null,"8406fba3",null,null);const Sg=wg.exports,Ag=Yt({name:"AddDatasetsPanel",components:{FileSelector:Sg},props:{fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},vizConfiguration:{type:Object}},data:()=>({validDataTypes:["CSV","TSV","TAB","TXT","DBF","GZ","DAT"],validRegex:/\.(CSV|TSV|TAB|TXT|DBF|DAT)(\.GZ)?$/,fileChoice:"",filesInFolder:[],isLoading:!1}),computed:{fileApi(){return new pg(this.fileSystem)}},async mounted(){const{files:l}=await this.fileApi.getDirectory(this.subfolder);this.filesInFolder=l.filter(r=>this.validRegex.test(r.toLocaleUpperCase())).sort()},watch:{fileChoice(){console.warn("*** File Chosen!"),this.fileChoiceChanged(this.fileChoice)}},methods:{clickedClose(){this.$emit("update",{})},async fileChoiceChanged(l){if(!l)return;this.isLoading=!0;const r=await this.fetchDataset(l);let i=l;const f=this.validRegex.exec(l.toLocaleUpperCase());f&&f[0]&&(i=l.substring(0,l.length-f[0].length));const d={key:i,dataTable:r,filename:l};this.$emit("update",{dataset:d}),this.isLoading=!1},handleFilesValidated(l,r){console.log("Validated result",l)},async handleFilesChanged(l){this.isLoading=!0;const r=Array.from(l);for(const i of r){let f=await this.loadDataUrl(i);const d=f.buffer||f,y=await this.processBuffer(i.name,d);let T=i.name;const ft=this.validRegex.exec(T.toLocaleUpperCase());ft&&ft[0]&&(T=T.substring(0,T.length-ft[0].length));const ct={key:T,dataTable:y,filename:i};this.$emit("update",{dataset:ct})}this.isLoading=!1},async processBuffer(l,r){return new Promise((i,f)=>{const d=new dl;try{d.postMessage({config:{dataset:l},buffer:r},[r]),d.onmessage=y=>{d.terminate(),i(y.data)}}catch(y){d.terminate(),f(y)}})},async loadDataUrl(l){return await new Promise(i=>{const f=new FileReader;f.readAsArrayBuffer(l),f.onload=d=>{const y=d.target.result,T=hg(y);i(T)}})},async fetchDataset(l){return new Promise((r,i)=>{const f=new dl;try{f.postMessage({fileSystemConfig:this.fileSystem,subfolder:this.subfolder,files:this.filesInFolder,config:{dataset:l}}),f.onmessage=d=>{f.terminate(),r(d.data)}}catch(d){f.terminate(),i(d)}})}}});var Lg=function(){var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"datasets-panel"},[r.isLoading?i("div",{staticClass:"loading-panel"},[r._m(0)]):r._e(),i("h3",{staticClass:"button-close",on:{click:r.clickedClose}},[i("i",{staticClass:"fa fa-sm fa-times"})]),i("h3",{staticClass:"header-line"},[r._v("Add Data")]),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("b",[r._v("Choose a dataset from files in this folder:")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.fileChoice,callback:function(f){r.fileChoice=f},expression:"fileChoice"}},[i("option",{attrs:{value:"",label:"Select file..."}}),r._l(r.filesInFolder,function(f){return i("option",{attrs:{label:f},domProps:{value:f}})})],2)],1)]),i("br"),i("div",{staticClass:"drop-zone"},[i("b",[r._v("Or Drag and Drop any dataset file:")]),i("file-selector",{attrs:{"accept-extensions":r.validDataTypes.map(f=>`.${f}`).join(","),multiple:!0,"is-loading":r.isLoading},on:{validated:r.handleFilesValidated,changed:r.handleFilesChanged}},[r._v("or "),i("b",[i("a",[r._v("browse your files")])]),i("div",{staticClass:"section-top",attrs:{slot:"top"},slot:"top"},[i("br"),i("p",[r._v("Drop files into this area.")]),i("p",[r._v("No size limit, but large datasets could crash your browser :-)")]),i("br"),i("p",[r._v("Supported file types: "),i("b",[r._v(r._s(r.validDataTypes.join(", ")))])])]),i("div",{staticClass:"section-bottom",attrs:{slot:"loader"},slot:"loader"},[i("p",[r._v("Processing files"),i("br")]),i("p",[r._v("please wait...")])])]),i("br"),r._m(1)],1)])},Og=[function(){var l=this,r=l._self._c;return l._self._setupProxy,r("div",{staticClass:"thing"},[r("div",{staticClass:"spinner-box"},[r("p",[l._v(" ")])]),r("h3",[l._v("LOADING...")])])},function(){var l=this,r=l._self._c;return l._self._setupProxy,r("p",{staticClass:"center"},[r("input",{staticStyle:{display:"none"},attrs:{name:"dataBrowser",id:"dataBrowser",type:"file"}})])}];var Rg=Wt(Ag,Lg,Og,!1,null,"9efd027b",null,null);const Ig=Rg.exports,Ge=Object.assign({},gg,vg),Dg=Yt({name:"ColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const l=[{ramp:"Viridis",style:2,reverse:!0},{ramp:"Plasma",style:2,reverse:!0},{ramp:"Blues",style:2},{ramp:"Purples",style:2},{ramp:"Oranges",style:2},{ramp:"PRGn",style:1,reverse:!0},{ramp:"RdBu",style:1,reverse:!0},{ramp:"Tableau10",style:0},{ramp:"Paired",style:0}];return{colorChoices:l,globalState:Tr.state,steps:"9",flip:!1,dataColumn:"",selectedColor:l[0],selectedSingleColor:"",datasetLabels:[],isFirstDataset:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:0},10)}},mounted(){this.selectedSingleColor=this.simpleColors[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},flip(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},dataColumn(){this.emitColorSpecification()},"global.isDarkMode"(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.color;if(l!=null&&l.columnName){const i=`${l.dataset}/${l.columnName}`;this.dataColumn=i,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const l=Object.keys(this.datasets);if(this.datasetLabels=l,!this.isFirstDataset)return;l.length&&(this.isFirstDataset=!1);const{dataset:r,columnName:i,colorRamp:f}=this.vizConfiguration.display.color;if(r&&i)this.dataColumn=`${r}/${i}`,f&&(this.selectedColor=this.colorChoices.find(d=>d.ramp.toLowerCase()===f.ramp.toLowerCase())||this.colorChoices[0],this.flip=!!f.reverse,f.steps&&(this.steps=""+f.steps));else if(l.length){const d=Object.keys(this.datasets[l[0]])[1];console.log(d),d&&(this.dataColumn=`${l[0]}/${d}`)}},emitColorSpecification(){if(!this.dataColumn)return;const l=this.dataColumn.indexOf("/");if(l===-1){this.clickedSingleColor(this.selectedSingleColor);return}const r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f=this.buildColors(this.selectedColor,parseInt(this.steps)),d=parseInt(this.steps),y={dataset:r,columnName:i,fixedColors:f,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:d}};setTimeout(()=>this.$emit("update",{color:y}),50)},clickedSingleColor(l){this.selectedSingleColor=l;const r={fixedColors:[this.selectedSingleColor],dataset:"",columnName:""};setTimeout(()=>this.$emit("update",{color:r}),50)},datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase")},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},pickColor(l){this.selectedColor=l,this.emitColorSpecification()},buildColors(l,r){let i=[...this.ramp(l,r||parseInt(this.steps))],f=!!l.reverse;return this.flip&&(f=!f),f&&(i=i.reverse()),l.style===2&&this.globalState.isDarkMode&&(i=i.reverse()),i},ramp(l,r){let i;if(l.style===0)return Ge[`scheme${l.ramp}`].slice(0,r);if(Ge[`scheme${l.ramp}`]&&Ge[`scheme${l.ramp}`][r])i=Ge[`scheme${l.ramp}`][r];else try{const f=Ge[`interpolate${l.ramp}`];i=[];for(let d=0;d<r;++d)i.push(Ge.rgb(f(d/(r-1))).hex())}catch{return this.ramp(l,r-1)}return i}}});var Fg=function(){var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"color-ramp-picker"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(f){r.dataColumn=f},expression:"dataColumn"}},[i("option",{attrs:{label:"Single color",value:""}}),r._l(r.datasetChoices(),function(f){return i("optgroup",{key:f,attrs:{label:f}},r._l(r.columnsInDataset(f),function(d){return i("option",{attrs:{label:d},domProps:{value:`${f}/${d}`}})}),0)})],2)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:!r.dataColumn,expression:"!dataColumn"}],staticClass:"colorbar single"},r._l(r.simpleColors,function(f){return i("div",{key:f,staticClass:"single-color",class:{active:r.selectedSingleColor==f},style:{backgroundColor:`${f}`},on:{click:function(d){return r.clickedSingleColor(f)}}})}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn,expression:"dataColumn"}],staticClass:"more"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[r._v("Steps")]),i("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:r.steps,callback:function(f){r.steps=f},expression:"steps"}})],1),i("div",{staticClass:"widget"},[i("p",[r._v("Reverse")]),i("b-checkbox",{staticClass:"hello",model:{value:r.flip,callback:function(f){r.flip=f},expression:"flip"}})],1)]),r._l(r.colorChoices,function(f){return i("div",{key:f.ramp,staticClass:"color-ramp",class:{active:f===r.selectedColor},on:{click:function(d){return r.pickColor(f)}}},[i("div",{staticClass:"colorbar"},r._l(r.buildColors(f),function(d,y){return i("div",{key:y,staticClass:"swatch",style:{backgroundColor:`${d}`}},[i("p",[r._v(" ")])])}),0)])})],2)])},$g=[];var Tg=Wt(Dg,Fg,$g,!1,null,"a6392fbd",null,null);const Eg=Tg.exports,Pg=Yt({name:"WidthConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:l=>({dataColumn:"",xscaleFactor:"100",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],debounceHandleWidthChanged:pl(l.emitWidthSpecification,500)}),mounted(){this.datasetsAreLoaded()},computed:{datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase")}},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},xscaleFactor(){this.debounceHandleWidthChanged()},dataColumn(){this.emitWidthSpecification()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.width;if(l!=null&&l.columnName){const i=`${l.dataset}/${l.columnName}`;this.dataColumn=i,this.datasetLabels=[...this.datasetLabels]}},datasetsAreLoaded(){const l=Object.keys(this.datasets),{dataset:r,columnName:i,scaleFactor:f}=this.vizConfiguration.display.width;if(r&&i)this.dataColumn=`${r}/${i}`,f&&(this.xscaleFactor=""+f);else if(l.length){const d=Object.keys(this.datasets[l[0]])[1];d&&(this.dataColumn=`${l[0]}/${d}`)}this.datasetLabels=l},emitWidthSpecification(){const l=this.dataColumn.indexOf("/");if(l===-1){this.clickedSingle();return}const r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f={dataset:r,columnName:i,scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:f}),50)},clickedSingle(){const l={dataset:"",columnName:"",scaleFactor:parseFloat(this.xscaleFactor)};setTimeout(()=>this.$emit("update",{width:l}),50)},numericColumnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]}}});var kg=function(){var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"width-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(f){r.dataColumn=f},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:""}}),r._l(r.datasetChoices,function(f){return i("optgroup",{key:f,attrs:{label:f}},r._l(r.numericColumnsInDataset(f),function(d){return i("option",{attrs:{label:d},domProps:{value:`${f}/${d}`}})}),0)})],2)],1)]),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[r._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!r.dataColumn,placeholder:"1.0"},model:{value:r.xscaleFactor,callback:function(f){r.xscaleFactor=f},expression:"xscaleFactor"}})],1)],1)])])},zg=[];var Ng=Wt(Pg,kg,zg,!1,null,"a340000a",null,null);const Wg=Ng.exports,Ug=[{ramp:"Viridis",style:H.sequential,reverse:!0},{ramp:"Plasma",style:H.sequential,reverse:!0},{ramp:"Blues",style:H.sequential},{ramp:"Greens",style:H.sequential},{ramp:"Purples",style:H.sequential},{ramp:"Oranges",style:H.sequential},{ramp:"RdBu",style:H.diverging,reverse:!0},{ramp:"RdYlBu",style:H.sequential},{ramp:"PRGn",style:H.diverging,reverse:!0},{ramp:"Tableau10",style:H.categorical},{ramp:"Paired",style:H.categorical}],Mg=Yt({name:"LineColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:H.categorical},10)},colorChoices(){return Ug},datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase").reverse()}},data:()=>({globalState:Tr.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var l,r;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(r=(l=this.vizConfiguration.display)==null?void 0:l.lineColor)!=null&&r.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.lineColor;if(this.setupDiffMode(l),l!=null&&l.columnName){const i=this.diffDatasets.length?`${this.diffDatasets[0]}/${l.columnName}`:`${l.dataset}/${l.columnName}`;if(this.dataColumn=i,this.datasetLabels=[...this.datasetLabels],l!=null&&l.normalize&&(this.normalSelection=l.normalize),l!=null&&l.join&&(this.join=l.join),l.colorRamp){let f=this.colorChoices.find(d=>d.ramp==l.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=f,this.steps=l.colorRamp.steps,this.flip=!!l.colorRamp.reverse}}else l!=null&&l.fixedColors&&this.clickedSingleColor(l.fixedColors[0])},setupDiffMode(l){if(!(l!=null&&l.diff))return;let r=[];if(l.diff.indexOf(" - ")>-1)r=l.diff.split(" - ").map(i=>i.trim());else if(r=l.diff.split("-").map(i=>i.trim()),r.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=r,this.diffRelative=!!l.relative,this.diffUISelection=`${r[0]} - ${r[1]}`},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l,this.updateDiffLabels()},updateDiffLabels(){const l=[];if(l.push(["No",""]),this.datasetLabels.length<=1)return;const r=this.datasetLabels.slice(1);let i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y));i.forEach(f=>l.push([f,f])),r.reverse(),i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y)),i.forEach(f=>l.push([f,f])),this.diffChoices=l},diffSelectionChanged(){if(this.diffUISelection){const l=this.diffUISelection.split(" - ");this.diffDatasets=l}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var T,ft,ct,Ut,vt,tt,Ft,st;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const l=this.dataColumn.indexOf("/"),r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f=parseInt(this.steps),d=this.useHardCodedColors?(ft=(T=this.vizConfiguration.display)==null?void 0:T.lineColor)==null?void 0:ft.fixedColors.slice():this.buildColors(this.selectedColor,f);this.useHardCodedColors=!1;const y={dataset:r,columnName:i,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:f}};this.diffDatasets.length&&(y.diffDatasets=this.diffDatasets),this.diffRelative&&(y.relative=!0),(vt=(Ut=(ct=this.vizConfiguration.display)==null?void 0:ct.lineColor)==null?void 0:Ut.colorRamp)!=null&&vt.breakpoints&&(y.colorRamp.breakpoints=(st=(Ft=(tt=this.vizConfiguration.display)==null?void 0:tt.lineColor)==null?void 0:Ft.colorRamp)==null?void 0:st.breakpoints),setTimeout(()=>this.$emit("update",{lineColor:y}),50)},clickedSingleColor(l){this.selectedSingleColor=l;const r={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout(()=>this.$emit("update",{lineColor:r}),50)},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},pickColor(l){this.selectedColor=l,this.emitColorSpecification()},buildColors(l,r){let i=[...hl(l,r||parseInt(this.steps))],f=!!l.reverse;return this.flip&&(f=!f),f&&(i=i.reverse()),l.style===H.sequential&&this.globalState.isDarkMode&&(i=i.reverse()),i}}});var Bg=function(){var f;var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"color-ramp-picker"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(d){r.dataColumn=d},expression:"dataColumn"}},[i("option",{attrs:{label:"Single color",value:"@"}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.columnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),r.datasetChoices.length>1&&r.dataColumn&&r.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.join,callback:function(d){r.join=d},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},r._l(r.columnsInDataset(((f=r.dataColumn)==null?void 0:f.slice(0,r.dataColumn.indexOf("/")))||[]),function(d){return i("option",{attrs:{label:d},domProps:{value:d}})}),0)])],1)]):r._e(),r.dataColumn&&r.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.normalSelection,callback:function(d){r.normalSelection=d},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.columnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):r._e(),i("div",{staticClass:"more",attrs:{title:r.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[r._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!r.dataColumn||r.diffChoices.length<2,expanded:""},model:{value:r.diffUISelection,callback:function(d){r.diffUISelection=d},expression:"diffUISelection"}},r._l(r.diffChoices,function(d){return i("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1),i("div",{staticClass:"widget"},[i("p",[r._v("%Diff")]),i("b-checkbox",{staticClass:"hello",attrs:{disabled:!r.diffUISelection||!r.dataColumn||r.diffChoices.length<2},model:{value:r.diffRelative,callback:function(d){r.diffRelative=d},expression:"diffRelative"}})],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},r._l(r.simpleColors,function(d){return i("div",{key:d,staticClass:"single-color",class:{active:r.selectedSingleColor==d},style:{backgroundColor:`${d}`},on:{click:function(y){return r.clickedSingleColor(d)}}})}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn&&r.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",[r._v("Steps")]),i("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:r.steps,callback:function(d){r.steps=d},expression:"steps"}})],1),i("div",{staticClass:"widget"},[i("p",[r._v("Flip")]),i("b-checkbox",{staticClass:"hello",model:{value:r.flip,callback:function(d){r.flip=d},expression:"flip"}})],1)]),r._l(r.colorChoices,function(d){return i("div",{key:d.ramp,staticClass:"color-ramp",class:{active:d===r.selectedColor},on:{click:function(y){return r.pickColor(d)}}},[i("div",{staticClass:"colorbar"},r._l(r.buildColors(d),function(y,T){return i("div",{key:T,staticClass:"swatch",style:{backgroundColor:`${y}`}},[i("p",[r._v(" ")])])}),0)])})],2)])},qg=[];var Hg=Wt(Mg,Bg,qg,!1,null,"24090fc1",null,null);const Gg=Hg.exports,Kg=[{ramp:"Viridis",style:H.sequential,reverse:!0},{ramp:"Plasma",style:H.sequential,reverse:!0},{ramp:"Blues",style:H.sequential},{ramp:"Greens",style:H.sequential},{ramp:"Purples",style:H.sequential},{ramp:"Oranges",style:H.sequential},{ramp:"RdBu",style:H.diverging,reverse:!0},{ramp:"PRGn",style:H.diverging,reverse:!0},{ramp:"Tableau10",style:H.categorical},{ramp:"Paired",style:H.categorical}],Yg=Yt({name:"FillColorsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},computed:{simpleColors(){return this.buildColors({ramp:"Tableau10",style:H.categorical},10)},colorChoices(){return Kg},datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase").reverse()}},data:()=>({globalState:Tr.state,dataColumn:"",datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],flip:!1,isCurrentlyDiffMode:!1,join:"",normalSelection:"",selectedColor:{},selectedSingleColor:"",steps:"9",useHardCodedColors:!1}),mounted(){var l,r;this.selectedSingleColor=this.simpleColors[0],this.selectedColor=this.colorChoices[0],this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.datasetsAreLoaded(),(r=(l=this.vizConfiguration.display)==null?void 0:l.fill)!=null&&r.fixedColors&&(this.useHardCodedColors=!0),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},dataColumn(){this.emitColorSpecification()},join(){this.emitColorSpecification()},diffDatasets(){this.emitColorSpecification()},flip(){this.emitColorSpecification()},"globalState.isDarkMode"(){this.emitColorSpecification()},normalSelection(){this.emitColorSpecification()},selectedColor(){this.emitColorSpecification()},steps(){this.emitColorSpecification()},diffRelative(){this.emitColorSpecification()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.fill;if(this.setupDiffMode(l),l!=null&&l.columnName){const i=this.diffDatasets.length?`${this.diffDatasets[0]}/${l.columnName}`:`${l.dataset}/${l.columnName}`;if(this.dataColumn=i,this.datasetLabels=[...this.datasetLabels],l!=null&&l.normalize&&(this.normalSelection=l.normalize),l!=null&&l.join&&(this.join=l.join),l.colorRamp){let f=this.colorChoices.find(d=>d.ramp==l.colorRamp.ramp)||this.colorChoices[0];this.selectedColor=f,this.steps=l.colorRamp.steps,this.flip=!!l.colorRamp.reverse}}else l!=null&&l.fixedColors&&this.clickedSingleColor(l.fixedColors[0])},setupDiffMode(l){if(!(l!=null&&l.diff))return;let r=[];if(l.diff.indexOf(" - ")>-1)r=l.diff.split(" - ").map(i=>i.trim());else if(r=l.diff.split("-").map(i=>i.trim()),r.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=r,this.diffRelative=!!l.relative,this.diffUISelection=`${r[0]} - ${r[1]}`},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l,this.updateDiffLabels()},updateDiffLabels(){const l=[];if(l.push(["No",""]),this.datasetLabels.length<=1)return;const r=this.datasetLabels.slice(1);let i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y));i.forEach(f=>l.push([f,f])),r.reverse(),i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y)),i.forEach(f=>l.push([f,f])),this.diffChoices=l},diffSelectionChanged(){if(this.diffUISelection){const l=this.diffUISelection.split(" - ");this.diffDatasets=l}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},emitColorSpecification(){var T,ft,ct,Ut,vt,tt,Ft,st;if(!this.dataColumn)return;if(this.dataColumn==="@"){this.normalSelection="",this.selectedSingleColor||(this.selectedSingleColor=this.simpleColors[0]),this.clickedSingleColor(this.selectedSingleColor);return}const l=this.dataColumn.indexOf("/"),r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f=parseInt(this.steps),d=this.useHardCodedColors?(ft=(T=this.vizConfiguration.display)==null?void 0:T.fill)==null?void 0:ft.fixedColors.slice():this.buildColors(this.selectedColor,f);this.useHardCodedColors=!1;const y={dataset:r,columnName:i,join:this.join,fixedColors:d,normalize:this.normalSelection,colorRamp:{ramp:this.selectedColor.ramp,style:this.selectedColor.style,reverse:this.flip,steps:f}};this.diffDatasets.length&&(y.diffDatasets=this.diffDatasets),this.diffRelative&&(y.relative=!0),(vt=(Ut=(ct=this.vizConfiguration.display)==null?void 0:ct.fill)==null?void 0:Ut.colorRamp)!=null&&vt.breakpoints&&(y.colorRamp.breakpoints=(st=(Ft=(tt=this.vizConfiguration.display)==null?void 0:tt.fill)==null?void 0:Ft.colorRamp)==null?void 0:st.breakpoints),setTimeout(()=>this.$emit("update",{fill:y}),50)},clickedSingleColor(l){this.selectedSingleColor=l;const r={fixedColors:[this.selectedSingleColor],dataset:"",columnName:"",normalize:""};setTimeout(()=>this.$emit("update",{fill:r}),25)},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},pickColor(l){this.selectedColor=l,this.emitColorSpecification()},buildColors(l,r){let i=[...hl(l,r||parseInt(this.steps))],f=!!l.reverse;return this.flip&&(f=!f),f&&(i=i.reverse()),l.style===H.sequential&&this.globalState.isDarkMode&&(i=i.reverse()),i}}});var Zg=function(){var f;var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"color-ramp-picker"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(d){r.dataColumn=d},expression:"dataColumn"}},[i("option",{attrs:{label:"Single color",value:"@"}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.columnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),r.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.join,callback:function(d){r.join=d},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},r._l(r.columnsInDataset(((f=r.dataColumn)==null?void 0:f.slice(0,r.dataColumn.indexOf("/")))||[]),function(d){return i("option",{attrs:{label:d},domProps:{value:d}})}),0)])],1)]):r._e(),r.dataColumn&&r.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.normalSelection,callback:function(d){r.normalSelection=d},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.columnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):r._e(),i("div",{staticClass:"more",attrs:{title:r.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[r._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!r.dataColumn||r.diffChoices.length<2,expanded:""},model:{value:r.diffUISelection,callback:function(d){r.diffUISelection=d},expression:"diffUISelection"}},r._l(r.diffChoices,function(d){return i("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1),i("div",{staticClass:"widget"},[i("p",[r._v("%Diff")]),i("b-checkbox",{staticClass:"hello",attrs:{disabled:!r.diffUISelection||!r.dataColumn||r.diffChoices.length<2},model:{value:r.diffRelative,callback:function(d){r.diffRelative=d},expression:"diffRelative"}})],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn=="@",expression:"dataColumn=='@'"}],staticClass:"colorbar single"},r._l(r.simpleColors,function(d){return i("div",{key:d,staticClass:"single-color",class:{active:r.selectedSingleColor==d},style:{backgroundColor:`${d}`},on:{click:function(y){return r.clickedSingleColor(d)}}})}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:r.dataColumn&&r.dataColumn.length>1,expression:"dataColumn && dataColumn.length > 1"}],staticClass:"more"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",[r._v("Steps")]),i("b-input",{attrs:{placeholder:"Number",type:"number",min:"2",max:"15"},model:{value:r.steps,callback:function(d){r.steps=d},expression:"steps"}})],1),i("div",{staticClass:"widget"},[i("p",[r._v("Flip")]),i("b-checkbox",{staticClass:"hello",model:{value:r.flip,callback:function(d){r.flip=d},expression:"flip"}})],1)]),r._l(r.colorChoices,function(d){return i("div",{key:d.ramp,staticClass:"color-ramp",class:{active:d===r.selectedColor},on:{click:function(y){return r.pickColor(d)}}},[i("div",{staticClass:"colorbar"},r._l(r.buildColors(d),function(y,T){return i("div",{key:T,staticClass:"swatch",style:{backgroundColor:`${y}`}},[i("p",[r._v(" ")])])}),0)])})],2)])},Jg=[];var jg=Wt(Yg,Zg,Jg,!1,null,"2aec3c31",null,null);const Xg=jg.exports,Qg=Yt({name:"FillHeightConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const l=["none","sqrt","pow5"];return{transforms:l,dataColumn:"",join:"",normalSelection:"",scaleFactor:"1",selectedTransform:l[0],datasetLabels:[],debounceHandleScale:{}}},mounted(){this.datasetLabels=Object.keys(this.vizConfiguration.datasets),this.debounceHandleScale=mg.debounce(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},join(){this.emitSpecification()},scaleFactor(){this.debounceHandleScale()},dataColumn(){this.emitSpecification()},normalSelection(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase").reverse()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.fillHeight;l!=null&&l.columnName&&(this.dataColumn=`${l.dataset}/${l.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=l.scaleFactor,this.join=l.join,l!=null&&l.normalize&&(this.normalSelection=l.normalize))},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;if(this.dataColumn==="^"){this.normalSelection="";const d={dataset:"",columnName:"",join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:d}),25);return}const l=this.dataColumn.indexOf("/"),r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f={dataset:r,columnName:i,join:this.join,normalize:this.normalSelection,scaleFactor:parseFloat(this.scaleFactor)};setTimeout(()=>this.$emit("update",{fillHeight:f}),25)},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},numericColumnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]}}});var Vg=function(){var f;var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"height-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(d){r.dataColumn=d},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"^"}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.numericColumnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),r.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.join,callback:function(d){r.join=d},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},r._l(r.columnsInDataset(((f=r.dataColumn)==null?void 0:f.slice(0,r.dataColumn.indexOf("/")))||[]),function(d){return i("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):r._e(),r.dataColumn&&r.dataColumn.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Normalize by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.normalSelection,callback:function(d){r.normalSelection=d},expression:"normalSelection"}},[i("option",{attrs:{label:"None",value:""}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.numericColumnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}:${y}`}})}),0)})],2)],1)]):r._e(),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[r._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!r.dataColumn,placeholder:"1.0"},model:{value:r.scaleFactor,callback:function(d){r.scaleFactor=d},expression:"scaleFactor"}})],1)],1)])])},tv=[];var ev=Wt(Qg,Vg,tv,!1,null,"a845e5a4",null,null);const nv=ev.exports,iv=Yt({name:"LineWidthsConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>({dataColumn:"",scaleFactor:"1",join:"",selectedTransform:["none","sqrt","pow5"][0],datasetLabels:[],diffDatasets:[],diffRelative:!1,diffUISelection:"",diffChoices:[],isCurrentlyDiffMode:!1,debounceHandleScaleChanged:{}}),mounted(){this.debounceHandleScaleChanged=pl(this.handleScaleChanged,500),this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},dataColumn(){this.emitSpecification()},diffDatasets(){this.emitSpecification()},diffRelative(){this.emitSpecification()},datasets(){this.datasetsAreLoaded()},diffUISelection(){this.diffSelectionChanged()},scaleFactor(){this.debounceHandleScaleChanged()},join(){this.emitSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase").reverse()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.lineWidth;this.setupDiffMode(l),l!=null&&l.columnName?(this.dataColumn=this.diffDatasets.length?`${this.diffDatasets[0]}/${l.columnName}`:`${l.dataset}/${l.columnName}`,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=l.scaleFactor??"1",this.join=l.join):/^@\d$/.test(l==null?void 0:l.dataset)&&(this.dataColumn=l.dataset)},setupDiffMode(l){if(!(l!=null&&l.diff))return;let r=[];if(l.diff.indexOf(" - ")>-1)r=l.diff.split(" - ").map(i=>i.trim());else if(r=l.diff.split("-").map(i=>i.trim()),r.length>2)throw Error('Ambiguous diff, use " - " to separate terms');this.diffDatasets=r,this.diffRelative=!!l.relative,this.diffUISelection=`${r[0]} - ${r[1]}`},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l,this.updateDiffLabels()},updateDiffLabels(){const l=[];if(l.push(["No",""]),this.datasetLabels.length<=1)return;const r=this.datasetLabels.slice(1);let i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y));i.forEach(f=>l.push([f,f])),r.reverse(),i=r.flatMap((f,d)=>r.slice(d+1).map(y=>f+" - "+y)),i.forEach(f=>l.push([f,f])),this.diffChoices=l},diffSelectionChanged(){if(this.diffUISelection){const l=this.diffUISelection.split(" - ");this.diffDatasets=l}else this.diffDatasets=[],this.diffRelative=!1;this.isCurrentlyDiffMode=!!this.diffUISelection},handleScaleChanged(){this.emitSpecification()},emitSpecification(){if(!this.dataColumn)return;const l=this.dataColumn.indexOf("/");if(l===-1){this.clickedSingle();return}const r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f={dataset:r,columnName:i,join:this.join,scaleFactor:parseFloat(this.scaleFactor)};this.diffDatasets.length&&(f.diffDatasets=this.diffDatasets),this.diffRelative&&(f.relative=!0),setTimeout(()=>this.$emit("update",{lineWidth:f}),50)},clickedSingle(){const l={dataset:"",columnName:"",scaleFactor:parseFloat(this.scaleFactor)};/^@\d$/.test(this.dataColumn)&&(l.dataset=this.dataColumn),setTimeout(()=>this.$emit("update",{lineWidth:l}),20)},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},numericColumnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]}}});var rv=function(){var f;var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"width-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(d){r.dataColumn=d},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"@0"}}),i("option",{attrs:{label:"1px",value:"@1"}}),i("option",{attrs:{label:"2px",value:"@2"}}),i("option",{attrs:{label:"3px",value:"@3"}}),i("option",{attrs:{label:"5px",value:"@5"}}),i("option",{attrs:{label:"8px",value:"@8"}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.numericColumnsInDataset(d),function(y){return i("option",{key:`${d}/${y}`,attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),r.datasetChoices.length>1&&r.dataColumn&&r.dataColumn.length>2?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.join,callback:function(d){r.join=d},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},r._l(r.columnsInDataset(((f=r.dataColumn)==null?void 0:f.slice(0,r.dataColumn.indexOf("/")))||[]),function(d){return i("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):r._e(),r.dataColumn&&r.dataColumn.length>2?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[r._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!r.dataColumn,placeholder:"1.0"},model:{value:r.scaleFactor,callback:function(d){r.scaleFactor=d},expression:"scaleFactor"}})],1)],1)]):r._e(),i("div",{staticClass:"more",attrs:{title:r.diffChoices.length<2?"Add two datasets to enable comparisons":""}},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget",staticStyle:{flex:"3"}},[i("p",{staticClass:"tight"},[r._v("Compare datasets")]),i("b-select",{staticClass:"selector",attrs:{disabled:!r.dataColumn||r.diffChoices.length<2,expanded:""},model:{value:r.diffUISelection,callback:function(d){r.diffUISelection=d},expression:"diffUISelection"}},r._l(r.diffChoices,function(d){return i("option",{attrs:{label:d[0]},domProps:{value:d[1]}})}),0)],1)])])])},sv=[];var av=Wt(iv,rv,sv,!1,null,"f5e874c7",null,null);const lv=av.exports,ov=Yt({name:"CircleRadiusConfig",props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const l=["none","sqrt","pow5"];return{transforms:l,dataColumn:"",scaleFactor:"100",selectedTransform:l[0],datasetLabels:[],join:""}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()},scaleFactor(){this.emitWidthSpecification()},dataColumn(){this.emitWidthSpecification()},join(){this.emitWidthSpecification()}},computed:{datasetChoices(){return this.datasetLabels.filter(l=>l!=="csvBase").reverse()}},methods:{vizConfigChanged(){var r;const l=(r=this.vizConfiguration.display)==null?void 0:r.radius;if(l!=null&&l.columnName){const i=`${l.dataset}/${l.columnName}`;this.dataColumn=i,this.datasetLabels=[...this.datasetLabels],this.scaleFactor=l.scaleFactor,this.join=l.join??""}},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l},emitWidthSpecification(){if(!this.dataColumn)return;if(this.dataColumn=="@"){const d={columnName:"",scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:d}),50);return}const l=this.dataColumn.indexOf("/"),r=this.dataColumn.substring(0,l),i=this.dataColumn.substring(l+1),f={dataset:r,columnName:i,scaleFactor:parseFloat(this.scaleFactor),join:this.join};setTimeout(()=>this.$emit("update",{radius:f}),50)},columnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]},numericColumnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]}}});var uv=function(){var f;var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"width-panel"},[i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Display")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.dataColumn,callback:function(d){r.dataColumn=d},expression:"dataColumn"}},[i("option",{attrs:{label:"None",value:"@"}}),r._l(r.datasetChoices,function(d){return i("optgroup",{key:d,attrs:{label:d}},r._l(r.numericColumnsInDataset(d),function(y){return i("option",{attrs:{label:y},domProps:{value:`${d}/${y}`}})}),0)})],2)],1)]),r.datasetChoices.length>1?i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",{staticClass:"tight"},[r._v("Join by")]),i("b-select",{staticClass:"selector",attrs:{expanded:""},model:{value:r.join,callback:function(d){r.join=d},expression:"join"}},[i("option",{attrs:{label:"None",value:""}}),i("option",{attrs:{label:"Row count",value:"@count"}}),i("optgroup",{attrs:{label:"Join by..."}},r._l(r.columnsInDataset(((f=r.dataColumn)==null?void 0:f.slice(0,r.dataColumn.indexOf("/")))||[]),function(d){return i("option",{key:d,attrs:{label:d},domProps:{value:d}})}),0)])],1)]):r._e(),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("p",[r._v("Scaling")]),i("b-field",[i("b-input",{attrs:{disabled:!r.dataColumn,placeholder:"1.0"},model:{value:r.scaleFactor,callback:function(d){r.scaleFactor=d},expression:"scaleFactor"}})],1)],1)])])},fv=[];var cv=Wt(ov,uv,fv,!1,null,"58b1c77a",null,null);const dv=cv.exports,hv=Yt({props:{vizConfiguration:{type:Object,required:!0},datasets:{type:Object,required:!0}},data:()=>{const l=["Categories","==","!=","<=",">=","<",">"];return{OPERATORS:l,filters:{},addDataColumn:null,addOperator:l[0],addValue:"",datasetLabels:[]}},mounted(){this.datasetsAreLoaded(),this.vizConfigChanged()},watch:{filters(){this.emitSpecification()},vizConfiguration(){this.vizConfigChanged()},datasets(){this.datasetsAreLoaded()}},computed:{filterIds(){return Object.keys(this.filters)},datasetChoices(){return this.datasetLabels.filter(l=>l!=="XcsvBase").reverse()}},methods:{eraseFields(){this.addDataColumn=null,this.addOperator=this.OPERATORS[0],this.addValue=""},clickedCancel(){this.eraseFields()},clickedAddFilter(){let[l,r]=this.addDataColumn?this.addDataColumn.split("@"):["",""];this.datasetLabels.indexOf(l)<1&&(l="shapes"),this.addOperator===this.OPERATORS[0]&&(this.addValue="");const i={dataset:l,column:r,operator:this.addOperator,value:this.addValue};this.filters[`${l}.${r}`]=i,this.filters=Object.assign({},this.filters),this.eraseFields()},clickedRemoveFilter(l){delete this.filters[l],this.filters=Object.assign({},this.filters)},vizConfigChanged(){if(this.filters={},!this.vizConfiguration.filters)return;let l=JSON.parse(JSON.stringify(this.vizConfiguration.filters));if(Array.isArray(l)){const r={};l.forEach(i=>Object.assign(r,i)),l=r}for(const r of Object.keys(l)){const[i,f]=r.split(".");if(f==null){this.$emit("error",`Filter key is not "dataset.column": ${r}`);continue}const d={dataset:i,column:f,operator:"",value:l[r]};d.value===this.OPERATORS[0]&&(d.column=d.column.substring(0,d.column.length-1),d.operator=this.OPERATORS[0]),f.endsWith("!")&&(d.column=d.column.substring(0,d.column.length-1),d.operator="!=");for(const y of["<=",">=","<",">"])if(typeof d.value=="string"&&d.value.startsWith(y)){d.value=d.value.substring(y.length).trim(),d.operator=y;break}this.filters[`${d.dataset}.${d.column}`]=d}this.datasetLabels=[...this.datasetLabels]},datasetsAreLoaded(){const l=Object.keys(this.datasets);this.datasetLabels=l},emitSpecification(){const l={};for(const r of Object.keys(this.filters)){const i=Object.assign({},this.filters[r]);let f=`${i.dataset}.${i.column}`;i.operator==="!="&&(f+="!"),i.operator===this.OPERATORS[0]&&(i.value="@categorical"),(i.operator.startsWith("<")||i.operator.startsWith(">"))&&(i.value=`${i.operator} ${i.value}`),l[f]=i.value}setTimeout(()=>this.$emit("update",{filters:l}),25)},numericColumnsInDataset(l){const r=this.datasets[l];return r?Object.keys(r).filter(f=>r[f].type!==Nt.LOOKUP):[]}}});var pv=function(){var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"width-panel"},[i("div",{directives:[{name:"show",rawName:"v-show",value:r.filterIds.length,expression:"filterIds.length"}],staticClass:"widgets"},[i("div",{staticClass:"widget"},[i("h4",[r._v("Active Filters")]),i("div",{staticClass:"filter-items"},r._l(r.filterIds,function(f){return i("div",{key:f,staticClass:"active-filter filter-details"},[i("p",{staticClass:"stretch"},[i("b",[r._v(r._s(r.filters[f].dataset)+": ")]),r.filters[f].operator==r.OPERATORS[0]?i("span",[r._v("by ")]):r._e(),r._v(r._s(`${r.filters[f].column}`)),r.filters[f].operator!==r.OPERATORS[0]?i("span",[r._v(" "+r._s(`${r.filters[f].operator} ${r.filters[f].value}`))]):r._e()]),i("div",{staticClass:"span close-button",on:{click:function(d){return r.clickedRemoveFilter(f)}}},[r._v("×")])])}),0)])]),i("div",{staticClass:"widgets"},[i("div",{staticClass:"widget boop"},[i("h4",[r._v("Add New Filter")]),i("b-select",{staticClass:"tight selector",attrs:{expanded:"",placeholder:"Select..."},model:{value:r.addDataColumn,callback:function(f){r.addDataColumn=f},expression:"addDataColumn"}},r._l(r.datasetChoices,function(f){return i("optgroup",{key:f,attrs:{label:f}},r._l(r.numericColumnsInDataset(f),function(d){return i("option",{attrs:{label:d},domProps:{value:`${f}@${d}`}})}),0)}),0),r.addDataColumn?i("div",{staticClass:"filter-details2"},[i("b-select",{staticClass:"operator",attrs:{expanded:""},model:{value:r.addOperator,callback:function(f){r.addOperator=f},expression:"addOperator"}},r._l(r.OPERATORS,function(f){return i("option",{attrs:{label:f},domProps:{value:f}})}),0),r.addOperator!==r.OPERATORS[0]?i("b-field",[i("b-input",{attrs:{placeholder:"1.0"},model:{value:r.addValue,callback:function(f){r.addValue=f},expression:"addValue"}})],1):r._e()],1):r._e(),r.addDataColumn?i("div",{staticClass:"button-bar"},[i("button",{staticClass:"button add-button is-small is-inverted",on:{click:r.clickedCancel}},[r._v("Cancel")]),r.addDataColumn?i("button",{staticClass:"button add-button is-small is-primary",attrs:{disabled:r.addOperator!==r.OPERATORS[0]&&r.addValue===""},on:{click:r.clickedAddFilter}},[r._v("  Add  ")]):r._e()]):r._e()],1)])])},gv=[];var vv=Wt(hv,pv,gv,!1,null,"3d1e0de6",null,null);const mv=vv.exports,_v=Yt({name:"VizConfigurator",components:{AddDatasetsPanel:Ig,CircleRadiusPanel:dv,ColorPanel:Eg,WidthPanel:Wg,FillColorPanel:Xg,FillHeightPanel:nv,LegendBox:_g,LineColorPanel:Gg,LineWidthPanel:lv,FiltersPanel:mv},props:{vizDetails:{type:Object,required:!0},datasets:{type:Object,required:!0},fileSystem:{type:Object,required:!0},subfolder:{type:String,required:!0},yamlConfig:{type:String},legendStore:{type:Object,required:!0},filterDefinitions:{type:Object,required:!0},sections:{type:Array},embedded:Boolean},data:()=>({showPanels:!1,showLegend:!1,activeSection:"",showAddDatasets:!1,selectedExportAction:"",layer:{general:{type:"links",dataset:"network.geojson",columns:{}},display:{lineColor:{},color:{},lineWidth:{},radius:{},fill:{},label:{},fillHeight:{}}}}),mounted(){this.activeSection=this.sections?this.sections[0]:"color",this.embedded&&(this.showLegend=!0)},computed:{vizConfiguration(){return{datasets:this.vizDetails.datasets,display:this.vizDetails.display,filters:this.vizDetails.filters}},fidgetSections(){return Object.keys(this.layer.display)}},methods:{getSections(){return this.sections?this.sections.map(l=>({component:Cg.startCase(l.replaceAll("-"," ")).replaceAll(" ","")+"Panel",name:l.replaceAll("-"," ")})):[{component:"ColorPanel",name:"color"},{component:"WidthPanel",name:"width"}]},clickedShowHide(){this.showPanels=!this.showPanels},clickedLegendShowHide(){this.showLegend=!this.showLegend},clickedSection(l){l===this.activeSection?this.activeSection="":this.activeSection=l},async handleConfigChanged(l){this.showAddDatasets=!1,await this.$nextTick(),this.$emit("update",l)},clickedAddData(){this.showAddDatasets=!0},async clickedExport(){await this.$nextTick(),this.selectedExportAction=="yaml"?this.exportYaml():this.selectedExportAction=="png"&&this.$emit("screenshot"),this.selectedExportAction=""},exportYaml(){var ft,ct,Ut,vt,tt,Ft,st,Zt,me,at,Mt;let l="viz-viztype-config.yaml";const r=((ft=this.yamlConfig)==null?void 0:ft.toLocaleLowerCase())||"";(r.endsWith("yaml")||r.endsWith("yml"))&&(l=this.yamlConfig||"viz-viztype-config.yaml"),r.endsWith("shp")&&(l=`viz-map-${r}.yaml`);const i=prompt("Export filename:",l);if(!i)return;const f={title:this.vizDetails.title,description:this.vizDetails.description,zoom:Math.round(10*this.$store.state.viewState.zoom)/10,pitch:Math.round(this.$store.state.viewState.pitch),bearing:Math.round(this.$store.state.viewState.bearing),center:[Math.round(100*this.$store.state.viewState.center[0])/100,Math.round(100*this.$store.state.viewState.center[1])/100],network:this.vizDetails.network||this.vizDetails.geojsonFile,projection:this.vizDetails.projection,showDifferences:this.vizDetails.showDifferences,sampleRate:this.vizDetails.sampleRate,shapes:((ct=this.vizDetails.shapes)==null?void 0:ct.file)||this.vizDetails.shapes,datasets:{...this.vizDetails.datasets},display:{...this.vizDetails.display},filters:{}};typeof this.vizDetails.shapes=="object"&&this.vizDetails.shapes.join&&(f.shapes={file:f.shapes,join:this.vizDetails.shapes.join}),this.$store.state.viewState.bearing||delete f.bearing,this.$store.state.viewState.pitch||delete f.pitch;const d=typeof f.shapes=="string"?(Ut=f==null?void 0:f.shapes)==null?void 0:Ut.substring(1+f.shapes.lastIndexOf("/")):(tt=(vt=f==null?void 0:f.shapes)==null?void 0:vt.file)==null?void 0:tt.substring(1+f.shapes.file.lastIndexOf("/")||0);f.datasets[d]&&delete f.datasets[d];for(const j of Object.keys(f))f[j]||delete f[j];f.display.color&&((st=(Ft=f.display.color)==null?void 0:Ft.colorRamp)==null||delete st.style,(Zt=f.display.color)==null||delete Zt.fixedColors),f.display.fill&&(f.display.fill.colorRamp?((me=f.display.fill.colorRamp)==null||delete me.style,delete f.display.fill.fixedColors,f.display.fill.colorRamp.reverse||delete f.display.fill.colorRamp.reverse):(delete f.display.fill.filters,delete f.display.fill.dataset,delete f.display.fill.columnName)),f.display.lineColor&&(console.log(555,f.display.lineColor),f.display.lineColor.fixedColors&&f.display.lineColor.fixedColors[0]===""?f.display.lineColor=!1:f.display.lineColor.colorRamp?((at=f.display.lineColor.colorRamp)==null||delete at.style,delete f.display.lineColor.fixedColors,f.display.lineColor.colorRamp.reverse||delete f.display.lineColor.colorRamp.reverse):(delete f.display.lineColor.dataset,delete f.display.lineColor.columnName));for(const j of["fill","lineColor","lineWidth"]){const z=f.display[j];if(z&&(z.normalize||delete z.normalize,z.relative||delete z.relative,z.diffDatasets)){z.diff=`${z.diffDatasets[0]} - ${z.diffDatasets[1]}`,delete z.dataset,delete z.diffDatasets;const Jt={diff:z.diff,columnName:z.columnName};z.relative&&(Jt.relative=!0),f.display[j]=Object.assign(Jt,z)}}if(f.datasets)for(const[j,z]of Object.entries(f.datasets))typeof z.file=="object"&&(f.datasets[j].file=((Mt=z.file)==null?void 0:Mt.name)||z.file||j),typeof z=="object"&&(delete f.datasets[j].join,Object.keys(f.datasets[j]).length==1&&f.datasets[j].file&&(f.datasets[j]=f.datasets[j].file));for(const j of Object.entries(f.display))j[1]!==!1&&(Object.keys(j[1]).length||delete f.display[j[0]]);Object.keys(this.filterDefinitions).length?f.filters=Object.assign({},this.filterDefinitions):delete f.filters;const y=dg.stringify(f,{indent:4,simpleKeys:!0});var T=document.createElement("a");T.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(y)),T.setAttribute("download",i),T.style.display="none",document.body.appendChild(T),T.click(),document.body.removeChild(T)}}});var Cv=function(){var r=this,i=r._self._c;return r._self._setupProxy,i("div",{staticClass:"viz-configurator"},[i("div",{staticClass:"map-actions"},[i("button",{directives:[{name:"show",rawName:"v-show",value:!r.embedded,expression:"!embedded"}],staticClass:"button draw-button is-tiny",class:{"is-showing":r.showPanels},attrs:{title:"Config"},on:{click:r.clickedShowHide}},[i("i",{staticClass:"fa fa-sliders-h settings-icon"})]),i("button",{staticClass:"button draw-button is-tiny",class:{"is-showing":r.showLegend},attrs:{title:"Legend"},on:{click:r.clickedLegendShowHide}},[i("i",{staticClass:"fa fa-info settings-icon"})])]),i("div",{staticClass:"right-panels"},[i("div",{directives:[{name:"show",rawName:"v-show",value:r.showPanels&&!r.showAddDatasets,expression:"showPanels && !showAddDatasets"}],staticClass:"configuration-panels"},[i("div",{staticClass:"section-panel"},[i("div",{staticClass:"actions"},[i("b-dropdown",{attrs:{"aria-role":"list",position:"is-bottom-left","close-on-click":!0},on:{change:r.clickedExport},scopedSlots:r._u([{key:"trigger",fn:function({active:f}){return[i("b-button",{staticClass:"is-small is-white export-button"},[i("i",{staticClass:"fa fa-sm fa-share"}),r._v(" Export")])]}}]),model:{value:r.selectedExportAction,callback:function(f){r.selectedExportAction=f},expression:"selectedExportAction"}},[i("b-dropdown-item",{attrs:{value:"yaml","aria-role":"listitem"}},[r._v("Save YAML config")]),i("b-dropdown-item",{attrs:{value:"png","aria-role":"listitem"}},[r._v("Take screenshot")])],1),i("b-button",{staticClass:"is-small is-white export-button",on:{click:r.clickedAddData}},[i("i",{staticClass:"fa fa-sm fa-plus"}),r._v(" Add Data")])],1)]),r._l(r.getSections(),function(f){return i("div",{key:f.name,staticClass:"section-panel"},[i("h1",{class:{h1active:f.name===r.activeSection},on:{click:function(d){return r.clickedSection(f.name)}}},[r._v(r._s(f.name))]),i("div",{directives:[{name:"show",rawName:"v-show",value:f.name===r.activeSection,expression:"section.name===activeSection"}],staticClass:"symbology-panel",class:{active:f.name===r.activeSection}},[f.component?i(f.component,{tag:"component",attrs:{vizConfiguration:r.vizConfiguration,datasets:r.datasets},on:{update:r.handleConfigChanged}}):i("p",[r._v("To be added")])],1)])})],2),i("div",{staticClass:"legend-area"},[i("legend-box",{directives:[{name:"show",rawName:"v-show",value:r.showLegend,expression:"showLegend"}],staticClass:"legend-panel",attrs:{legendStore:r.legendStore}})],1)]),r.showAddDatasets?i("add-datasets-panel",{attrs:{vizConfiguration:r.vizConfiguration,fileSystem:r.fileSystem,subfolder:r.subfolder},on:{update:r.handleConfigChanged}}):r._e()],1)},bv=[];var yv=Wt(_v,Cv,bv,!1,null,"7e8e320b",null,null);const Dv=yv.exports;export{Dv as V};
//# sourceMappingURL=VizConfigurator-c3e1aaf2.js.map
