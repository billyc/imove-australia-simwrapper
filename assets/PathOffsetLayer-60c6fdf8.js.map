{"version":3,"file":"PathOffsetLayer-60c6fdf8.js","sources":["../../src/layers/PathOffsetLayer.ts"],"sourcesContent":["import { PathLayer } from '@deck.gl/layers'\n\nconst OFFSET_TYPE = {\n  NONE: 0,\n  LEFT: 1,\n  RIGHT: 2,\n}\n\nexport default class PathOffsetLayer extends PathLayer {\n  initializeState(context: any) {\n    super.initializeState(context)\n\n    this.getAttributeManager().addInstanced({\n      instanceOffset: {\n        size: 1,\n        accessor: 'getOffset',\n      },\n    })\n  }\n\n  getShaders() {\n    return {\n      ...super.getShaders(),\n      inject: {\n        'vs:#decl': `\n            attribute float instanceOffset;\n            varying float offset;\n            `,\n        'vs:#main-start': `\n            offset = instanceOffset;\n            `,\n        'fs:#decl': `\n            varying float offset;\n            `,\n        'fs:#main-start': `\n            if (offset == 1.0 && vPathPosition.x < 0.0) {\n                discard;\n            }\n            if (offset == 2.0 && vPathPosition.x > 0.0) {\n                discard;\n            }\n            if (offset == 0.0 && abs(vPathPosition.x) > 0.5) {\n                discard;\n            }\n        `,\n      },\n    }\n  }\n}\n\nPathOffsetLayer.layerName = 'PathOffsetLayer'\nPathOffsetLayer.defaultProps = {\n  getOffset: { type: 'accessor', value: OFFSET_TYPE.RIGHT },\n}\n\n// /** DeckGL **/\n// new deck.DeckGL({\n//   container: 'container',\n//   mapboxApiAccessToken: '',\n//   longitude: -122.408,\n//   latitude: 37.785,\n//   zoom: 16,\n//   pitch: 0,\n//   layers: [\n//     new deck.PathLayer({\n//       data:\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-lines.json',\n//       getPath: d => d.path,\n//       getColor: [0, 0, 0],\n//       getWidth: 50,\n//     }),\n//     new MyPathLayer({\n//       data:\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-lines.json',\n//       getPath: d => d.path,\n//       getColor: [255, 0, 0],\n//       getOffset: (d, { index }) => index % 3,\n//       getWidth: 50,\n//       pickable: true,\n//       autoHighlight: true,\n//     }),\n//   ],\n// })\n"],"names":["OFFSET_TYPE","PathOffsetLayer","PathLayer","context"],"mappings":"6CAEA,MAAMA,EAAc,CAClB,KAAM,EACN,KAAM,EACN,MAAO,CACT,EAEA,MAAqBC,UAAwBC,CAAU,CACrD,gBAAgBC,EAAc,CAC5B,MAAM,gBAAgBA,CAAO,EAExB,KAAA,sBAAsB,aAAa,CACtC,eAAgB,CACd,KAAM,EACN,SAAU,WACZ,CAAA,CACD,CACH,CAEA,YAAa,CACJ,MAAA,CACL,GAAG,MAAM,WAAW,EACpB,OAAQ,CACN,WAAY;AAAA;AAAA;AAAA,cAIZ,iBAAkB;AAAA;AAAA,cAGlB,WAAY;AAAA;AAAA,cAGZ,iBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWpB,CAAA,CAEJ,CACF,CAEAF,EAAgB,UAAY,kBAC5BA,EAAgB,aAAe,CAC7B,UAAW,CAAE,KAAM,WAAY,MAAOD,EAAY,KAAM,CAC1D"}