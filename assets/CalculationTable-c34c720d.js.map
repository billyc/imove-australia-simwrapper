{"version":3,"file":"CalculationTable-c34c720d.js","sources":["../../src/plugins/calculation-table/CalculationTable.vue","../../src/plugins/calculation-table/assets/table.png"],"sourcesContent":["<template lang=\"pug\">\n.my-component(:class=\"{'hide-thumbnail': !thumbnail}\" oncontextmenu=\"return false\")\n\n  img.thumb(v-if=\"thumbnail\" src=\"./assets/table.png\" :width=\"128\")\n\n\n  .topsheet(v-if=\"!thumbnail && isLoaded\")\n      p.header {{ subfolder }}\n\n      h2 {{ vizDetails.title }}\n      p {{ vizDetails.description}}\n\n      hr\n\n      component.dash-card(\n        is=\"TopSheet\"\n        :fileSystemConfig=\"fileSystem\"\n        :subfolder=\"subfolder\"\n        :config=\"vizDetails\"\n        :yaml=\"yamlConfig\"\n        :files=\"files\"\n        :cardTitle=\"vizDetails.title\"\n        :cardId=\"'table1'\"\n        :allConfigFiles=\"allConfigFiles\"\n      )\n\n      //- @isLoaded=\"handleCardIsLoaded(card)\"\n      //- @dimension-resizer=\"setDimensionResizer\"\n      //- @titles=\"setCardTitles(card, $event)\"\n\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport YAML from 'yaml'\n\nimport util from '@/js/util'\nimport globalStore from '@/store'\n\nimport { ColorScheme, FileSystemConfig, VisualizationPlugin, Status, YamlConfigs } from '@/Globals'\n\nimport HTTPFileSystem from '@/js/HTTPFileSystem'\nimport TopSheet from '@/components/TopSheet/TopSheet.vue'\n\nconst thumbnailUrl = \"url('assets/thumbnail.jpg') no-repeat;\"\n\nconst Component = defineComponent({\n  name: 'CalculationTable',\n  components: { TopSheet },\n  props: {\n    root: { type: String, required: true },\n    subfolder: { type: String, required: true },\n    yamlConfig: String,\n    config: Object,\n    thumbnail: Boolean,\n  },\n  data: () => {\n    return {\n      globalState: globalStore.state,\n      allConfigFiles: { dashboards: {}, topsheets: {}, vizes: {}, configs: {} } as YamlConfigs,\n      files: [] as string[],\n      isLoaded: false,\n      vizDetails: {\n        title: '',\n        description: '',\n        thumbnail: '',\n      },\n    }\n  },\n  computed: {\n    fileApi(): HTTPFileSystem {\n      return new HTTPFileSystem(this.fileSystem, globalStore)\n    },\n    fileSystem(): FileSystemConfig {\n      const svnProject: FileSystemConfig[] = this.$store.state.svnProjects.filter(\n        (a: FileSystemConfig) => a.slug === this.root\n      )\n      if (svnProject.length === 0) {\n        console.log('no such project')\n        throw Error\n      }\n      return svnProject[0]\n    },\n\n    urlThumbnail(): any {\n      return thumbnailUrl\n    },\n  },\n  methods: {\n    async getVizDetails() {\n      if (!this.fileApi) return\n\n      console.log(this.yamlConfig)\n      // first get config\n      try {\n        const text = await this.fileApi.getFileText(this.subfolder + '/' + this.yamlConfig)\n        this.vizDetails = YAML.parse(text)\n      } catch (e) {\n        console.error('failed')\n      }\n      const t = this.vizDetails.title ? this.vizDetails.title : 'Table'\n      this.$emit('title', t)\n    },\n  },\n  async mounted() {\n    await this.getVizDetails()\n    this.allConfigFiles = await this.fileApi.findAllYamlConfigs(this.subfolder)\n    const { files } = await this.fileApi.getDirectory(this.subfolder)\n    this.files = files\n\n    this.isLoaded = true\n\n    if (this.thumbnail) return\n  },\n})\n\nexport default Component\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles.scss';\n\n.my-component {\n  margin: 0 0;\n  padding: 0 2rem;\n  background-color: var(--bgMapPanel);\n}\n\n.header {\n  margin-top: 0.5rem;\n  margin-bottom: 2rem;\n  color: var(--text);\n}\n\n.topsheet {\n  max-width: 55rem;\n  margin: 0rem auto;\n}\n\n@media only screen and (max-width: 640px) {\n}\n</style>\n","export default \"__VITE_ASSET__b8ee9a0d__\""],"names":["thumbnailUrl","Component","defineComponent","TopSheet","globalStore","HTTPFileSystem","svnProject","a","text","YAML","t","files","__$_require_44916138__"],"mappings":"0LA4CA,MAAAA,EAAA,yCAEAC,EAAAC,EAAA,CACA,KAAA,mBACA,WAAA,CAAA,SAAAC,CAAA,EACA,MAAA,CACA,KAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,UAAA,CAAA,KAAA,OAAA,SAAA,EAAA,EACA,WAAA,OACA,OAAA,OACA,UAAA,OACA,EACA,KAAA,KACA,CACA,YAAAC,EAAA,MACA,eAAA,CAAA,WAAA,CAAA,EAAA,UAAA,CAAA,EAAA,MAAA,CAAA,EAAA,QAAA,EAAA,EACA,MAAA,CAAA,EACA,SAAA,GACA,WAAA,CACA,MAAA,GACA,YAAA,GACA,UAAA,EACA,CAAA,GAGA,SAAA,CACA,SAAA,CACA,OAAA,IAAAC,EAAA,KAAA,WAAAD,CAAA,CACA,EACA,YAAA,CACA,MAAAE,EAAA,KAAA,OAAA,MAAA,YAAA,OACAC,GAAAA,EAAA,OAAA,KAAA,IAAA,EAEA,GAAAD,EAAA,SAAA,EACA,cAAA,IAAA,iBAAA,EACA,MAEA,OAAAA,EAAA,CAAA,CACA,EAEA,cAAA,CACA,OAAAN,CACA,CACA,EACA,QAAA,CACA,MAAA,eAAA,CACA,GAAA,CAAA,KAAA,QAAA,OAEA,QAAA,IAAA,KAAA,UAAA,EAEA,GAAA,CACA,MAAAQ,EAAA,MAAA,KAAA,QAAA,YAAA,KAAA,UAAA,IAAA,KAAA,UAAA,EACA,KAAA,WAAAC,EAAA,MAAAD,CAAA,OACA,CACA,QAAA,MAAA,QAAA,CACA,CACA,MAAAE,EAAA,KAAA,WAAA,MAAA,KAAA,WAAA,MAAA,QACA,KAAA,MAAA,QAAAA,CAAA,CACA,CACA,EACA,MAAA,SAAA,CACA,MAAA,KAAA,gBACA,KAAA,eAAA,MAAA,KAAA,QAAA,mBAAA,KAAA,SAAA,EACA,KAAA,CAAA,MAAAC,CAAA,EAAA,MAAA,KAAA,QAAA,aAAA,KAAA,SAAA,EACA,KAAA,MAAAA,EAEA,KAAA,SAAA,GAEA,KAAA,SACA,CACA,CAAA,EClHeC,EAAA"}